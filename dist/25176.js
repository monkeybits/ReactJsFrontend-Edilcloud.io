(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[25176],{22981:function(e,t,n){"use strict";n.d(t,{Bv:function(){return a},a:function(){return l},HV:function(){return c}});var a=[{label:"Owner",key:"o"},{label:"Delegate",key:"d"},{label:"Manager",key:"m"},{label:"Worker",key:"w"}],l=["apps/chat"],c=["apps/file-manager"]},25176:function(e,t,n){"use strict";n.r(t);var a=n(68357),D=n.n(a),l=n(56156),c=n.n(l),r=n(61432),j=n.n(r),i=n(51265),T=n.n(i),o=n(28129),L=n.n(o),M=n(35923),R=n(895),s=n(64584),B=n(84403),U=n(95272),F=n(48258),W=n(92466),V=n(25710),z=n(13786),G=n(80896),H=n(96282),X=n(82186),$=n(5344),q=n(19462),J=n(78709),Y=n(58913),m=n(6274),a=n(40962),l=n(68403),K=n(19199),r=n(65058),i=n(42356),Q=n(84568),ee=n(11208),te=n(88572),ne=n(3089),ae=n(35965),le=n(53369),ce=n(22981),re=n(17844),o=n(32986);function u(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){c()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var oe=(0,o.ZP)(function(){return Promise.all([n.e(21284),n.e(20251)]).then(n.bind(n,48190))}),se=(0,o.ZP)(function(){return n.e(52317).then(n.bind(n,52317))}),me=J.createElement(r.Z,{fontSize:"small"}),ue=J.createElement(i.Z,{fontSize:"small"}),de={first_name:"",last_name:"",email:"",position:"",phone:""},fe=((0,m.Z)({root:{color:l.Z[400],"&$checked":{color:l.Z[600]}},checked:{}})(function(e){return J.createElement(s.Z,T()({color:"default"},e))}),(0,a.Z)(function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));t.default=function(s){var t=(0,le.$)("contacts").t,m=(0,Y.I0)(),u=(fe(),(0,Y.v9)(function(e){return e.contactsApp.contacts.contactDialog})),e=(0,J.useState)("English"),d=(p=j()(e,2))[0],n=p[1],a=(0,J.useState)(""),f=(k=j()(a,2))[0],l=k[1],c=(0,J.useState)(!0),r=(e=j()(c,2))[0],i=e[1],o=(0,J.useRef)(null),p=(0,J.useState)({can_access_chat:!0,can_access_files:!0}),E=(a=j()(p,2))[0],v=a[1],h=(k=(0,M.cI)(de)).form,g=k.handleChange,b=k.setForm,_=k.resetForm,c=(0,J.useState)(null),p=(e=j()(c,2))[0],y=e[1],a=(0,J.useState)(!1),c=(k=j()(a,2))[0],w=k[1],e=(0,J.useState)(!1),Z=(a=j()(e,2))[0],N=a[1],k=(0,J.useState)({file:void 0,imagePreviewUrl:void 0}),C=(e=j()(k,2))[0],S=e[1],O=(0,ne.Fc)(),a=function(){var e;return null==O||null===(e=O.extra)||void 0===e?void 0:e.profile.role},x=(0,J.useCallback)(function(){"edit"===u.type&&u.data&&(b(ie({},u.data)),l(u.data.role),n("en"==u.data.language?"English":"Italian"),v({can_access_chat:u.data.can_access_chat,can_access_files:u.data.can_access_files})),"new"===u.type&&(v({can_access_chat:!0,can_access_files:!0}),b(ie(ie(ie({},de),u.data),{},{id:R.Z.generateGUID()})))},[u.data,u.type,b]);function P(){return S({file:void 0,imagePreviewUrl:void 0}),"edit"===u.type?m(re.closeEditContactDialog()):m(re.closeNewContactDialog())}function A(){var e,t,n;return Z||"new"!==u.type?0<(null===(t=h.first_name)||void 0===t?void 0:t.length)&&0<(null===(t=h.last_name)||void 0===t?void 0:t.length)&&3<(null===(n=h.email)||void 0===n?void 0:n.length)&&f&&d:(h.email&&(0,te.k)((0,ee.b_)(String(h.email)),{},function(e){e&&e.length?i(!1):i(!0)},function(e){},te.Y.GET,(0,ne.XW)()),r&&0<(null===(n=h.first_name)||void 0===n?void 0:n.length)&&0<(null===(e=h.last_name)||void 0===e?void 0:e.length)&&3<(null===(e=h.email)||void 0===e?void 0:e.length)&&f&&d)}function I(e){o.current.click()}return(0,J.useEffect)(function(){if(i(!0),u.props.open)return x(),function(){_(),b({}),n("English"),l(""),S({file:void 0,imagePreviewUrl:void 0}),w(!1),N(!1),v({can_access_chat:!0,can_access_files:!0}),i(!0)}},[u.props.open]),k=function(){var t=D()(L().mark(function e(t){var n,a,l,c,r,i,o;return L().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i=ie(ie({},h),{},{role:ce.Bv.filter(function(e){return e.label==f})[0].key,language:"English"==d?"en":"it"}),n=i.first_name,a=i.last_name,l=i.email,c=i.id,i.company,r=i.position,i=i.phone,e.t0=ie,e.t1=c,e.t2=n,e.t3=a,e.t4=l,e.t5=ce.Bv.filter(function(e){return e.label==f})[0].key,e.t6="English"==d?"en":"it",e.next=12,(0,ne.y6)(C.file);case 12:if(e.t7=e.sent,e.t8=r,e.t9=i,e.t10={id:e.t1,first_name:e.t2,last_name:e.t3,email:e.t4,role:e.t5,language:e.t6,photo:e.t7,position:e.t8,phone:e.t9},e.t11=E,o=(0,e.t0)(e.t10,e.t11),"new"===u.type)return e.t12=m,e.t13=re,e.t14=ie,e.t15=ie({},o),e.t16={},e.next=26,(0,ne.y6)(C.file);e.next=36;break;case 26:e.t17=e.sent,e.t18=Z?o.id:void 0,e.t19={photo:e.t17,id:e.t18},e.t20=(0,e.t14)(e.t15,e.t16,e.t19),e.t21=Z,e.t22=s.handleSetLoading,e.t23=e.t13.addContact.call(e.t13,e.t20,e.t21,e.t22),(0,e.t12)(e.t23),e.next=37;break;case 36:m(re.updateContact(o,c,!0,void 0,u.data.status));case 37:P();case 38:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),e=J.useState({checkedA:!0,checkedB:!0}),(e=j()(e,2))[0],e[1],c?J.createElement(oe,{image:p,viewCroper:c,onCrop:function(e){var t=new FileReader;t.onloadend=function(){S({file:e,imagePreviewUrl:t.result})},t.readAsDataURL(e)},onHide:function(){return w(!1)}}):J.createElement(J.Fragment,null,J.createElement(B.Z,{position:"static",elevation:1},J.createElement(U.Z,{className:"border-0"},J.createElement("div",{className:"absolute top-0 right-0 mr-4"},J.createElement(F.Z,{onClick:P,edge:"start",color:"inherit","aria-label":"close"},J.createElement(ae.Z,null))),J.createElement(W.Z,{variant:"subtitle1",className:"block mx-auto mb-8",color:"inherit"},"new"===u.type?t("ADD_TEAM_MEMBER"):t("EDIT_TEAM_MEMBER"))),J.createElement("div",{className:"flex flex-col items-center justify-center pb-24"},J.createElement("div",{className:"relative"},J.createElement(V.Z,{className:"w-96 h-96 cursor-pointer",alt:"contact avatar",src:C.imagePreviewUrl||h.photo||h.avatar,onClick:I}),J.createElement("a",{onClick:I,className:"edit-icon text-center rounded-full cursor-pointer"},J.createElement(Q.Z,{fontSize:"small"}))),J.createElement("input",{type:"file",id:"file",ref:o,onChange:function(e){y(URL.createObjectURL(e.currentTarget.files[0])),w(!0)},style:{display:"none"}}),"edit"===u.type&&J.createElement(W.Z,{variant:"h6",color:"inherit",className:"pt-8"},h.name)),J.createElement("div",{className:"mb-24 block mx-auto"},J.createElement(z.Z,{variant:E.can_access_files?"contained":"outlined",disabled:"m"==a()||"w"==a(),size:"small",color:"secondary",className:"mr-8",onClick:function(){return v(function(e){return ie(ie({},e),{},{can_access_files:!e.can_access_files})})}},t("ACCESS_FILE")),J.createElement(z.Z,{variant:E.can_access_chat?"contained":"outlined",size:"small",color:"secondary",disabled:"m"==a()||"w"==a(),onClick:function(){return v(function(e){return ie(ie({},e),{},{can_access_chat:!e.can_access_chat})})}},t("ACCESS_CHAT")))),J.createElement("form",{noValidate:!0,onSubmit:k,className:"flex flex-col md:overflow-hidden"},J.createElement(G.Z,{classes:{root:"p-24"}},"new"===u.type&&"Search"===u.name&&J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"search")),J.createElement(se,{placeholder:t("EXISTING_MEMBER_SEARCH"),onSelect:function(e){S({}),N(!0),l(e.role),n("en"==e.language?"English":"Italian"),b(ie({},e))}})),"Search"!==u.name&&J.createElement(J.Fragment,null,J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"account_circle")),J.createElement(X.Z,{className:"mb-24",label:t("NAME"),id:"first_name",name:"first_name",value:h.first_name,onChange:g,variant:"outlined",required:!0,fullWidth:!0})),J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"}),J.createElement(X.Z,{className:"mb-24",label:t("LAST_NAME"),id:"last_name",name:"last_name",value:h.last_name,onChange:g,variant:"outlined",fullWidth:!0})),J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"email")),J.createElement(X.Z,{error:!Z&&!r,className:"mb-24",label:t("EMAIL"),id:"email",name:"email",value:h.email,onChange:function(e){g(e)},helperText:!Z&&!r&&"Try with existing users",variant:"outlined",fullWidth:!0})),J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"nature_people")),J.createElement(K.ZP,{options:ce.Bv,style:{width:"100%"},className:"mb-24",disabled:"new"!=u.type&&"m"==a()||"w"==a(),getOptionLabel:function(e){return e.label},renderOption:function(e,t){t=t.selected;return J.createElement(J.Fragment,null,J.createElement($.Z,{icon:me,checkedIcon:ue,style:{marginRight:8},checked:t}),e.label)},defaultValue:ce.Bv.filter(function(e){return e.label==f}).length&&ce.Bv.filter(function(e){return e.label==f})[0],inputValue:f,renderInput:function(e){return J.createElement(X.Z,T()({},e,{variant:"outlined",label:t("ROLE")}))},onInputChange:function(e,t){return l(t)}})),J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"translate")),J.createElement(K.ZP,{className:"mb-24",options:["English","Italian"],style:{width:"100%"},disableCloseOnSelect:!0,getOptionLabel:function(e){return e},renderOption:function(e,t){t=t.selected;return J.createElement(J.Fragment,null,J.createElement($.Z,{icon:me,checkedIcon:ue,style:{marginRight:8},checked:t}),e)},defaultValue:d,inputValue:d,renderInput:function(e){return J.createElement(X.Z,T()({},e,{variant:"outlined",label:t("LANGUAGE")}))},onInputChange:function(e,t){return n(t)}})),J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"work")),J.createElement(X.Z,{className:"mb-24",disabled:"m"==a()||"w"==a(),label:t("JOB_TITLE"),id:"position",name:"position",value:h.position,onChange:g,variant:"outlined",fullWidth:!0})),J.createElement("div",{className:"flex"},J.createElement("div",{className:"min-w-48 pt-20"},J.createElement(H.Z,{color:"action"},"phone")),J.createElement(X.Z,{className:"mb-24",label:t("PHONE"),id:"phone",name:"phone",value:h.phone,onChange:g,variant:"outlined",fullWidth:!0})))," "),"new"===u.type?J.createElement(q.Z,{className:"justify-between p-8"},J.createElement("div",{className:"px-16"},J.createElement(z.Z,{variant:"contained",color:"primary",onClick:k,type:"submit",disabled:!A()},t("ADD")))):J.createElement(q.Z,{className:"justify-between p-8"},J.createElement("div",{className:"px-16"},J.createElement(z.Z,{variant:"contained",color:"primary",type:"submit",onClick:k,disabled:!A()},t("SAVE"))),J.createElement(F.Z,{onClick:function(){m(re.removeContact(h.id)),P()}},J.createElement(H.Z,null,"delete")))))}}}]);