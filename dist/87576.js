(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[87576],{87576:function(e,t,a){"use strict";a.r(t);var n=a(79545),r=a(56156),l=a.n(r),n=a(61432),y=a.n(n),r=a(51265),D=a.n(r),n=a(20305),o=a.n(n),r=a(16526),n=a.n(r),h=a(35923),O=a(49073),i=(a(65129),a(1644)),N=a(92466),P=a(70310),_=a(61681),j=a(48258),S=a(80896),r=a(78279),T=a.n(r),Z=a(78709),k=a(58913),x=a(55110),C=a(11208),A=a(88572),L=a(3089),M=a(35965),I=a(90),r=a(32986);function c(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function F(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach(function(e){l()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var G=(0,r.ZP)(function(){return a.e(44291).then(a.bind(a,44291))}),U=(0,r.ZP)(function(){return Promise.resolve().then(a.bind(a,76984))}),q=(0,r.ZP)(function(){return Promise.resolve().then(a.bind(a,69796))});function z(e){var t=e.children,a=e.value,n=e.index,e=o()(e,["children","value","index"]);return Z.createElement("div",D()({role:"tabpanel",hidden:a!==n,id:"wrapped-tabpanel-".concat(n),"aria-labelledby":"wrapped-tab-".concat(n)},e),a===n&&Z.createElement(i.Z,{p:3},Z.createElement(N.Z,null,t)))}function H(e){return{id:"wrapped-tab-".concat(e),"aria-controls":"wrapped-tabpanel-".concat(e)}}z.propTypes={children:n().node,index:n().any.isRequired,value:n().any.isRequired};var R={id:"",title:"",notes:"",startDate:new Date,dueDate:new Date,completed:!1,starred:!1,important:!1,deleted:!1,labels:[]};t.default=function(e){var t,a,n,r,l=(0,k.I0)(),o=(0,k.v9)(function(e){return e.todoAppNote.todos.upload}),i=(0,k.v9)(function(e){return e.todoAppNote.todos.todoDialog}),c=Z.useState(0),c=(d=y()(c,2))[0],s=d[1],d=((0,k.v9)(function(e){return e.todoAppNote.labels}),(0,k.v9)(function(e){return e.contactsApp.contacts.approvedCompanies}),(0,Z.useState)(null)),u=(d=((d=y()(d,2))[0],d[1],(0,h.cI)(F({},R)))).form,p=(d.handleChange,d.setForm),m=d.resetForm,d=(T()(u.startDate).format(T().HTML5_FMT.DATETIME_LOCAL_SECONDS),T()(u.dueDate).format(T().HTML5_FMT.DATETIME_LOCAL_SECONDS),(0,Z.useState)([])),v=((d=y()(d,2))[0],d[1]),d=(0,Z.useState)([]),f=((d=y()(d,2))[0],d[1]),d=(0,Z.useState)([]),d=((d=y()(d,2))[0],d[1],(0,Z.useState)(0)),b=((d=y()(d,2))[0],d[1],(0,x.UO)()),d=(0,Z.useState)({startDate:new Date,endDate:void 0}),E=((d=y()(d,2))[0],d[1]),g=(0,Z.useCallback)(function(){var e;s(0),"edit"===i.type&&i.data&&p(F({},i.data)),"activity"===i.type&&null!==(e=i.data)&&void 0!==e&&e.assigned_company&&(w(),E({startDate:new Date(i.data.date_start),endDate:new Date(i.data.date_end)})),"new"===i.type&&(v([]),E({startDate:new Date,endDate:void 0}),p(F(F(F({},R),i.data),{},{id:O.Z.generateGUID()})))},[i.data,i.type,p]);(0,Z.useEffect)(function(){if(i.props.openTimelineDialog)return g(),function(){m()}},[i.props.openTimelineDialog,g]);var w=function(e){var t;console.log(b.id,i.data.assigned_company.id,e),(0,A.k)((0,C.GL)(b.id,null===(t=i.data.assigned_company)||void 0===t?void 0:t.id,e),{},function(e){return f(e)},function(e){return console.log(e)},A.Y.GET,(0,L.XW)())};return Z.createElement("div",{className:"w-full custom-task-content"},Z.createElement("div",{className:"custom-tab-header2 flex justify-start relative"},Z.createElement(P.Z,{value:c,onChange:function(e,t){s(t)},showLabels:!0,className:"w-full h-64"},Z.createElement(_.Z,D()({label:"Timeline",className:"min-w-auto max-w-full font-bold",wrapped:!0},H(0))),Z.createElement(_.Z,D()({label:"Activity",className:"min-w-auto max-w-full font-bold"},H(1)))),Z.createElement("div",{className:"absolute right-m-12"},Z.createElement(j.Z,{onClick:function(){return l(I.aP())},edge:"start",color:"inherit","aria-label":"close",className:"close-icon"},Z.createElement(M.Z,null))),!(null==o||!o.isUploading)&&Z.createElement("div",{className:"linear-progress custom-color"},Z.createElement(q,{progress:o.uploadPercentage,label:"Processing uploading post"}))),Z.createElement("div",{className:"my-24 todo-bg-footer p-12 px-20 rounded"},(null===(o=i.data)||void 0===o||null===(t=o.task)||void 0===t?void 0:t.project)&&Z.createElement(N.Z,{variant:"h6",color:"inherit",className:"font-size-18 font-weight-700"},Z.createElement("div",null,null===(t=i.data)||void 0===t||null===(a=t.task)||void 0===a?void 0:a.project.name)),Z.createElement("div",{className:"flex items-center font-size-12"},Z.createElement("div",{className:"my-4"},null===(a=i.data)||void 0===a||null===(n=a.task)||void 0===n?void 0:n.name)," ",Z.createElement("span",{className:"mx-12"}," > "),Z.createElement("div",null,null===(n=i.data)||void 0===n||null===(r=n.todo)||void 0===r?void 0:r.title))),Z.createElement(S.Z,{id:"dialog-content",classes:{root:"p-0"}},Z.createElement(z,{value:c,index:0,className:"activity-pad write-post-img-full"},Z.createElement(U,null)),Z.createElement(z,{value:c,index:1,className:"bg-white"},Z.createElement(G,null))))}}}]);