(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[20222],{92505:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var t=n(56156),r=n.n(t),t=n(20305),a=n.n(t),t=n(51265),i=n.n(t),l=n(78709),t=n(40962),o=n(389),c=n(92466),s=n(82186),u=n(41713),p=n(23610),d=n(86926),m=n(28344),f=n(67485),h=n(94435);function v(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var g=(0,t.Z)(function(e){return{root:{"& .fuse-chip-select__input":{color:e.palette.text.primary},"&.standard":{"& $placeholder":{},"& $valueContainer":{paddingTop:4}},"&.filled":{"& $placeholder":{left:12},"& $valueContainer":{paddingTop:24,paddingLeft:12},"& $chip":{border:"1px solid rgba(0, 0, 0, 0.12)"}},"&.outlined":{"& $placeholder":{left:12},"& $valueContainer":{paddingLeft:12,paddingTop:12}}},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",paddingBottom:4,paddingTop:12,minHeight:40},chip:{margin:"4px 4px 4px 0"},chipFocused:{backgroundColor:(0,o.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing(),"px ").concat(e.spacing(2),"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:0,fontSize:16,margin:0},paper:{position:"absolute",zIndex:2,marginTop:e.spacing(),left:0,right:0},divider:{height:e.spacing(2)}}});function E(e){var t=e.inputRef,e=a()(e,["inputRef"]);return l.createElement("div",i()({ref:t},e))}var b={Control:function(e){var t=g();return l.createElement(s.Z,i()({fullWidth:!0,className:(0,m.Z)(t.root,e.selectProps.textFieldProps.variant),required:e.selectProps.required,error:e.selectProps.error,InputProps:{inputComponent:E,inputProps:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({className:t.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){var t=g();return l.createElement(d.Z,i()({square:!0,className:t.paper},e.innerProps),e.children)},MultiValue:function(t){var e=g();return l.createElement(p.Z,{tabIndex:-1,label:t.children,className:(0,m.Z)(e.chip,r()({},e.chipFocused,t.isFocused),t.data.class),onDelete:function(e){t.removeProps.onClick(),t.removeProps.onMouseDown(e)}})},NoOptionsMessage:function(e){var t=g();return l.createElement(c.Z,i()({color:"textSecondary",className:t.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return l.createElement(u.Z,i()({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?600:400}},e.innerProps),e.children)},Placeholder:function(e){var t=g();return l.createElement(c.Z,i()({color:"textSecondary",className:t.placeholder},e.innerProps),e.children)},SingleValue:function(e){var t=g();return l.createElement(c.Z,i()({className:t.singleValue},e.innerProps),e.children)},ValueContainer:function(e){var t=g();return l.createElement("div",{className:t.valueContainer},e.children)}};function y(t){function e(e){null===e&&(e=[]),t.onChange&&t.onChange(e)}return"fixed"===t.variant?l.createElement(f.ZP,i()({classNamePrefix:"fuse-chip-select"},t,{components:b,onChange:e})):l.createElement(h.ZP,i()({classNamePrefix:"fuse-chip-select"},t,{components:b,onChange:e}))}var P=l.memo(y)},25950:function(e,t,n){"use strict";n.d(t,{ek:function(){return m},AE:function(){return w},o:function(){return v},Cv:function(){return D},Op:function(){return c}});var r=n(51265),a=n.n(r),i=n(78709),l=n(65129),o=n(82186),t=n(62902);var c=i.memo((0,t.withFormsy)(function(t){var e=l.Z.pick(t,["autoComplete","autoFocus","children","className","defaultValue","disabled","FormHelperTextProps","fullWidth","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","select","SelectProps","type","variant"]),n=t.errorMessage,r=t.value||"";return i.createElement(o.Z,a()({},e,{onChange:function(e){t.setValue(e.currentTarget.value),t.onChange&&t.onChange(e)},value:r,error:Boolean(!t.isPristine&&t.showRequired||n),helperText:n}))})),s=n(41533),u=n(556),p=n(5344),d=n(23726);var m=i.memo((0,t.withFormsy)(function(t){var e=l.Z.pick(t,["checkedIcon","classes","color","disabled","disableRipple","icon","id","indeterminate","indeterminateIcon","inputProps","inputRef","onChange","variant"]),n=t.errorMessage,r=t.value;return i.createElement(s.Z,{error:Boolean(!t.isPristine&&t.showRequired||n),className:t.className},i.createElement(u.Z,{control:i.createElement(p.Z,a()({},e,{type:"checkbox",checked:r,onChange:function(e){t.setValue(e.target.checked),t.onChange&&t.onChange(e)}})),label:t.label}),Boolean(n)&&i.createElement(d.Z,null,n))})),f=n(50385),h=n(58889);var v=i.memo((0,t.withFormsy)(function(n){var e=l.Z.pick(n,["children","name","onBlur","onChange","onKeyDown","variant"]),t=n.errorMessage,r=n.value;return i.createElement(s.Z,{error:Boolean(!n.isPristine&&n.showRequired||t),className:n.className},i.createElement(s.Z,{component:"fieldset",required:n.required,error:Boolean(t)},n.label&&i.createElement(f.Z,{component:"legend"},n.label),i.createElement(h.Z,a()({},e,{value:r||null,onChange:function(e,t){n.setValue(t),n.onChange&&n.onChange(e)}})),Boolean(t)&&i.createElement(d.Z,null,t)))})),g=n(25715),E=n(91493),b=n(38932),y=n(50390),P=n(71871);var D=i.memo((0,t.withFormsy)(function(t){var e=l.Z.pick(t,["autoWidth","children","classes","displayEmpty","input","inputProps","MenuProps","multiple","native","onChange","onClose","onOpen","open","renderValue","SelectDisplayProps","value","variant"]),n=t.errorMessage,r=t.value;return i.createElement(s.Z,{error:Boolean(!t.isPristine&&t.showRequired||n),className:t.className,variant:e.variant},t.label&&i.createElement(y.Z,{htmlFor:t.name},t.label),i.createElement(P.Z,a()({},e,{value:r,onChange:function(e){t.setValue(e.target.value),t.onChange&&t.onChange(e)},input:function(){switch(e.variant){case"outlined":return i.createElement(g.Z,{labelWidth:8*t.label.length,id:t.name});case"filled":return i.createElement(E.Z,{id:t.name});default:return i.createElement(b.Z,{id:t.name})}}()})),Boolean(n)&&i.createElement(d.Z,null,n))})),r=n(32986),O=n(28344),Z=(0,r.ZP)(function(){return Promise.all([n.e(51446),n.e(45489),n.e(8599)]).then(n.bind(n,92505))});var w=i.memo((0,t.withFormsy)(function(n){var e=l.Z.pick(n,["children","classes","className","defaultValue","disabled","fullWidth","id","label","name","onBlur","onChange","onFocus","placeholder","required","textFieldProps","variant","isMulti","options","errorMessage"]),t=n.errorMessage,r=n.value;return i.createElement(s.Z,{error:Boolean(!n.isPristine&&n.showRequired||t),className:(0,O.Z)(n.className,"z-10",n.showRequired?"required":"",n.showError?"error":null),variant:e.variant},n.label&&i.createElement(y.Z,{htmlFor:n.name},n.label),i.createElement(Z,a()({},e,{value:r,onChange:function(e,t){n.multiple?n.setValue(t.map(function(e){return e.value})):n.setValue(e)},error:Boolean(!n.isPristine&&n.showRequired||t)})),Boolean(t)&&i.createElement(d.Z,null,t))}))},20222:function(e,t,n){"use strict";n.r(t);var r=n(56156),P=n.n(r),a=n(68357),D=n.n(a),i=n(61432),O=n.n(i),l=n(28129),Z=n.n(l),w=n(92505),x=n(25950),r=n(6274),C=n(25710),N=n(78997),j=n(13786),S=n(65087),a=n(62902),R=n.n(a),M=n(78709),i=n(80896),l=n(19462),_=n(78278),k=n(58913),T=n(82399),F=n(55110),V=n(11208),q=n(88572),I=n(3089),a=n(78279),B=n.n(a),W=n(53369);function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){P()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var L=(0,n(32986).ZP)(function(){return n.e(54397).then(n.bind(n,54397))});var $=(0,r.Z)(function(e){return{root:{padding:e.spacing(2),flexGrow:1}}})(i.Z);(0,r.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)}}})(l.Z);t.default=function(){function p(e){return e?B()(e).format("YYYY-MM-DD"):void 0}(0,F.UO)();var d=(0,k.I0)(),m=(0,k.v9)(function(e){return e.notesApp.project}),e=M.useState(!1),t=(l=O()(e,2))[0],f=l[1],n=M.useState({name:""}),e=((a=O()(n,2))[0],a[1],(0,M.useState)(!1)),n=(l=O()(e,2))[0],r=l[1],a=(0,M.useState)(!1),h=(e=O()(a,2))[0],i=e[1],l=(0,M.useState)(null),v=(a=O()(l,2))[0],o=a[1],e=(0,M.useState)([]),a=(l=O()(e,2))[0],c=l[1],e=(0,M.useState)([]),g=(l=O()(e,2))[0],s=l[1],E=(0,k.v9)(function(e){return e.notesApp.project.entities}),e=(0,W.$)("projects").t,l=(0,M.useState)({startDate:new Date,endDate:void 0}),b=(l=O()(l,2))[0],u=l[1];(0,M.useEffect)(function(){if("edit"==m.dialogType){i(m.projectDetail);var e=m.projectDetail.referent?[{data:m.projectDetail.referent,value:m.projectDetail.referent.first_name,label:M.createElement("span",{className:"flex items-center"},M.createElement(C.Z,{className:"w-32 h-32",src:m.projectDetail.referent.photo}),M.createElement("span",{className:"mx-8"},m.projectDetail.referent.first_name))}]:[];return s(e),u({startDate:m.projectDetail.date_start?new Date(m.projectDetail.date_start):void 0,endDate:m.projectDetail.date_end?new Date(m.projectDetail.date_end):void 0}),o({fileData:void 0,imagePreviewUrl:null===(e=m.projectDetail)||void 0===e?void 0:e.logo}),function(){d(T.Sg({}))}}},[m.projectDialog]);var y=(0,M.useRef)(null);return l=function(){var t=D()(Z().mark(function e(r){var a,i,l,o,c,s,u;return Z().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),a=r.name,i=r.description,l=r.note,o=r.address,e.t0=a,e.t1=i,e.t2=(n=t=void 0,!g.length||null===(t=g[0])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.id),e.t3=p(b.startDate),e.t4=p(b.endDate),v&&v.fileData)return e.next=10,(0,I.y6)(v.fileData);e.next=13;break;case 10:e.t5=e.sent,e.next=14;break;case 13:e.t5=void 0;case 14:for(u in e.t6=e.t5,e.t7=l,e.t8=o,c={name:e.t0,description:e.t1,referent:e.t2,date_start:e.t3,date_end:e.t4,logo:e.t6,note:e.t7,address:e.t8},s=new FormData,c)c[u]&&s.append(u,c[u]);(0,q.k)("new"==m.dialogType?V.zT:(0,V.gc)(h.id),s,function(e){f(!1),d(T.nG()),"new"==m.dialogType?d(T.mW()):(E[h.index]=A(A({},E[h.index]),e),d(T.QW(E)))},function(e){f(!1),y.current.updateInputsWithError({name:e.name[0],description:e.description[0],date_start:e.date_start[0],address:e.address[0]})},"new"==m.dialogType?q.Y.POST:q.Y.PUT,(0,I.XW)());case 21:case"end":return e.stop()}var t,n},e)}));return function(e){return t.apply(this,arguments)}}(),M.createElement($,{dividers:!0},M.createElement(R(),{onValidSubmit:l,onValid:function(){r(!0)},onInvalid:function(){r(!1)},ref:y,className:"flex flex-col justify-center md:overflow-hidden"},M.createElement(N.Z,{container:!0,spacing:3},M.createElement(N.Z,{item:!0,xs:12},M.createElement(L,{setFile:o,file:v,remove:function(){return o(null)}})),M.createElement(N.Z,{item:!0,xs:12,md:6},M.createElement(x.Op,{className:"mb-12 w-full",type:"text",name:"name",label:e("PROJECT_NAME"),value:h.name,validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0,variant:"outlined"})),M.createElement(N.Z,{item:!0,xs:12,md:6},M.createElement(x.Op,{variant:"outlined",className:"mb-12 w-full",type:"text",name:"address",label:e("PROJECT_ADDRESS"),value:h.address})),M.createElement(N.Z,{item:!0,xs:12,md:6},M.createElement(x.Op,{variant:"outlined",className:"mb-12 w-full",type:"text",name:"description",value:h.description,label:e("PROJECT_DESCRIPTION"),validations:{minLength:4},validationErrors:{minLength:"Min character length is 4"},required:!0})),M.createElement(N.Z,{item:!0,xs:12,md:6},M.createElement(w.default,P()({className:"custom-dropdown",onChange:function(e){s(e.splice(e.length-1))},isMulti:!0,value:g,placeholder:e("SEARCH_PROJECT_COORFINATORS"),textFieldProps:{onChange:function(e){e=e.target.value,(0,q.k)((0,V.vC)(String(e)),{},function(e){c(e)},function(e){c([])},q.Y.GET,(0,I.XW)())},variant:"outlined"},variant:"fixed",options:a.map(function(e){return{data:e,value:"".concat(e.first_name," ").concat(e.last_name),label:M.createElement("span",{className:"flex items-center"},M.createElement(C.Z,{className:"w-32 h-32",src:e.photo}),M.createElement("span",{className:"mx-8"},e.first_name," ",e.last_name))}}),noOptionsMessage:function(){return"Insert Name"}},"variant","outlined"))),M.createElement(N.Z,{item:!0,xs:12,md:6},M.createElement(_.e,{label:"Start Date",inputVariant:"outlined",format:"DD/MM/yyyy",value:b.startDate,onChange:function(e){u(A(A({},b),{},{startDate:e}))},className:"mt-8 mb-16 w-full",minDate:b.startDate})),M.createElement(N.Z,{item:!0,xs:12,md:6},M.createElement(_.e,{label:"End Date",inputVariant:"outlined",format:"DD/MM/yyyy",value:b.endDate,onChange:function(e){u(A(A({},b),{},{endDate:e}))},className:"mt-8 mb-16 w-full",minDate:b.startDate})),M.createElement(N.Z,{item:!0,xs:12},M.createElement(x.Op,{variant:"outlined",className:"mb-16 w-full",type:"textarea",name:"note",label:e("PROJECT_NOTES")})),M.createElement(N.Z,{item:!0,xs:12},M.createElement("div",{className:"inline-block"},M.createElement(j.Z,{type:"submit",variant:"contained",color:"primary",className:"justify-start d-inline-block mb-20","aria-label":"LOG IN",disabled:!n},"new"==m.dialogType?e("ADD"):e("SAVE"),t&&M.createElement(S.Z,{size:20,color:"secondary"})))))))}}}]);