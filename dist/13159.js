(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[13159],{13159:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(79545),s=r.n(n),t=r(68357),f=r.n(t),n=r(61432),d=r.n(n),t=r(28129),p=r.n(t),m=r(86926),b=r(82186),g=r(48258),h=r(96282),n=r(40962),R=r(78709),x=r(58913),v=r(3089),y=r(53369),L=r(47055),t=r(32986),E=(0,t.ZP)(function(){return Promise.all([r.e(86351),r.e(10991)]).then(r.bind(r,10991))}),k=(0,t.ZP)(function(){return Promise.all([r.e(62475),r.e(79337),r.e(40981)]).then(r.bind(r,40981))}),T=(0,n.Z)(function(e){return{messageRow:{"&.contact":{"& .bubble":{backgroundColor:"#fff",color:"#1E2129",boxShadow:"0 1px 3px #00000029",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:5,borderBottomRightRadius:5},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:15}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:15}}},"&.me":{paddingLeft:20,"& .avatar":{order:2,margin:"0 0 0 16px"},"& .bubble":{marginLeft:"auto",backgroundColor:"#4c54af1f",color:"#1E2129",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:5,borderBottomRightRadius:5,"& .time":{justifyContent:"flex-end",right:0,marginLeft:6}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:15}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:15}}},"&.contact + .me, &.me + .contact":{},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:15,paddingTop:13}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:15,paddingBottom:13,"& .time":{display:"flex"}}}}}});function o(e){var n=(0,x.I0)(),t=((0,x.v9)(function(e){return e.chatApp.contacts.selectedContactId}),(0,R.useRef)(null)),r=(0,R.useRef)(null),o=((0,x.v9)(function(e){return e.chatApp.user}),(0,R.useState)(null)),a=d()(o,2),i=a[0],l=a[1],o=(0,R.useState)(""),a=d()(o,2),c=a[0],u=a[1],o=T(e),a=(0,y.$)("chat").t;e=function(){var t=f()(p().mark(function e(t){var r,n,o,a;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.currentTarget.files,n=[],o=0;case 3:if(!(o<r.length)){e.next=26;break}if(a=null===(a=r[o].type)||void 0===a?void 0:a.split("/"),e.t0=[],e.t1=s()(n),"image"==a[0])return e.next=10,(0,v.y6)(r[o]);e.next=13;break;case 10:e.t2=e.sent,e.next=14;break;case 13:e.t2=r[o];case 14:e.t3=e.t2,e.t4=URL.createObjectURL(r[o]),e.t5=a[0],e.t6=".".concat(a[1]),e.t7=a.join("/"),e.t8={file:e.t3,imgPath:e.t4,fileType:e.t5,extension:e.t6,type:e.t7},e.t9=[e.t8],n=e.t0.concat.call(e.t0,e.t1,e.t9),l(n);case 23:o++,e.next=3;break;case 26:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();return R.createElement("div",{className:"fixed w-full chat-send-message-form"},R.createElement("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),t.current&&t.current.sendDirectToChat(),(c.length||i)&&n(L.sU(c,u,i,l))},className:"bottom-0 right-0 left-0 py-16 px-8 chat-form-bg"},R.createElement("div",{className:"multiple-images flex flex-row overflow-x-auto"},i&&i.map(function(e,r){return R.createElement(k,{item:e,card:{},onRemove:function(){return l(function(e){return e.filter(function(e,t){return t!=r})})},key:e.id})})),R.createElement(m.Z,{className:"flex items-center relative rounded-24",elevation:1},R.createElement(b.Z,{autoFocus:!1,id:"message-input",className:"flex-1",InputProps:{disableUnderline:!0,classes:{root:"flex flex-grow flex-shrink-0 mx-16 ltr:mr-10 rtl:ml-48 my-8",input:""},placeholder:a("TYPE_YOUR_MESSAGE")},InputLabelProps:{shrink:!1,className:o.bootstrapFormLabel},onChange:function(e){u(e.target.value)},value:c}),R.createElement(E,{afterRecordComplete:function(e){var t=null===(r=e.type)||void 0===r?void 0:r.split("/"),r=i||[],r=[{file:e,imgPath:URL.createObjectURL(e),fileType:t[0],extension:".".concat(t[1]),type:t.join("/")}].concat(s()(r));l(r)},ref:t,sendDirectToChat:function(e){var t=null===(r=e.type)||void 0===r?void 0:r.split("/"),r=i||[],r=[{file:e,imgPath:URL.createObjectURL(e),fileType:t[0],extension:".".concat(t[1]),type:t.join("/")}].concat(s()(r));n(L.sU(c,u,r,l))}}),R.createElement("input",{hidden:!0,multiple:!0,type:"file",ref:r,onChange:e}),R.createElement(g.Z,{className:"image mr-48",onClick:function(){return r.current.click()},"aria-label":"Add photo",color:"inherit"},R.createElement(h.Z,null,"photo")),R.createElement(g.Z,{className:"absolute ltr:right-0 rtl:left-0 top-0",type:"submit"},R.createElement(h.Z,{className:"text-24",color:"action"},"send")))))}}}]);