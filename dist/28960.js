(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[28960],{28960:function(e,t,o){"use strict";o.r(t);var n=o(56156),w=o.n(n),a=o(61432),D=o.n(a),P=o(65129),r=o(32986),S=o(63025),i=o(40962),T=o(58626),j=o(28344),C=o(78709),M=o(58913),l=o(6274),c=o(12303),z=o(94678),Y=o(25710),A=o(92466),F=o(48258),R=o(96282),I=o(41713),H=o(13786),L=o(65087),V=o(46602),B=o(86926),G=o(84677),U=o(88325),W=o(1737),$=o(89766),K=o(98e3),X=o(29796),q=o(82159),J=o(88572),Q=o(11208),ee=o(3089),te=o(66256),n=o(78279),oe=o.n(n),ne=o(55110),ae=o(53369),re=o(7074),ie=o(20074),a=o(97692),n=o(49821);function s(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)),n}function le(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach(function(e){w()(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}var ce=(0,r.ZP)(function(){return Promise.all([o.e(10930),o.e(74752),o.e(81756)]).then(o.bind(o,81756))}),se=(0,r.ZP)(function(){return Promise.all([o.e(10930),o.e(25872)]).then(o.bind(o,73430))}),de=(0,i.Z)(function(e){return{card:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut}}}),i="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",me=[{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80},{value:90},{value:100}],ue=(0,l.Z)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:i,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:i}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(c.Z);t.default=(0,a.Z)("contactsApp",n.Z)(function(r){var e,t,o,n=(0,T.Z)(),i=(0,M.I0)(),a=(0,M.v9)(function(e){var t,e=e.todoApp;return null==e||null===(t=e.todos)||void 0===t?void 0:t.todoDialog}),l=(0,M.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),c=r.todo.project,s=C.useState(!1),d=((y=D()(s,2))[0],y[1],C.useState(!1)),m=(E=D()(d,2))[0],u=E[1],p=C.useState(null),f=(h=D()(p,2))[0],v=h[1],s=(0,C.useState)([]),d=(y=D()(s,2))[0],g=y[1],E=(0,C.useState)(null),h=((p=D()(E,2))[0],p[1],(0,C.useState)(!1)),y=(s=D()(h,2))[0],b=s[1],E=(0,C.useState)(null),x=((p=D()(E,2))[0],p[1]),h=C.useRef(),s=C.useState({open:!1,anchorOriginVertical:"bottom",anchorOriginHorizontal:"left",transformOriginVertical:"top",transformOriginHorizontal:"left",positionTop:200,positionLeft:400,anchorReference:"anchorEl"}),Z=(E=D()(s,2))[0],N=E[1],_=(0,ee.Fc)(),p=function(){var e;return null==_||null===(e=_.extra)||void 0===e?void 0:e.profile.role},s=de(r),E=((0,ne.UO)(),(0,ae.$)("dashboard").t);function k(e){e.preventDefault(),e.stopPropagation()}(0,C.useEffect)(function(){g(r.todo.activities)},[r.todo.activities]),(0,C.useEffect)(function(){void 0!==a&&"activity"===a.type&&a.props.open&&a.data.id==r.todo.id&&v(a.data.id),void 0!==a&&"activity"===a.type&&0==a.props.open&&r.todo.id==f&&(O(),v(null))},[null==a||null===(e=a.props)||void 0===e?void 0:e.open]),(0,C.useEffect)(function(){void 0!==a&&1==a.props.openTimelineDialog&&a.data.task.id==r.todo.id&&v(a.data.task.id),void 0!==a&&0==a.props.openTimelineDialog&&r.todo.id==f&&(O(),v(null))},[null==a||null===(t=a.props)||void 0===t?void 0:t.openTimelineDialog]);var O=function(){(0,J.k)((0,Q.al)(r.todo.id),{},function(e){g(e)},function(e){return console.log(e)},J.Y.GET,(0,ee.XW)())};return C.createElement("div",{className:"mb-20"},C.createElement(z.Z,{elevation:1,className:"flex flex-col bordergrey overflow-inherit mb-6",onClick:function(e){i(re.ue()),e.preventDefault(),e.stopPropagation(),i(re.aP()),i(re.tp(r.todo)),r.setTodoId(r.todo.id),i(ie.gH(r.todo.project.id))}},C.createElement("div",{className:"flex flex-shrink-0 items-center justify-between px-24 h-64 rounded-t",style:{background:"#1b2330",color:n.palette.getContrastText(S.Z[500])}},null!==r.todo.assigned_company?C.createElement(C.Fragment,null,C.createElement("div",{className:"flex items-center"},C.createElement(Y.Z,{className:"mr-10",src:null===(n=r.todo.assigned_company)||void 0===n?void 0:n.logo}),C.createElement(A.Z,{className:"font-medium truncate ht-auto",color:"inherit"},null===(n=r.todo.assigned_company)||void 0===n?void 0:n.name)),C.createElement("div",{className:"flex justify-between"},C.createElement(F.Z,{"aria-haspopup":"true",onClick:function(e){e.preventDefault(),e.stopPropagation(),i(re.WL(r.todo)),i(re.aP()),r.setTodoId(r.todo.id),i(ie.gH(r.todo.project.id))},className:"text-white opacity-60"},C.createElement(R.Z,null,"attach_file")),C.createElement(se,{icon:C.createElement(C.Fragment,null,C.createElement(F.Z,{"aria-haspopup":"true",className:"text-white opacity-60"},C.createElement(R.Z,null,"more_vert"))),outsideClick:!0},C.createElement(I.Z,{onClick:function(e){e.preventDefault(),e.stopPropagation(),r.todo.assigned_company&&i(re.Am(r.todo))}},C.createElement(H.Z,null,C.createElement(R.Z,{className:"mr-10"},"add_circle_outline"),"SOTTOFASE"))))):"d"==p()||"o"==p()?C.createElement(C.Fragment,null,C.createElement("div",{ref:h,onClick:function(e){k(e),N(le(le({},Z),{},{open:!0}))}},C.createElement(F.Z,{className:"text-white"},C.createElement(R.Z,null,"business"),C.createElement(A.Z,{className:"ml-10"},"Assign to a company")),y&&C.createElement(L.Z,{size:15,color:"secondary"})),C.createElement(V.ZP,{open:Z.open,anchorEl:h.current,anchorReference:Z.anchorReference,anchorPosition:{top:Z.positionTop,left:Z.positionLeft},onClose:function(e){k(e),N(le(le({},Z),{},{open:!1}))},anchorOrigin:{vertical:Z.anchorOriginVertical,horizontal:Z.anchorOriginHorizontal},transformOrigin:{vertical:Z.transformOriginVertical,horizontal:Z.transformOriginHorizontal}},C.createElement(B.Z,{className:s.paper},C.createElement(G.Z,null,(null===(s=r.companies)||void 0===s?void 0:s.length)&&r.companies.map(function(t,e){var o,n;return C.createElement(I.Z,{onClick:function(e){return function(e,t){b(!0),k(e),x(null);var o=r.todo,n=o.id,a=o.name,e=o.note,o=o.project;i(re.bm(w()({name:a,description:e,id:n,company:[{data:t||{profile:{company:t||r.todo.assigned_company}}}],startDate:r.todo.date_start,endDate:r.todo.date_end},"description",r.todo.note),o.id,"new",function(){},!1,b))}(e,t)},className:"px-8",key:t.id},C.createElement(Y.Z,{className:"w-32 h-32",src:null===(o=t.profile)||void 0===o||null===(n=o.company)||void 0===n?void 0:n.logo}),C.createElement(U.Z,{className:"mx-8"},t.company))}))))):C.createElement(A.Z,{className:"font-medium truncate ht-auto",color:"inherit"},null===(o=r.todo.assigned_company)||void 0===o?void 0:o.name)),C.createElement(W.Z,{className:"flex flex-col flex-auto "},C.createElement("div",{className:"flex items-center flex-wrap justify-center my-12"},100==r.todo.progress?C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 mx-4 rounded bg-green-500 text-white")},C.createElement(R.Z,{className:"text-12"},"check_circle")," ",C.createElement("span",{className:"mx-4"},"Completata")):0<oe()().diff(oe()(r.todo.date_start))?0<oe()().diff(oe()(r.todo.date_end))?C.createElement(C.Fragment,null,C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 rounded font-size-12")},E("START")," ",oe()(r.todo.date_start).format("MMM Do YY")),C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 rounded bg-red-500 text-white font-size-12 ml-12")},E("ENDS")," ",oe()(r.todo.date_end).format("MMM Do YY"))):C.createElement(C.Fragment,null,C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 bg-green-500 rounded text-white font-size-12")},E("START")," ",oe()(r.todo.date_start).format("MMM Do YY")),C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 bg-custom-light-grey rounded font-size-12 ml-12")},E("ENDS")," ",oe()(r.todo.date_end).format("MMM Do YY"))):C.createElement(C.Fragment,null,C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 rounded font-size-12")},E("START")," ",oe()(r.todo.date_start).format("MMM Do YY")),C.createElement("div",{className:(0,j.Z)("flex items-center px-8 py-4 bg-custom-light-grey rounded font-size-12 ml-12")},E("ENDS")," ",oe()(r.todo.date_end).format("MMM Do YY")))),C.createElement(A.Z,{className:"text-center text-16 font-400 items-center justify-center ht-auto"},null==c?void 0:c.name),C.createElement(A.Z,{className:"text-center text-18 font-600 items-center justify-center ht-auto mt-8",color:"inherit"},r.todo.name),(null===(o=r.todo.assigned_company)||void 0===o?void 0:o.id)==l.id&&"w"!=p()&&C.createElement("div",{className:"flex items-center justify-center mt-8"},C.createElement("div",null))),C.createElement($.Z,null),C.createElement(K.Z,{className:"justify-center"},C.createElement("div",{className:"custom-progress-chart"},C.createElement("div",{className:"flex justify-end relative"},C.createElement(H.Z,{disabled:(null===(o=r.todo.assigned_company)||void 0===o?void 0:o.id)!=l.id||"w"==p()||"m"==p(),onClick:function(e){e.preventDefault(),e.stopPropagation(),(null===(e=r.todo.assigned_company)||void 0===e?void 0:e.id)==l.id&&u(function(e){return!e})},className:"justify-start px-32"},"progress ",r.todo.progress,"%"),m&&C.createElement("div",{className:"custom-ios-slider-dropdown page-dashboard zoom-125"},C.createElement("small",{className:"block mb-24"},E("SET_TASK_PROGRESS")),C.createElement("div",null,C.createElement(ue,{"aria-label":"ios slider",defaultValue:r.todo.progress,marks:me,onChangeCommitted:function(e,t){e.stopPropagation(),e.preventDefault(),i(re.bm({id:r.todo.id,name:r.todo.name,company:[{data:r.todo.assigned_company}],progress:t,startDate:r.todo.date_start,endDate:r.todo.date_end,description:r.todo.note},c.id,"new",function(){},!1,function(){u(function(e){return!e})}))},onClick:function(e){e.stopPropagation(),e.preventDefault()},valueLabelDisplay:"on"})))))),C.createElement(X.Z,{className:"w-full",variant:"determinate",value:r.todo.progress,color:"secondary"})),(null===(E=r.todo.assigned_company)||void 0===E?void 0:E.id)==l.id&&C.createElement(q.Z,{className:"p-0"},C.createElement(te.Z,{enter:{animation:"transition.slideUpBigIn"}},d&&!!d.length&&P.Z.orderBy(d,["id"],"asc").map(function(e){return C.createElement(ce,{setTodoId:r.setTodoId,getDetailOfTask:O,task:r.todo,todo:e,key:e.id})}))))})}}]);