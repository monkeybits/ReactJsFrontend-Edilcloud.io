(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[41934],{92505:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var t=n(56156),a=n.n(t),t=n(20305),o=n.n(t),t=n(51265),r=n.n(t),i=n(78709),t=n(40962),l=n(389),c=n(92466),s=n(82186),p=n(41713),u=n(23610),d=n(86926),f=n(28344),m=n(67485),g=n(94435);function v(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}var h=(0,t.Z)(function(e){return{root:{"& .fuse-chip-select__input":{color:e.palette.text.primary},"&.standard":{"& $placeholder":{},"& $valueContainer":{paddingTop:4}},"&.filled":{"& $placeholder":{left:12},"& $valueContainer":{paddingTop:24,paddingLeft:12},"& $chip":{border:"1px solid rgba(0, 0, 0, 0.12)"}},"&.outlined":{"& $placeholder":{left:12},"& $valueContainer":{paddingLeft:12,paddingTop:12}}},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",paddingBottom:4,paddingTop:12,minHeight:40},chip:{margin:"4px 4px 4px 0"},chipFocused:{backgroundColor:(0,l.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing(),"px ").concat(e.spacing(2),"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:0,fontSize:16,margin:0},paper:{position:"absolute",zIndex:2,marginTop:e.spacing(),left:0,right:0},divider:{height:e.spacing(2)}}});function b(e){var t=e.inputRef,e=o()(e,["inputRef"]);return i.createElement("div",r()({ref:t},e))}var x={Control:function(e){var t=h();return i.createElement(s.Z,r()({fullWidth:!0,className:(0,f.Z)(t.root,e.selectProps.textFieldProps.variant),required:e.selectProps.required,error:e.selectProps.error,InputProps:{inputComponent:b,inputProps:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({className:t.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){var t=h();return i.createElement(d.Z,r()({square:!0,className:t.paper},e.innerProps),e.children)},MultiValue:function(t){var e=h();return i.createElement(u.Z,{tabIndex:-1,label:t.children,className:(0,f.Z)(e.chip,a()({},e.chipFocused,t.isFocused),t.data.class),onDelete:function(e){t.removeProps.onClick(),t.removeProps.onMouseDown(e)}})},NoOptionsMessage:function(e){var t=h();return i.createElement(c.Z,r()({color:"textSecondary",className:t.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return i.createElement(p.Z,r()({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?600:400}},e.innerProps),e.children)},Placeholder:function(e){var t=h();return i.createElement(c.Z,r()({color:"textSecondary",className:t.placeholder},e.innerProps),e.children)},SingleValue:function(e){var t=h();return i.createElement(c.Z,r()({className:t.singleValue},e.innerProps),e.children)},ValueContainer:function(e){var t=h();return i.createElement("div",{className:t.valueContainer},e.children)}};function P(t){function e(e){null===e&&(e=[]),t.onChange&&t.onChange(e)}return"fixed"===t.variant?i.createElement(m.ZP,r()({classNamePrefix:"fuse-chip-select"},t,{components:x,onChange:e})):i.createElement(g.ZP,r()({classNamePrefix:"fuse-chip-select"},t,{components:x,onChange:e}))}var y=i.memo(P)},41934:function(e,t,n){"use strict";n.r(t);var a=n(56156),o=n(79545),P=n.n(o),r=n(61432),y=n.n(r),i=n(51265),l=(n(20305),n(16526)),a=n.n(l),o=n(32986),C=(n(92505),n(35923)),r=(n(65129),n(1644),n(92466),n(40962)),i=n(6274),c=n(12303),w=n(96282),E=n(48258),D=n(80896),l=n(78279),k=n.n(l),O=n(78709),Z=n(58913),N=n(55110),_=n(7074),S=n(3089),j=n(53369),F=n(35965);(0,o.ZP)(function(){return Promise.all([n.e(66066),n.e(79718)]).then(n.bind(n,69796))}),(0,o.ZP)(function(){return Promise.all([n.e(38192),n.e(52624)]).then(n.bind(n,52624))});var T=(0,o.ZP)(function(){return Promise.all([n.e(62475),n.e(10930),n.e(79337),n.e(4330),n.e(84982)]).then(n.bind(n,4330))});a().node,a().any.isRequired,a().any.isRequired;(0,r.Z)(function(e){return{root:{flexGrow:1,minHeight:"100%",backgroundColor:e.palette.background.paper}}});r="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",(0,i.Z)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:r,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:r}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(c.Z);t.default=function(e){function t(e){return"".concat(e.first_name," ").concat(e.last_name)}(0,j.$)("dashboard").t;var n=(0,Z.I0)(),a=((0,Z.v9)(function(e){return e.todoApp.todos.upload}),(0,Z.v9)(function(e){return e.todoApp.todos.taskContentDialog}),(0,Z.v9)(function(e){return null===(e=e.todoApp.todos.taskContentDialog)||void 0===e?void 0:e.data})),o=(0,Z.v9)(function(e){return e.todoAppNote.todos.openDrawingContent}),r=(0,Z.v9)(function(e){return e.contactsApp.contacts.approvedCompanies}),i=(0,O.useState)([]),l=((d=y()(i,2))[0],d[1]),i=(0,O.useState)([]),i=((d=y()(i,2))[0],d[1],(0,O.useState)([])),c=((d=y()(i,2))[0],d[1]),i=(0,O.useState)(0),s=((d=y()(i,2))[0],d[1]),i=(0,O.useState)(!1),p=((d=y()(i,2))[0],d[1],(0,N.UO)()),u=(0,Z.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),i=null==a?void 0:a.project,d=(0,O.useState)({startDate:new Date,endDate:void 0}),f=((d=y()(d,2))[0],d[1]),d=O.useState(0),m=((d=y()(d,2))[0],d[1]);function g(){var e;return null==h||null===(e=h.extra)||void 0===e?void 0:e.profile.role}(0,O.useEffect)(function(){var e;console.log("openDrawingContent?????????????????????????",o),o&&(m(1),"wrapped-tab-".concat(e=1),"wrapped-tabpanel-".concat(e))},[o]),(0,O.useEffect)(function(){var e;r&&r.length&&a&&(e=P()(r).filter(function(e){var t,n;return(null===(e=e.profile)||void 0===e||null===(t=e.company)||void 0===t?void 0:t.id)==(null==a||null===(n=a.assigned_company)||void 0===n?void 0:n.id)}).map(function(e){var t,n;return{data:e,value:null===(t=e.profile)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.name,label:O.createElement("span",{className:"flex items-center"},O.createElement(w.Z,{className:"list-item-icon mx-6 text-20",style:{color:null===(n=e.profile.company)||void 0===n?void 0:n.color_project},color:"action"},"label")," ",e.profile.company.name)}}),c(e)),a&&(console.log({taskContentData:a,date_start:a.date_start}),a.isGantt&&1==a.parent?(f({startDate:new Date(a.datetime_start),endDate:new Date(a.datetime_end)}),s(a.progress),l(a.workers.map(function(e){return{data:e,value:t(e),label:O.createElement("span",{className:"flex items-center"},t(e))}})),x()):(f({startDate:new Date(a.date_start),endDate:new Date(a.date_end)}),s(a.progress),c([{data:a.assigned_company}])))},[r,a]),(0,O.useEffect)(function(){m(0)},[a]);var v,h=(0,S.Fc)(),b=(d=(0,C.cI)({name:1==(null==a?void 0:a.parent)?null==a?void 0:a.title:null==a?void 0:a.name,description:1==(null==a?void 0:a.parent)?null==a?void 0:a.description:null==a?void 0:a.note})).form;d.handleChange,d.setForm,d.setInForm,b&&b.due&&k()(b.due).format(k().HTML5_FMT.DATE),console.log({getIsDisabled:(null==a||null===(v=a.assigned_company)||void 0===v?void 0:v.id)!=u.id||"w"==g()||"m"==g(),projectDetail:i,companyDetail:u.id,getRole:g()});var x=function(e){console.log(p.id,a,e)};return O.createElement("div",{className:"w-full custom-task-content mt-20"},O.createElement("div",{className:"absolute right-m-12"},O.createElement(E.Z,{onClick:function(e){return n(_.ue())},edge:"start",color:"inherit","aria-label":"close",className:"close-icon"},O.createElement(F.Z,null))),O.createElement(D.Z,{id:"dialog-content",className:"p-0"},O.createElement("div",{className:"sm:mx-12"},O.createElement(T,{taskId:null==a?void 0:a.id,attachments:null==a?void 0:a.media_set}))))}}}]);