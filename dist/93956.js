(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[93956],{35923:function(e,t,n){"use strict";n.d(t,{Nr:function(){return r},KW:function(){return p},cI:function(){return a},KS:function(){return c},rf:function(){return i}});var t=n(56156),u=n.n(t),t=n(61432),o=n.n(t),s=n(65129),m=n(78709);function f(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}var a=function(e,t){var n=(0,m.useState)(e),a=(l=o()(n,2))[0],r=l[1],c=(0,m.useCallback)(function(t){t.persist(),r(function(e){return s.Z.setIn(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){u()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e),t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value)})},[]),i=(0,m.useCallback)(function(){s.Z.isEqual(e,a)||r(e)},[a,e]),n=(0,m.useCallback)(function(t,n){r(function(e){return s.Z.setIn(e,t,n)})},[]),l=(0,m.useCallback)(function(e){e&&e.preventDefault(),t&&t()},[t]);return{form:a,handleChange:c,handleSubmit:l,resetForm:i,setForm:r,setInForm:n}};var r=function(e,t,n){return(0,m.useRef)(s.Z.debounce(e,t,n)).current};var c=function(t,n){var a=(0,m.useRef)(t);(0,m.useEffect)(function(){a.current=t},[t]),(0,m.useEffect)(function(){var e;return n&&t&&"function"==typeof t&&(e=setTimeout(a.current,n||0)),function(){e&&clearTimeout(e)}},[t,n])};var i=function(e,t){var n=(0,m.useRef)(!0);(0,m.useEffect)(n.current?function(){n.current=!1}:e,t)},t=(n(45559),n(89962)),l=n.n(t);function d(e){var t=m.useRef();return l()(e,t.current)||(t.current=e),t.current}var p=function(e,t){m.useEffect(e,d(t))}},93956:function(e,t,n){"use strict";n.r(t);var a=n(61432),m=n.n(a),f=n(92466),d=n(82186),p=n(13786),b=n(65087),v=n(35923),h=n(78709),g=n(58913),y=n(53369),E=n(11208),_=n(10846),w=n(43812);t.default=function(e){(0,g.I0)();var t=(0,h.useState)(!0),n=(i=m()(t,2))[0],a=i[1],r=(0,h.useState)(!1),t=(o=m()(r,2))[0],c=o[1],i=((0,g.v9)(function(e){return e.fuse.settings.mainTheme}),(0,y.$)("setting_app").t),l=(0,g.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),u=(r=(0,v.cI)({name:"",tax_code:"",vat_number:"",address:"",province:"",cap:"",country:"",pec:"",billing_email:"",sdi:""})).form,o=r.handleChange,s=(r.resetForm,r.setForm);return(0,h.useEffect)(function(){""!==u.name&&""!==u.tax_code&&""!==u.vat_number&&""!==u.address&&""!==u.province&&""!==u.cap&&""!==u.country&&""!==u.pec&&""!==u.billing_email?a(!1):a(!0)},[u]),(0,h.useEffect)(function(){l&&s({name:l.name,tax_code:l.tax_code,vat_number:l.vat_number,address:l.address,province:l.province,cap:l.cap,country:l.country,pec:l.pec,billing_email:l.billing_email,sdi:l.sdi})},[l]),h.createElement("form",{name:"billingForm",className:"flex flex-col justify-center w-md"},h.createElement(f.Z,{className:"text-black text-24 mb-16"},"Billing"),h.createElement(d.Z,{className:"my-8 bg-white",label:i("BUSINESS_NAME"),autoFocus:!0,type:"text",name:"name",value:u.name,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("COMPANY_TAX_CODE"),autoFocus:!0,type:"text",name:"tax_code",value:u.tax_code,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("COMPANY_VAT_NUMBER"),type:"text",name:"vat_number",value:u.vat_number,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("ADDRESS"),type:"text",name:"address",value:u.address,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("PROVINCE"),type:"text",name:"province",value:u.province,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("POSTAL_CODE"),type:"text",name:"cap",value:u.cap,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("NATION"),type:"text",name:"country",value:u.country,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("PEC_EMAIL_ADDRESS"),type:"text",name:"pec",value:u.pec,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("BILLING_EMAIL"),type:"text",name:"billing_email",value:u.billing_email,onChange:o,variant:"outlined",required:!0,fullWidth:!0}),h.createElement(d.Z,{className:"my-8 bg-white",label:i("SDI_CODE"),type:"text",name:"sdi",value:u.sdi,onChange:o,variant:"outlined",fullWidth:!0}),h.createElement("div",{className:"inline-block"},h.createElement(p.Z,{onClick:function(){c(!0);var e,t,n=new FormData,a=localStorage.getItem("jwt_access_token");for(e in l)!l[e]||e in u||"logo"===e||n.append(e,l[e]);for(t in u)u[t]&&n.append(t,u[t]);_.Z.put((0,E.pd)(l.id),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(a)}}).then(function(e){e&&(c(!1),w.Am.success("Successfully saved!"),document.referrer.includes("apps/companies")&&(window.location="https://back-test.edilcloud.io/api/frontend/payments/customer-portal?customer_id=".concat(null==l?void 0:l.customer)))}).catch(function(e){c(!1),w.Am.warn("Something went wrong.")})},variant:"contained",color:"primary",size:"small","aria-label":"save",className:"justify-center d-inline-block mt-10",disabled:n},i("SAVE"),t&&h.createElement(b.Z,{size:15,color:"white",className:"ml-6"}))))}}}]);