(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[21002],{5344:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var d=n(97439),u=n(84818),m=n(78709),p=(n(16526),n(30367)),f=n(30732),o=n(23763),a=(0,o.Z)(m.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),t=(0,o.Z)(m.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),i=n(70621),o=(0,o.Z)(m.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),v=n(54059),n=n(6274),h=m.createElement(t,null),b=m.createElement(a,null),k=m.createElement(o,null),o=m.forwardRef(function(e,t){var n=e.checkedIcon,o=void 0===n?h:n,a=e.classes,i=e.color,r=void 0===i?"secondary":i,c=e.icon,l=void 0===c?b:c,s=e.indeterminate,n=void 0!==s&&s,i=e.indeterminateIcon,c=void 0===i?k:i,s=e.inputProps,i=e.size,i=void 0===i?"medium":i,e=(0,u.Z)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),l=n?c:l,o=n?c:o;return m.createElement(f.Z,(0,d.Z)({type:"checkbox",classes:{root:(0,p.Z)(a.root,a["color".concat((0,v.Z)(r))],n&&a.indeterminate),checked:a.checked,disabled:a.disabled},color:r,inputProps:(0,d.Z)({"data-indeterminate":n},s),icon:m.cloneElement(l,{fontSize:void 0===l.props.fontSize&&"small"===i?i:l.props.fontSize}),checkedIcon:m.cloneElement(o,{fontSize:void 0===o.props.fontSize&&"small"===i?i:o.props.fontSize}),ref:t},e))}),r=(0,n.Z)(function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,i.U1)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,i.U1)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}},{name:"MuiCheckbox"})(o)},556:function(e,t,n){"use strict";var u=n(97439),m=n(84818),p=n(78709),o=n(16526),f=n(30367),v=n(28841),o=n(6274),h=n(92466),b=n(54059),n=p.forwardRef(function(t,e){t.checked;var n=t.classes,o=t.className,a=t.control,i=t.disabled,r=(t.inputRef,t.label),c=t.labelPlacement,l=void 0===c?"end":c,s=(t.name,t.onChange,t.value,(0,m.Z)(t,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),c=(0,v.Z)(),i=i,d={disabled:i=void 0===(i=void 0===i&&void 0!==a.props.disabled?a.props.disabled:i)&&c?c.disabled:i};return["checked","name","onChange","value","inputRef"].forEach(function(e){void 0===a.props[e]&&void 0!==t[e]&&(d[e]=t[e])}),p.createElement("label",(0,u.Z)({className:(0,f.Z)(n.root,o,"end"!==l&&n["labelPlacement".concat((0,b.Z)(l))],i&&n.disabled),ref:e},s),p.cloneElement(a,d),p.createElement(h.Z,{component:"span",className:(0,f.Z)(n.label,i&&n.disabled)},r))});t.Z=(0,o.Z)(function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}},{name:"MuiFormControlLabel"})(n)},30732:function(e,t,n){"use strict";var C=n(97439),P=n(35313),N=n(84818),O=n(78709),o=n(16526),S=n(30367),I=n(41931),L=n(28841),o=n(6274),j=n(48258),n=O.forwardRef(function(e,t){var n=e.autoFocus,o=e.checked,a=e.checkedIcon,i=e.classes,r=e.className,c=e.defaultChecked,l=e.disabled,s=e.icon,d=e.id,u=e.inputProps,m=e.inputRef,p=e.name,f=e.onBlur,v=e.onChange,h=e.onFocus,b=e.readOnly,k=e.required,g=e.tabIndex,y=e.type,_=e.value,Z=(0,N.Z)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),E=(0,I.Z)({controlled:o,default:Boolean(c),name:"SwitchBase",state:"checked"}),e=(0,P.Z)(E,2),E=e[0],x=e[1],w=(0,L.Z)(),e=l;w&&void 0===e&&(e=w.disabled);l="checkbox"===y||"radio"===y;return O.createElement(j.Z,(0,C.Z)({component:"span",className:(0,S.Z)(i.root,r,E&&i.checked,e&&i.disabled),disabled:e,tabIndex:null,role:void 0,onFocus:function(e){h&&h(e),w&&w.onFocus&&w.onFocus(e)},onBlur:function(e){f&&f(e),w&&w.onBlur&&w.onBlur(e)},ref:t},Z),O.createElement("input",(0,C.Z)({autoFocus:n,checked:o,defaultChecked:c,className:i.input,disabled:e,id:l&&d,name:p,onChange:function(e){var t=e.target.checked;x(t),v&&v(e,t)},readOnly:b,ref:m,required:k,tabIndex:g,type:y,value:_},u)),E?a:s)});t.Z=(0,o.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(n)},21002:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var t=n(56156),o=n.n(t),t=n(79545),O=n.n(t),t=n(61432),S=n.n(t),I=n(65129),L=n(5344),j=n(96282),D=n(96569),t=n(40962),F=n(92466),R=n(28344),z=n(78709),B=n(58913),A=n(86926),T=n(25710),H=n(88325),M=n(88572),$=n(11208),Y=n(3089),U=n(13786),V=n(55110),W=n(41713),X=n(20074),q=n(556),G=n(63982),J=n(43812),K=n(10930),Q=n(53369),a=(0,t.Z)(function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}}}});function ee(e){var t=e.workers,e=a();return z.createElement("div",{className:e.root},t&&t.map(function(e){var t;return z.createElement(T.Z,{classes:{root:"h-28 w-28 my-3 mt-10 mx-4 text-18"},alt:"Remy Sharp",src:e.profile.photo},!(null===(t=e.profile.first_name)||void 0===t||!t.length)&&O()(e.profile.first_name)[0])}))}var te=n(90);n(1939),n(96133);function i(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}I.Z.enhance=function(e,t){return I.Z.map(e,function(e){return I.Z.extend({},e,t)})};var oe=(0,t.Z)(function(e){return{todoItem:{"&.completed":{background:"rgba(0,0,0,0.03)","& .todo-title, & .todo-notes":{textDecoration:"line-through"}}},nested:{paddingLeft:e.spacing(4)},paper:{marginRight:e.spacing(2)}}});var r=function(o){var e,t,n=(0,Q.$)("todo_project").t,i=(0,B.I0)(),a=((0,B.v9)(function(e){return e.todoAppNote.labels}),z.useState(!1)),r=((w=S()(a,2))[0],w[1],z.useState("to-do"!=o.todo.status)),c=(d=S()(r,2))[0],l=d[1],a=(0,z.useState)([]),s=((w=S()(a,2))[0],w[1],(0,V.UO)()),r=(0,B.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),d=oe(o),a=(0,z.useState)(null),a=((w=S()(a,2))[0],w[1],(0,z.useState)([])),u=(w=S()(a,2))[0],m=w[1],a=(0,z.useState)([]),p=(w=S()(a,2))[0],f=w[1],a=(0,z.useState)([]),v=(w=S()(a,2))[0],h=w[1],a=(0,z.useState)(!1),b=((w=S()(a,2))[0],w[1]),a=z.useState(!1),k=(w=S()(a,2))[0],g=w[1],y=(0,B.v9)(function(e){return e.notificationPanel}),_=(0,z.useRef)(null),a=(0,z.useState)(!1),a=(w=S()(a,2))[0],Z=w[1],E=(null===(w=y.notificationData)||void 0===w||null===(e=w.notification)||void 0===e?void 0:e.object_id)==o.todo.id,x=(0,Y.Fc)(),w=function(){var e;return null==x||null===(e=x.extra)||void 0===e?void 0:e.profile.role};function C(e,t){var n=[],t=t?u:p;Array.isArray(e)&&(n=[].concat(O()(e),O()(t)).filter(function(e){return e.is_exists})),console.log({ids:n}),n={id:o.todo.id,title:o.todo.title,description:o.todo.description,datetime_start:o.todo.datetime_start,datetime_end:o.todo.datetime_end,workers:null!==n&&void 0!==n&&n.length?n.map(function(e){return e.profile.id}):null},(0,M.k)((0,$.E1)(o.todo.id),n,function(e){},function(e){console.log(e)},M.Y.PUT,(0,Y.XW)())}(0,z.useEffect)(function(){E?setTimeout(function(){g(!0)},300):g(!0)},[o.todo,E]),(0,z.useEffect)(function(){var e;null!==(e=o.todo)&&void 0!==e&&e.status&&"completed"==o.todo.status?l(!0):l(!1)},[null===(e=o.todo)||void 0===e?void 0:e.status]),(0,z.useEffect)(function(){var e=null===(e=y.notificationData)||void 0===e?void 0:e.notification;y.viewing&&"activity"==(null==e?void 0:e.content_type)&&e.body.hasOwnProperty("task_id")&&k&&_.current&&(i(G.sM()),_.current.scrollIntoView({block:"center"}),_.current.classList.add("bg-yellow-200"),setTimeout(function(){_.current&&_.current.classList.remove("bg-yellow-200")},5e3))},[y.viewing,_,k]),(0,z.useEffect)(function(){var e;Array.isArray(o.todo.workers_in_activity)&&(e=I.Z.enhance(o.todo.workers_in_activity,{is_exists:!0}),m(e))},[o.todo.workers_in_activity]),(0,z.useEffect)(function(){var e;Array.isArray(o.todo.workers_in_activity)&&(e=I.Z.enhance(o.todo.can_assign_in_activity,{is_exists:!1}),f(e))},[o.todo.can_assign_in_activity]);var P=function(e){e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation())},N=function(){(0,M.k)($.JF,{},function(e){e=e.results.filter(function(e){return"Worker"==e.role});console.log(e),h(e)},function(e){console.log(e)},M.Y.GET,(0,Y.XW)())};return z.createElement(z.Fragment,null,z.createElement(D.Z,{ref:(null===(e=y.notificationData)||void 0===e||null===(t=e.notification)||void 0===t?void 0:t.object_id)==o.todo.id?_:null,id:o.todo.id,className:(0,R.Z)(d.todoItem,{completed:c},"border-solid border-b-1 mt-10 custom-activity bg-white px-0 sm:px-8 touch-ripple-effect-remove"),checked:c,style:{borderLeft:"4px solid",borderLeftColor:null===(t=o.task.assigned_company)||void 0===t?void 0:t.color_project},onClick:function(e){e.preventDefault(),i(te.X_()),i(te.F8({todo:o.todo,task:o.task})),o.setTodoId(o.task.id)},dense:!0,button:!0},z.createElement("div",{className:"flex-col relative overflow-hidden"},z.createElement("div",null,z.createElement("div",{className:"flex items-center"},z.createElement(L.Z,{disabled:(null===(t=o.task.assigned_company)||void 0===t?void 0:t.id)!=r.id||"w"==w()||"m"==w(),tabIndex:-1,disableRipple:!0,onClick:function(e){return e.stopPropagation()},checked:c,onChange:function(e){var t;e.stopPropagation(),t=e.target.checked,e={title:o.todo.title,description:o.todo.description,datetime_start:o.todo.datetime_start,datetime_end:o.todo.datetime_end,workers:null!==(e=o.todo.workers)&&void 0!==e&&e.length?o.todo.workers.map(function(e){return e.id}):void 0,status:t?"completed":"to-do"},(0,M.k)((0,$.E1)(o.todo.id),e,function(e){},function(e){l(!t),console.log(e)},M.Y.PUT,(0,Y.XW)()),l(t)}}),z.createElement(F.Z,{variant:"subtitle1",className:"todo-title",color:c?"textSecondary":"inherit"},o.todo.title),z.createElement("div",{className:"ml-auto"}))),z.createElement("div",{className:"flex items-center"},(null===(c=o.task.assigned_company)||void 0===c?void 0:c.id)==r.id&&("d"==w()||"o"==w())&&z.createElement(K.ZP,{theme:"light",className:"custom-tippy",allowHTML:!0,placement:"bottom-start",content:z.createElement(A.Z,{className:d.paper},z.createElement(z.Fragment,null,!(null==u||!u.length)&&z.createElement(q.Z,{className:"px-8 pt-10 m-0 flex cusotm-checkbox-label",control:z.createElement(L.Z,{checked:u.every(function(e){return e.is_exists})&&p.every(function(e){return e.is_exists}),onClick:function(e){var t;e.stopPropagation(),b(e.target.checked),e.target.checked&&(t=I.Z.enhance(u,{is_exists:!0}),e=I.Z.enhance(p,{is_exists:!0}),m(t),f(e),C(e,!0))},name:"checkedB"}),label:n("SELECT_ALL")}),null!=u&&u.length||null!=p&&p.length?z.createElement(z.Fragment,null,u.map(function(e,n){return z.createElement(W.Z,{onClick:P,className:"px-8",key:e.id},z.createElement(L.Z,{onClick:function(e){return e.stopPropagation()},name:e.first_name,checked:!!e.is_exists,onChange:function(e){var t=O()(u);t[n]=ne(ne({},t[n]),{},{is_exists:e.target.checked}),[].concat(O()(t),O()(p)).some(function(e){return e.is_exists})?(m(t),C(t,!1)):J.Am.error("Can not remove everyone from activity")}}),z.createElement(T.Z,{className:"w-32 h-32",src:e.profile.photo}),z.createElement(H.Z,{className:"mx-8"},e.profile.first_name," ",e.profile.last_name))}),p.map(function(e,n){return z.createElement(W.Z,{onClick:P,className:"px-8",key:e.id},z.createElement(L.Z,{onClick:function(e){return e.stopPropagation()},name:e.first_name,checked:!!e.is_exists,onChange:function(e){var t=O()(p);t[n]=ne(ne({},t[n]),{},{is_exists:e.target.checked}),[].concat(O()(t),O()(u)).some(function(e){return e.is_exists})?(f(t),C(t,!0)):J.Am.error("Can not remove everyone from activity")}}),z.createElement(T.Z,{className:"w-32 h-32",src:e.profile.photo}),z.createElement(H.Z,{className:"mx-8"},e.profile.first_name," ",e.profile.last_name))})):z.createElement(z.Fragment,null,z.createElement(F.Z,{variant:"subtitle1",className:"todo-title p-8"},v.length?"You have no workers in your project, add from below list":"You have no workers in your company"),v.map(function(e,t){return e.is_exists?null:z.createElement(W.Z,{onClick:P,className:"px-8",key:e.id},z.createElement(T.Z,{className:"w-32 h-32",src:e.profile.photo}),z.createElement(H.Z,{className:"mx-8"},e.first_name," ",e.last_name),z.createElement(U.Z,{onClick:function(e){return function(e,t){var n,o;e.preventDefault();var a=O()(v),e=a[t];a[t]=ne(ne({},e),{},{is_exists:!0}),h(a),i(X.YR(s.id,{profile:e.id,role:null===(e=e.role)||void 0===e||null===(n=e.split(""))||void 0===n||null===(o=n[0])||void 0===o?void 0:o.toLocaleLowerCase()},!1))}(e,t)}},"Add"))})))),visible:a},z.createElement("div",{className:"custom-member-menu flex items-center",onClick:a?function(e){P(e),Z(!1),u.length||o.getDetailOfTask()}:function(e){P(e),Z(!0),u.length||N()}},z.createElement(j.Z,{className:"bg-custom-primary text-white"},"person_add"))),z.createElement(ee,{workers:[].concat(O()(u.filter(function(e){return e.is_exists})),O()(p.filter(function(e){return e.is_exists})))})))),o.isPdf?o.postlist:null)}}}]);