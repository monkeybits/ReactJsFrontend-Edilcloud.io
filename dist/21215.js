(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[21215],{21215:function(e,n,t){"use strict";t.r(n);var o=t(56156),i=t.n(o),l=t(61432),w=t.n(l),r=t(51265),a=t.n(r),c=t(20305),d=t.n(c),v=t(78709),o=t(6274),s=t(92466),u=t(48258),m=t(99904),p=t(70964),l=t(80896),r=t(19462),f=t(35965),g=t(58913),y=t(13786),b=t(81566),h=t(62475),E=t(79337),O=t(11208),P=t(88572),c=t(13199),D=t.n(c),M=t(3089),Z=t(53369),F=t(25957),c=t(32986);function x(n,e){var t,o=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),o.push.apply(o,t)),o}function C(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?x(Object(t),!0).forEach(function(e){i()(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var j=(0,c.ZP)(function(){return Promise.resolve().then(t.bind(t,7646))}),_=(0,c.ZP)(function(){return Promise.all([t.e(7311),t.e(21066)]).then(t.bind(t,21066))}),k=(0,o.Z)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var n=e.children,t=e.classes,o=e.onClose,e=d()(e,["children","classes","onClose"]);return v.createElement(p.Z,a()({disableTypography:!0,className:t.root},e),v.createElement(s.Z,{variant:"h6"},n),o?v.createElement(u.Z,{"aria-label":"close",className:t.closeButton,onClick:o},v.createElement(f.Z,null)):null)}),A=(0,o.Z)(function(e){return{root:{padding:e.spacing(2)}}})(l.Z),I=(0,o.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)}}})(r.Z);n.default=function(e){var n=e.isOpenViewFile,t=e.closeViewFile,o=e.setProgress,i=(0,Z.$)("filemanager").t,l=(0,g.I0)(),r=(0,v.useState)(null),a=(e=w()(r,2))[0],c=e[1],r=(0,g.v9)(function(e){return null===(e=e.fileManagerApp.files)||void 0===e?void 0:e.allFiles}),d=(e=(0,g.v9)(function(e){return e.fileManagerApp.files.folderPath}))[e.length-1],s=(0,g.v9)(function(e){var n=e.fileManagerApp;return""==d?null===(e=n.files)||void 0===e?void 0:e.rootFiles:null===(n=n.files)||void 0===n?void 0:n.files}),u=(0,g.v9)(function(e){return e.fileManagerApp.selectedItemId}),e=(0,v.useState)(null),p=(e=w()(e,2))[0],f=e[1];return(0,v.useEffect)(function(){var e=s[a];f(e)},[a]),(0,v.useEffect)(function(){var n,e;Array.isArray(s)&&u&&(n=u,0<=(e=s.findIndex(function(e){return e.mainId==n.mainId&&e.type==n.type}))&&(c(e),e=s[e],f(e)))},[u,s,r]),v.createElement(m.Z,{onClose:t,"aria-labelledby":"customized-dialog-title",open:n,fullWidth:"true"},v.createElement(k,{id:"customized-dialog-title",onClose:t},null==p?void 0:p.title),v.createElement(A,{dividers:!0},"photo"==(null==p?void 0:p.type)?v.createElement(b.LazyLoadImage,{delayTime:300,src:null==p?void 0:p.photo,alt:null==p?void 0:p.title}):"video"==(null==p?void 0:p.type)?v.createElement(_,{width:"100%",height:"100%",video_url:null==p?void 0:p.video}):"pdf"==(null==p?void 0:p.extension)?v.createElement(j,{height:700,file:p.document}):v.createElement(h.G,{icon:"document"==(null==p?void 0:p.type)?"pdf"==(null==p?void 0:p.extension)?E.gS:"docx"==(null==p?void 0:p.extension)?E.Mf:"xlsx"==(null==p?void 0:p.extension)?E.ic:"mp3"==(null==p?void 0:p.extension)?E.FM:E.gM:E.gM,style:C(C({},"pdf"==(t=null==p?void 0:p.extension)||"video"==t?{color:"red"}:"mp3"==t?{color:"brown"}:"docx"==t?{color:"blue"}:"xlsx"==t?{color:"green"}:{}),{},{fontSize:"2.4rem"})})),v.createElement(I,{className:"p-8"},v.createElement(y.Z,{variant:"contained",color:"primary",onClick:function(){var e;p&&(o(0),l(F.MJ(!0)),e=("photo"==p.type?(0,O.K$):"video"==p.type?(0,O.Pn):(0,O.sU))(p.mainId),(0,P.k)(e,{},function(e){var n=e.headers,e=e.data,e=btoa(new Uint8Array(e).reduce(function(e,n){return e+String.fromCharCode(n)},"")),e="data:".concat(n["content-type"].toLowerCase(),";base64,").concat(e);window&&("photo"==p.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(p.photo),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",p.photo)),"video"==p.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(p.video),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",p.video)),"document"==p.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(p.document),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",p.document))),D().saveAs(e),l(F.MJ(!1))},function(e){l(F.MJ(!1))},P.Y.GET,C(C({},(0,M.XW)()),{},{responseType:"arraybuffer",onDownloadProgress:function(e){e=Math.round(100*e.loaded/e.total);o(e)}}),!0))}},i("DOWNLOAD")),v.createElement(y.Z,{variant:"contained",color:"primary",disabled:0==a,onClick:function(){0<a&&c(function(e){return e-1})}},i("PREVIOUS")),v.createElement(y.Z,{variant:"contained",color:"primary",disabled:a==(null==s?void 0:s.length)-1,onClick:function(){a<(null==s?void 0:s.length)-1&&c(function(e){return e+1})}},i("NEXT"))))}}}]);