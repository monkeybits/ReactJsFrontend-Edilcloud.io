(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[47677],{47677:function(e,t,a){"use strict";a.r(t);var u=a(78709),r=a(32986),p=a(17725),n=a(86926),b=a(96282),g=a(92466),h=a(25710),o=a(40962),x=a(28344),l=a(78279),E=a.n(l),v=a(58913),R=a(3089),N=a(53369),T=(0,r.ZP)(function(){return a.e(9454).then(a.bind(a,9454))}),Z=(0,r.ZP)(function(){return Promise.all([a.e(62475),a.e(21258),a.e(17367)]).then(a.bind(a,17367))}),y=(0,r.ZP)(function(){return Promise.all([a.e(63604),a.e(30250),a.e(71871),a.e(62475),a.e(79337),a.e(86351),a.e(74376),a.e(93223)]).then(a.bind(a,93223))}),w=(0,o.Z)(function(e){return{messageRow:{position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-end",padding:"0 16px 4px 16px",flex:"0 0 auto","&.contact":{"& $bubble":{backgroundColor:"#fff",color:"#1E2129",boxShadow:"0 1px 3px #00000029",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:20,borderBottomRightRadius:20,marginBottom:8,"& $time":{marginLeft:12}},"&.first-of-group":{"& $bubble":{borderTopLeftRadius:20}},"&.last-of-group":{"& $bubble":{borderBottomLeftRadius:20}}},"&.me":{paddingLeft:40,"& $avatar":{order:2,margin:"0 0 0 16px"},"& $bubble":{marginLeft:"auto",backgroundColor:"#bbc7ef4d",color:"#1E2129",borderTopLeftRadius:20,borderBottomLeftRadius:20,borderTopRightRadius:5,borderBottomRightRadius:5,marginBottom:8,"& $time":{justifyContent:"flex-end",right:0,marginLeft:6}},"&.first-of-group":{"& $bubble":{borderTopRightRadius:20}},"&.last-of-group":{"& $bubble":{borderBottomRightRadius:20}}},"&.contact + .me, &.me + .contact":{marginTop:10},"&.first-of-group":{"& $bubble":{borderTopLeftRadius:20,paddingTop:13}},"&.last-of-group":{"& $bubble":{borderBottomLeftRadius:20,paddingBottom:13,"& $time":{display:"flex"}}}},avatar:{position:"absolute",left:-32,margin:0},bubble:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:12,maxWidth:"100%"},message:{whiteSpace:"pre-wrap",lineHeight:1.2},time:{position:"relative",width:"100%",fontSize:11,marginTop:8,whiteSpace:"nowrap"},bottom:{background:e.palette.background.default,borderTop:"1px solid rgba(0, 0, 0, 0.13)"},inputWrapper:{borderRadius:24}}});t.default=function(i){var e,t,c=(0,v.v9)(function(e){return e.chatPanel.contacts.entities}),a=(0,v.v9)(function(e){return e.chatPanel.contacts.selectedContactId}),r=(0,v.v9)(function(e){return e.chatPanel.chat}),o=(0,v.v9)(function(e){return e.chatPanel.user}),l=(0,R.Fc)(),s=null==l||null===(e=l.extra)||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.id,d=w(),m=(0,u.useRef)(null),f=(0,N.$)("chat_panel").t;return(0,u.useEffect)(function(){m.current.scrollTop=m.current.scrollHeight},[r]),u.createElement(n.Z,{elevation:3,className:(0,x.Z)("flex flex-col",i.className)},(0,u.useMemo)(function(){function l(e,t){return 0===t||r.chats[t-1]&&r.chats[t-1].sender.id!=e.sender.id}function n(e,t){return t===r.chats.length-1||r.chats[t+1]&&r.chats[t+1].sender.id!=e.sender.id}var e;return u.createElement(p.Z,{ref:m,className:"flex flex-1 flex-col overflow-y-auto"},r?null!=r&&(null!==(e=r.chats)&&void 0!==e&&e.length)?u.createElement("div",{className:"flex flex-col pt-16 ltr:pl-40 rtl:pr-40 pb-40 me-right-align right-panel-audio"},r.chats.map(function(e,t){var a,r=e.sender,o=c.length&&(null==c?void 0:c.filter(function(e){return e.id==r.id}));return u.createElement("div",{key:e.time,className:(0,x.Z)(d.messageRow,{me:r.id==s},{contact:r.id!=s},{"first-of-group":l(e,t)},{"last-of-group":n(e,t)})},n(e,t)&&r.id!=s&&u.createElement(h.Z,{className:"avatar absolute ltr:left-0 rtl:right-0 m-0 -mx-32 top-0",src:r.photo},r.first_name.split("")[0]),u.createElement("div",{className:d.bubble},u.createElement("div",{className:d.message},r.id!=s&&l(e,t)&&u.createElement(g.Z,{style:{color:null==o||null===(a=o[0])||void 0===a?void 0:a.contactNameColor},className:"font-size-15 font-bold mb-6"},"".concat(r.first_name," ").concat(r.last_name),u.createElement(g.Z,{className:"font-size-12 "},"Project Manager - Impresa Edile Lucchini")),u.createElement(Z,{isOffline:e.retryOption,chatItem:e}),u.createElement("div",{className:"leading-normal py-4 font-size-16 mb-15"},e.body),u.createElement(T,{open:i.open,setOpen:i.setOpen,files:e.files}),u.createElement("div",{className:"flex items-center mt-8"},u.createElement(g.Z,{className:"time text-12 font-500 ltr:left-0 rtl:right-0 whitespace-no-wrap",color:"textSecondary"},E()(e.date_create).format("MMMM Do YYYY, h:mm:ss a")),r.id==s&&e.waitingToSend?u.createElement(b.Z,{className:"float-right font-size-16 ml-10 text-check"},"access_time"):u.createElement(b.Z,{className:"float-right text-16 ml-10 text-check"},"done_all")))))})):u.createElement("div",{className:"flex flex-col flex-1"},u.createElement("div",{className:"flex flex-col flex-1 items-center justify-center"},u.createElement(b.Z,{className:"text-128",color:"disabled"},"chat")),u.createElement(g.Z,{className:"px-16 pb-24 text-center",color:"textSecondary"},f("START_CONVERSATION"))):u.createElement("div",{className:"flex flex-col flex-1 items-center justify-center p-24"},u.createElement(b.Z,{className:"text-128",color:"disabled"},"chat"),u.createElement(g.Z,{className:"px-16 pb-24 mt-24 text-center",color:"textSecondary"},f("CREATE_CHAT_MESSAGE"))))},[r,d,c,a,o]),r&&u.createElement(y,null))}}}]);