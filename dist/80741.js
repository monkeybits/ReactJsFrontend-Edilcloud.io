(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[80741,21066],{92505:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var t=n(56156),a=n.n(t),t=n(20305),r=n.n(t),t=n(51265),o=n.n(t),l=n(78709),t=n(40962),i=n(389),c=n(92466),s=n(82186),u=n(41713),d=n(23610),m=n(86926),p=n(28344),f=n(67485),g=n(94435);function v(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}var h=(0,t.Z)(function(e){return{root:{"& .fuse-chip-select__input":{color:e.palette.text.primary},"&.standard":{"& $placeholder":{},"& $valueContainer":{paddingTop:4}},"&.filled":{"& $placeholder":{left:12},"& $valueContainer":{paddingTop:24,paddingLeft:12},"& $chip":{border:"1px solid rgba(0, 0, 0, 0.12)"}},"&.outlined":{"& $placeholder":{left:12},"& $valueContainer":{paddingLeft:12,paddingTop:12}}},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",paddingBottom:4,paddingTop:12,minHeight:40},chip:{margin:"4px 4px 4px 0"},chipFocused:{backgroundColor:(0,i.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing(),"px ").concat(e.spacing(2),"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:0,fontSize:16,margin:0},paper:{position:"absolute",zIndex:2,marginTop:e.spacing(),left:0,right:0},divider:{height:e.spacing(2)}}});function E(e){var t=e.inputRef,e=r()(e,["inputRef"]);return l.createElement("div",o()({ref:t},e))}var y={Control:function(e){var t=h();return l.createElement(s.Z,o()({fullWidth:!0,className:(0,p.Z)(t.root,e.selectProps.textFieldProps.variant),required:e.selectProps.required,error:e.selectProps.error,InputProps:{inputComponent:E,inputProps:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({className:t.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){var t=h();return l.createElement(m.Z,o()({square:!0,className:t.paper},e.innerProps),e.children)},MultiValue:function(t){var e=h();return l.createElement(d.Z,{tabIndex:-1,label:t.children,className:(0,p.Z)(e.chip,a()({},e.chipFocused,t.isFocused),t.data.class),onDelete:function(e){t.removeProps.onClick(),t.removeProps.onMouseDown(e)}})},NoOptionsMessage:function(e){var t=h();return l.createElement(c.Z,o()({color:"textSecondary",className:t.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return l.createElement(u.Z,o()({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?600:400}},e.innerProps),e.children)},Placeholder:function(e){var t=h();return l.createElement(c.Z,o()({color:"textSecondary",className:t.placeholder},e.innerProps),e.children)},SingleValue:function(e){var t=h();return l.createElement(c.Z,o()({className:t.singleValue},e.innerProps),e.children)},ValueContainer:function(e){var t=h();return l.createElement("div",{className:t.valueContainer},e.children)}};function b(t){function e(e){null===e&&(e=[]),t.onChange&&t.onChange(e)}return"fixed"===t.variant?l.createElement(f.ZP,o()({classNamePrefix:"fuse-chip-select"},t,{components:y,onChange:e})):l.createElement(g.ZP,o()({classNamePrefix:"fuse-chip-select"},t,{components:y,onChange:e}))}var x=l.memo(b)},2258:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var t=n(51265),a=n.n(t),r=n(78709),o=n(12707),l=r.forwardRef(function(e,t){return r.createElement(o.OL,a()({innerRef:t},e))})},21066:function(e,t,n){"use strict";n.r(t);var a=n(82853),r=n.n(a),a=n(82147),o=n.n(a),a=n(40734),l=n.n(a),a=n(38050),i=n.n(a),a=n(3056),c=n.n(a),a=n(71470),s=n.n(a),a=n(56156),u=n.n(a),d=n(78709),m=n(7311);function p(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s()(n);return t=a?(e=s()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)}}n=function(e){i()(a,e);var n=p(a);function a(e){var t;return r()(this,a),t=n.call(this,e),u()(l()(t),"onDuration",function(e){console.log("onDuration",e),t.setState({duration:e})}),u()(l()(t),"onProgress",function(e){t.state.seeking||t.setState(e)}),u()(l()(t),"ref",function(e){console.log(e),t.player=e}),u()(l()(t),"onSeekMouseDown",function(e){t.setState({seeking:!0})}),u()(l()(t),"onSeekChange",function(e){t.setState({played:parseFloat(e.target.value)})}),u()(l()(t),"onSeekMouseUp",function(e){t.setState({seeking:!1}),t.player.seekTo(parseFloat(e.target.value))}),u()(l()(t),"onPlay",function(){console.log("onPlay"),t.setState({playing:!0})}),u()(l()(t),"onEnded",function(){console.log("onEnded")}),t.state={seconds:0,played:0},t}return o()(a,[{key:"render",value:function(){var e=this.state,t=(e.duration,e.played,e.playing),n=this.props,e=n.video_url;n.width,n.height;return d.createElement("div",null,d.createElement(m.Z,{ref:this.ref,url:e,style:{width:"100%",height:"360px",left:"0px",top:"0px"},controls:!0,onDuration:this.onDuration,onPlay:this.onPlay,loop:!1,onEnded:this.onEnded,playing:t}))}}]),a}(d.Component);t.default=n},63978:function(e,t,n){"use strict";n.d(t,{kJ:function(){return a},fK:function(){return r},_$:function(){return o},V8:function(){return l},F:function(){return i},sw:function(){return c},mZ:function(){return s},Lf:function(){return u},zU:function(){return d},m6:function(){return m},Js:function(){return p},E9:function(){return f},Mw:function(){return g},Lx:function(){return v},ov:function(){return h},F4:function(){return E},kQ:function(){return y},hc:function(){return b},Fe:function(){return x}});var a="[Accessibility] TOGGLE ACCESSIBILITY PANEL",r="[Accessibility] OPEN ACCESSIBILITY PANEL",o="[Accessibility] DOWNLOAD SMARTPHONE APP PANEL",l="[Accessibility] GET DATA",i="[Accessibility] SET MENU OPEN PANEL",c="[Accessibility] IS TEAM",s="[Accessibility] IS PROJECT",u="[Accessibility] IS TASK",d="[Accessibility] IS POST",m="[Accessibility] IS DOWNLOAD APP";function p(){return{type:a}}function f(){return{type:r}}function g(e){return{type:i,payload:e}}function v(e){return{type:c,payload:e}}function h(e){return{type:s,payload:e}}function E(e){return{type:u,payload:e}}function y(e){return{type:d,payload:e}}function b(e){return{type:m,payload:e}}function x(){return{type:o}}},70956:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xa}});var W=n(78709),a=n(61432),U=n.n(a),r=n(51265),V=n.n(r),o=n(20305),l=n.n(o),i=n(16526),c=n.n(i),s=n(40962),B=n(84403),H=n(92466),u=n(1644),J=n(58913),X=n(55110),d=n(20074),m=n(49821),N=n(35923),p=n(97692),f=n(70310),g=n(61681),P=n(96282),$=n(53369),_=n(90),v=n(56156),K=n.n(v),q=n(13786),Q=n(3089),ee=n(42401),D=n(28344),te=n(11208),Z=n(10846),k=n(43812),j=n(31570),t=n(78279),A=n.n(t),ne=n(96450),h=n(50253),a=n(6274),ae=n(99904),E=n(70964),r=n(80896),y=n(19462),re=n(48258),oe=n(35965),le=n(21258),ie=n(62475),b=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose,e=l()(e,["children","classes","onClose"]);return W.createElement(E.Z,V()({disableTypography:!0,className:n.root},e),W.createElement(H.Z,{variant:"h6"},t),a?W.createElement(re.Z,{"aria-label":"close",className:n.closeButton,onClick:a},W.createElement(oe.Z,null)):null)}),x=(0,a.Z)(function(e){return{root:{padding:e.spacing(2)}}})(r.Z),w=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)}}})(y.Z);function S(e){var t=e.open,n=e.setOpen,a=e.setTarget,r=e.target,o=e.onImport,e=function(){n(!1)};return W.createElement("div",null,W.createElement(ae.Z,{fullWidth:!0,maxWidth:"sm",className:"custom-modal-new",onClose:e,open:t},W.createElement(b,{className:"bg-blue text-white",id:"customized-dialog-title",onClose:e},"Import Excel"),W.createElement(x,{dividers:!0},W.createElement(H.Z,{gutterBottom:!0},"Download Demo File"),W.createElement("a",{className:"xlsx-sample",href:"/assets/files/DemoProject.xlsx",target:"_blank"},W.createElement(ie.G,{icon:le.q7m,style:{fontSize:"1.5rem"}}),"DemoProject.xlsx"),W.createElement("div",{className:"mt-16 mb-16 mx-4 relative static-form-label flex-1"},W.createElement("label",null,"Import File"),W.createElement("input",{type:"file",id:"excelFile",name:"file",accept:".xlsx,.xls",onChange:function(e){return a(e.target.files[0])}}))),W.createElement(w,null,W.createElement(q.Z,{autoFocus:!0,onClick:e,color:"primary"},"Cancel"),W.createElement(q.Z,{autoFocus:!0,onClick:o,disabled:!r,color:"primary"},"Import"))))}var O=n(52047),T=n(84497),C=n(10721),F=(0,s.Z)(function(e){return{root:{transform:"translateZ(0px)",flexGrow:1},exampleWrapper:{position:"relative",marginTop:e.spacing(3),height:380},radioGroup:{margin:e.spacing(1,0)},speedDial:{position:"absolute","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}},fab:{"&:hover":{backgroundColor:"#295da2"}}}}),I=(0,s.Z)(function(e){return{staticTooltipLabel:{width:140}}});function M(e){function n(){l(!1)}var a=F(),r=I(),t=W.useState(!1),o=U()(t,2),t=o[0],l=o[1],e=[{icon:W.createElement(P.Z,null,"import_export"),name:"Importa de excel",handler:e.importExcel},{icon:W.createElement(P.Z,null,"add"),name:"Crea una fase",handler:e.createTasks}];return W.createElement("div",{className:(0,D.Z)(a.root,"speeddial-btn")},W.createElement("div",{className:a.exampleWrapper},W.createElement(O.Z,{ariaLabel:"SpeedDial example",className:(0,D.Z)(a.speedDial,"custom-float-btn"),icon:W.createElement(T.Z,null),onClose:n,onOpen:function(){l(!0)},open:t,direction:"up"},e.map(function(t){return W.createElement(C.Z,{classes:r,className:a.fab,key:t.name,icon:t.icon,tooltipTitle:t.name,tooltipOpen:!0,onClick:function(e){t.handler(e),n()}})}))))}var L=function(t){(0,W.useEffect)(function(){var e=document.createElement("script");return e.src=t,e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}},[t])},o=n(32986),R=n(18644),G=(0,o.ZP)(function(){return n.e(97795).then(n.bind(n,97795))}),Y=(0,s.Z)(function(e){return{paper:{color:e.palette.text.primary}}});function z(e){var t=(0,J.I0)(),n=(0,J.v9)(function(e){return e.todoAppNote.todos.taskContentDialog}),a=(0,J.v9)(function(e){return e.todoAppNote.todos.openDrawingContent}),r=(0,X.UO)();return Y(e),(0,W.useEffect)(function(){return function(){t(_.LC(r.id,!1))}},[n.props.open]),W.createElement(W.Fragment,null,W.createElement(ae.Z,{classes:{root:e.isGantt?"":"custom-modal-close"},onClose:function(e){return t(_.X_())},open:n.props.open,fullWidth:!0,maxWidth:"sm",className:"custom-modal-new timeline-modal content-modal"},W.createElement(R.default,null)),W.createElement(ae.Z,{classes:{root:e.isGantt?"":"custom-modal-close"},onClose:function(e){return t(_.ue())},open:a,fullWidth:!0,maxWidth:"sm",className:"custom-modal-new timeline-modal content-modal"},W.createElement(G,null)))}var ce=n(53103),se=n(65129),ue=(0,o.ZP)(function(){return n.e(87576).then(n.bind(n,87576))});function de(e){var t=(0,J.I0)(),n=(0,J.v9)(function(e){return e.todoAppNote.todos.todoDialog});return W.createElement(ae.Z,{classes:{root:e.isGantt?"":"custom-modal-close"},open:n.props.openTimelineDialog,onClose:function(){return t(_.aP())},fullWidth:!0,maxWidth:"sm",className:"rs-dialog-sm-full custom-modal-new timeline-modal"},W.createElement(ue,null))}var i=n(79545),me=n.n(i),v=n(82853),pe=n.n(v),t=n(82147),fe=n.n(t),i=n(40734),ge=n.n(i),v=n(38050),ve=n.n(v),t=n(3056),he=n.n(t),i=n(71470),Ee=n.n(i),v=(n(20025),n(93379)),t=n.n(v),i=n(40349),v={insert:"head",singleton:!1},v=(t()(i.Z,v),i.Z.locals,n(22675)),i={insert:"head",singleton:!1},t=(t()(v.Z,i),v.Z.locals,n(62805)),ye=n(28348),be=n(88572),xe=n(29796),we=n(79337),i=n(53217),Oe=(n(1588),n(76836)),Pe=W.forwardRef(function(e,t){return W.createElement(Oe.Z,V()({direction:"up",ref:t},e))});function De(e){var t=e.open,n=e.setOpen,a=e.onYes,r=e.onNeverAsk,e=function(){r(),n(!1)};return W.createElement(ae.Z,{open:t,TransitionComponent:Pe,keepMounted:!0,onClose:e,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},W.createElement(E.Z,{id:"alert-dialog-slide-title"},"For a Better usage use fullscreen version"),W.createElement(y.Z,null,W.createElement(q.Z,{onClick:e,color:"primary"},"Never advice me again"),W.createElement(q.Z,{onClick:function(){a(),n(!1)},color:"primary"},"Agree")))}function Ne(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ze(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ee()(n);return t=a?(e=Ee()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),he()(this,t)}}function ke(e,t){e=j.gantt.getTask(e);e.start_date=j.gantt.date.add(e.start_date,t,"day"),e.end_date=j.gantt.calculateEndDate(e.start_date,e.duration),j.gantt.updateTask(e.id)}function je(e,t){return e.mainId>t.mainId?1:e.mainId<t.mainId?-1:0}function Ae(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||j.gantt.getState().fullscreen||(document.body.className="",setTimeout(function(){j.gantt.collapse()},300))}v=function(e){ve()(n,e);var t=Ze(n);function n(e){var o;return pe()(this,n),o=t.call(this,e),K()(ge()(o),"editTodo",function(e,t){t={name:e.name,note:e.description,progress:e.progress,date_start:A()(e.date_start).format("YYYY-MM-DD"),date_end:A()(e.date_end).format("YYYY-MM-DD"),assigned_company:e.company&&e.company[0]?e.company[0].data.profile.company.id:null,project:t,date_completed:null,alert:!1,starred:!1};(0,be.k)((0,te.KR)(e.id),t,function(e){o.props.getTodos(o.props.match.params.id,!0)},function(e){return console.log(e)},be.Y.PUT,(0,Q.XW)())}),K()(ge()(o),"editTodoActivty",function(e){var t={title:e.name,description:e.description,datetime_start:A()(e.date_start).format("YYYY-MM-DD"),datetime_end:A()(e.date_end).format("YYYY-MM-DD"),workers:null!==(t=e.profile)&&void 0!==t&&t.length?e.profile.map(function(e){return e.id}):void 0};console.log({values:t}),(0,be.k)((0,te.E1)(e.id),t,function(e){o.props.getTodos(o.props.match.params.id,!0)},function(e){return console.log(e)},be.Y.PUT,(0,Q.XW)())}),K()(ge()(o),"ganttInit",function(e){var t={data:Object.values(e.entities).map(function(e,t){var n,a,r;return 0==e.parent?_e(_e({},{id:e.id,text:e.name,start_date:e.date_start,end_date:e.date_end,progress:e.progress/100,company:null==e||null===(n=e.assigned_company)||void 0===n?void 0:n.name,parent:0,color:null==e||null===(a=e.assigned_company)||void 0===a?void 0:a.color_project,mainId:e.id}),{},{data:e}):_e(_e({},{id:Math.floor(9999*Math.random()),text:e.title,start_date:e.datetime_start,end_date:e.datetime_end,progress:"completed"==e.status?1:0,company:null==e||null===(r=e.assigned_company)||void 0===r?void 0:r.name,mainId:e.id,parent:e.task}),{},{data:e})})};o.ganttCallback(function(){return o.setState({tasks:t},function(){return o.createGantt(t)})},function(){return j.gantt.clearAll()})}),K()(ge()(o),"createGantt",function(e){var t;j.gantt.config.xml_date="%Y-%m-%d %H:%i",o.state.toggleLeft?(j.gantt.config.columns=[],j.gantt.config.layout={css:"gantt_container",cols:[{rows:[{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollHor"}]},{view:"scrollbar",id:"scrollVer"}]}):(t=o.props.t,j.gantt.config.columns=[{name:"text",label:t("TASK_NAME"),tree:!0,width:150},{name:"start_date",label:t("START_DATE"),width:100},{name:"end_date",label:t("END_DATE"),width:100},{name:"company",label:t("COMPANY"),width:100},{name:"add",width:44,min_width:44,max_width:44}],j.gantt.config.layout={css:"gantt_container",cols:[{width:500,min_width:400,rows:[{view:"grid",scrollX:"gridScroll",scrollable:!0,scrollY:"scrollVer"},{view:"scrollbar",id:"gridScroll"}]},{resizer:!0,width:1},{rows:[{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollHor"}]},{view:"scrollbar",id:"scrollVer"}]}),j.gantt.init(o.ganttContainer),j.gantt.parse(e),j.gantt.templates.grid_date_format=function(e,t){if("end_date"!==t)return A()(e).format("YYYY-MM-DD");e=new Date(e.setHours(23,59,59,100));return A()(e).format("YYYY-MM-DD")},j.gantt._onTemplatesReadyHandler&&j.gantt.detachEvent(j.gantt._onTemplatesReadyHandler),j.gantt._onTaskClickHandler&&j.gantt.detachEvent(j.gantt._onTaskClickHandler),j.gantt._onTaskClickHandler=j.gantt.attachEvent("onTaskClick",function(n,e){return setTimeout(function(){var t=j.gantt.getTask(n);t.$open?o.setState(function(e){return{openTasks:[].concat(me()(e.openTasks),[t.id])}}):o.setState(function(e){return{openTasks:e.openTasks.filter(function(e){return e!=n})}})},500),!0}),j.gantt.ext.fullscreen.getFullscreenElement=function(){return document.getElementById("myCover")},j.gantt.sort(je),o.unSelectAllTask(),o.state.expandAll?o.openAll():o.openTasksOnInit(),j.gantt.showLightbox=function(e){var t=j.gantt.getTask(e);if(console.log({id:e,savedTask:t}),j.gantt.isTaskExists(e)){if(1!=t.$new){var n=t;if(n.data.parent)return o.props.openTimelineDialog({todo:n.data,task:j.gantt.getTask(n.parent).data,isGantt:!0});var a=(0,Q.Fc)(),r=function(){var e;return null==a||null===(e=a.extra)||void 0===e?void 0:e.profile.role};return"o"==r()||"d"==r()?o.props.openTaskContent(_e(_e({},n.data),{},{isGantt:!0})):null}1==t.$level?(n=j.gantt.getTask(t.parent),o.props.openAddActivityTodoDialog(_e(_e({},n.data),{},{isGantt:!0}))):o.props.openNewTodoDialog({isGantt:!0}),delete t.$new,j.gantt.deleteTask(e)}},j.gantt.templates.scale_cell_class=function(e){if(0==e.getDay()||6==e.getDay())return"weekend"},j.gantt.templates.timeline_cell_class=function(e,t){if(0==t.getDay()||6==t.getDay())return"weekend"},o.createMarker(e),o.setState({loading:!1})}),K()(ge()(o),"templatePermissions",function(i,c){(0,Q.Fc)();i.company&&c&&(j.gantt.templates.grid_header_class=function(e,t){if("add"==e)return"hide_add"},j.gantt.templates.grid_row_class=function(e,t,n){(0,Q.Fc)();var a,r="";return 1<=n.$level&&(r+=" nested_task"),n.company||(r+=" hide_add"),(null===(n=n.data)||void 0===n||null===(a=n.assigned_company)||void 0===a?void 0:a.id)!=c.id&&(r+=" hide_add hide_tree_icon"),r},j.gantt.templates.task_class=function(e,t,n){function a(){var e;return null==o||null===(e=o.extra)||void 0===e?void 0:e.profile.role}var r,o=(0,Q.Fc)(),l="";return n.parent&&(l+=" nested_task_right hide_progress_drag"),0==n.parent&&(null===(r=i.company)||void 0===r?void 0:r.id)!=c.id&&(l+=" hide_date_drag"),(0==n.parent&&c.id!=(null===(n=i.company)||void 0===n?void 0:n.id)||"m"==a()||"w"==a())&&(l+=" block_row_events"),l})}),K()(ge()(o),"createMarker",function(e){var t;null!==(t=e.data)&&void 0!==t&&t.length&&(t=j.gantt.date.date_to_str(j.gantt.config.task_date),t=j.gantt.addMarker({start_date:new Date,css:"today",text:"Adesso",title:t(new Date)}),j.gantt.getMarker(t),e=e.data.map(function(e){return e.start_date&&new Date(e.start_date.split("-"))}),e=new Date(Math.min.apply(null,e)),e=j.gantt.addMarker({start_date:e,css:"status_line",text:"Inizio Progetto",title:"Inizio Progetto: "}),j.gantt.getMarker(e))}),K()(ge()(o),"onTaskSelectHandler",function(){function n(){var e;return null==t||null===(e=t.extra)||void 0===e?void 0:e.profile.role}var t=(0,Q.Fc)();j.gantt.batchUpdate(function(){j.gantt.eachSelectedTask(function(e){var t;1==j.gantt.getTask(e).$level||o.props.company.id==(null===(t=o.props.projectDetail.company)||void 0===t?void 0:t.id)||"o"!=n()&&"d"!=n()||j.gantt.unselectTask(e)})})}),K()(ge()(o),"unSelectAllTask",function(){j.gantt.batchUpdate(function(){j.gantt.eachSelectedTask(function(e){j.gantt.unselectTask(e)})})}),K()(ge()(o),"closeAll",function(){o.setState({expandAll:!1}),j.gantt.eachTask(function(e){e.$open=!1}),j.gantt.render()}),K()(ge()(o),"openAll",function(){o.setState({expandAll:!0}),j.gantt.eachTask(function(e){var t;(null===(t=e.data.assigned_company)||void 0===t?void 0:t.id)==o.props.company.id&&(e.$open=!0)}),j.gantt.render()}),K()(ge()(o),"openTasksOnInit",function(){j.gantt.eachTask(function(e){o.state.openTasks.includes(e.id)&&(e.$open=!0)}),j.gantt.render()}),K()(ge()(o),"zoomIn",function(){j.gantt.ext.zoom.zoomIn(),j.gantt.render()}),K()(ge()(o),"zoomOut",function(){j.gantt.ext.zoom.zoomOut(),j.gantt.render()}),K()(ge()(o),"setZoomDefaultLevel",function(){j.gantt.ext.zoom.setLevel("month1")}),K()(ge()(o),"exportPNG",function(){var e=o.state.tasks.data.map(function(e){return e.start_date&&new Date(e.start_date.split("-"))}),t=o.state.tasks.data.map(function(e){return e.end_date&&new Date(e.end_date.split("-"))}),e=new Date(Math.min.apply(null,e)),t=new Date(Math.min.apply(null,t));console.log({startDatesFormat:A()(e).format("DD-MM-YYYY"),endDatesFormat:A()(t).format("DD-MM-YYYY"),min:e,max:t}),j.gantt.exportToPNG({name:"mygantt.png",header:"<h1>My company</h1>",footer:"<h4>Bottom line</h4>",locale:"en",skin:"terrace",server:"https://export.dhtmlx.com/gantt",raw:!0})}),K()(ge()(o),"exportPDF",function(){j.gantt.exportToPDF({name:"mygantt.pdf",header:"<h1>My company</h1>",footer:"<h4>Bottom line</h4>",locale:"en",skin:"terrace",server:"https://export.dhtmlx.com/gantt",raw:!0})}),K()(ge()(o),"exportMSProject",function(){j.gantt.exportToMSProject({skip_circular_links:!1,server:"https://export.dhtmlx.com/gantt"})}),K()(ge()(o),"exportExcel",function(){j.gantt.exportToExcel()}),K()(ge()(o),"moveForward",function(){j.gantt.eachSelectedTask(function(e){ke(e,1)})}),K()(ge()(o),"moveBackward",function(){j.gantt.eachSelectedTask(function(e){ke(e,-1)})}),K()(ge()(o),"toggleLeftPanel",function(){o.state.loading||o.setState(function(e){return{toggleLeft:!e.toggleLeft,loading:!0}},function(){return o.ganttInit(o.props.todos)})}),K()(ge()(o),"addDragEvent",function(){j.gantt.config.autoscroll=!0,j.gantt.config.autoscroll_speed=50}),K()(ge()(o),"ganttCallback",function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.onTaskSelectHandler;new Promise(function(e,t){n(),e()}).then(function(){e()})}),o.state={loading:!1,toggleLeft:!1,tasks:void 0,zoomLevel:3,expandAll:!1,openTasks:[],open:!1,language:"en"},o.fileDnD=null,o}return fe()(n,[{key:"componentWillUnmount",value:function(){this.dataProcessor&&(this.dataProcessor.destructor(),this.dataProcessor=null)}},{key:"componentDidMount",value:function(){var e,r=this;j.gantt.clearAll(),e={startDate:new Date,maxColumnWidth:92,minColumnWidth:20,levels:[{name:"hour1",scale_unit:"day",date_scale:"%d %M",scale_height:60,min_column_width:30,subscales:[{unit:"hour",step:1,date:"%H"}]},{name:"hour2",scale_unit:"day",date_scale:"%d %M",scale_height:60,min_column_width:45,subscales:[{unit:"hour",step:1,date:"%H"}]},{name:"day1",min_column_width:60,scale_unit:"week",date_scale:"#%W",subscales:[{unit:"day",step:1,date:"%d %M"}],scale_height:60},{name:"day2",min_column_width:70,scale_unit:"week",date_scale:"#%W",subscales:[{unit:"day",step:1,date:"%d %M"}],scale_height:60},{name:"month1",min_column_width:80,scale_unit:"month",date_scale:"%F",scale_height:60,subscales:[{unit:"week",step:1,date:"#%W"}]},{name:"year1",max_column_width:92,scale_unit:"year",date_scale:"%Y",scale_height:60,subscales:[{unit:"year",step:1,date:"%d %M %Y"}]}]},j.gantt.ext.zoom.init(e),j.gantt.ext.zoom.setLevel("day2"),this.addDragEvent(),j.gantt.plugins({multiselect:!0,fullscreen:!0,marker:!0}),j.gantt.config.multiselect=!0,document.addEventListener("fullscreenchange",Ae),document.addEventListener("webkitfullscreenchange",Ae),document.addEventListener("mozfullscreenchange",Ae),document.addEventListener("MSFullscreenChange",Ae),j.gantt.config.show_errors=!1,j.gantt._onTemplatesReadyHandler=j.gantt.attachEvent("onTemplatesReady",function(){document.getElementById("fullScreen").onclick=function(){j.gantt.getState().fullscreen?(document.body.className="",setTimeout(function(){j.gantt.collapse()},300)):(document.body.className="gantt-custom-full-screen",j.gantt.expand())}}),this.dataProcessor=j.gantt.createDataProcessor(function(e,t,n,a){return new Promise(function(e,t){0==n.parent?r.editTodo({name:n.data.name,description:n.data.note,id:n.data.id,company:n.data.assigned_company,progress:n.data.progress,date_start:n.start_date,date_end:n.end_date},r.props.match.params.id):r.editTodoActivty({name:n.data.title,description:n.data.description,id:n.data.id,profile:n.data.workers,date_start:n.start_date,date_end:n.end_date}),e()})})}},{key:"shouldComponentUpdate",value:function(e,t){var n,a=e.todos,r=e.company,o=e.projectDetail;return this.state.language!=e.i18n.language?(this.setState({language:e.i18n.language}),!0):r&&o.company&&JSON.stringify(r)!=JSON.stringify(this.props.company)||JSON.stringify(o.company)!=JSON.stringify(this.props.projectDetail.company)?(this.templatePermissions(o,r),!0):this.props.todos.isLoadingTodos!=e.todos.isLoadingTodos||(null!==(r=this.props.todos)&&void 0!==r&&r.entities&&null!=a&&a.entities&&JSON.stringify(a.entities)!==JSON.stringify(this.props.todos.entities)?(this.ganttInit(a),!1):this.state.toggleLeft!=t.toggleLeft||(this.state.open!=t.open||(null===(t=t.tasks)||void 0===t||null===(n=t.data)||void 0===n||!n.length||("portrait"==e.orientation?(this.state.open&&this.setState({open:!1}),document.body.className="",setTimeout(function(){j.gantt.collapse()})):"landscape"!=e.orientation||4!=e.value||j.gantt.getState().fullscreen||"false"==localStorage.getItem("askFullscreen")||this.state.open?4==e.value&&j.gantt.render():this.setState({open:!0}),!1))))}},{key:"componentDidUpdate",value:function(){j.gantt.render()}},{key:"setZoom",value:function(e){switch(e){case"Hours":j.gantt.config.scale_unit="day",j.gantt.config.date_scale="%d %M",j.gantt.config.scale_height=60,j.gantt.config.min_column_width=30,j.gantt.config.subscales=[{unit:"hour",step:1,date:"%H"}];break;case"Days":j.gantt.config.min_column_width=70,j.gantt.config.scale_unit="week",j.gantt.config.date_scale="#%W",j.gantt.config.subscales=[{unit:"day",step:1,date:"%d %M"}],j.gantt.config.scale_height=60;break;case"Months":j.gantt.config.min_column_width=44,j.gantt.config.scale_unit="month",j.gantt.config.date_scale="%F",j.gantt.config.scale_height=60,j.gantt.config.subscales=[{unit:"week",step:1,date:"#%W"}];break;case"Years":j.gantt.config.min_column_width=70,j.gantt.config.scale_unit="year",j.gantt.config.date_scale="%Y",j.gantt.config.scale_height=60,j.gantt.config.subscales=[{unit:"year",step:1,date:"%d %M %Y"}]}}},{key:"render",value:function(){var e,t=this,n=this.props.t,a=(0,Q.Fc)(),r=function(){var e;return null==a||null===(e=a.extra)||void 0===e?void 0:e.profile.role},o="o"==r()||"d"==r(),r=(null===(r=this.props.company)||void 0===r?void 0:r.id)==(null===(r=this.props.projectDetail)||void 0===r||null===(e=r.company)||void 0===e?void 0:e.id)&&o;return W.createElement("div",null,W.createElement("div",{className:"demo-main-container"},(null===(e=this.props.todos)||void 0===e?void 0:e.isLoadingTodos)&&W.createElement(xe.Z,{color:"secondary"}),W.createElement(De,{open:this.state.open,setOpen:function(e){return t.setState({open:e})},onYes:function(){t.fullscreenRef.click()},onNeverAsk:function(e){return localStorage.setItem("askFullscreen",!1)}}),W.createElement("div",{className:"header gantt-demo-header"},W.createElement("ul",{className:"gantt-controls"},W.createElement("li",{className:"gantt-menu-item",onClick:this.closeAll},W.createElement("a",{"data-action":"collapseAll"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_collapse_all_24.png"}),W.createElement("span",{className:"header-text"},n("COLLAPSE")))),W.createElement("li",{className:"gantt-menu-item gantt-menu-item-last",onClick:this.openAll},W.createElement("a",{"data-action":"expandAll"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_expand_all_24.png"}),W.createElement("span",{className:"header-text"},n("EXPAND")))),o&&W.createElement("li",{className:"gantt-menu-item",onClick:function(){return t.ganttCallback(t.moveBackward)}},W.createElement("a",{"data-action":"toggleCriticalPath"},W.createElement(ie.G,{icon:we.nP,style:{fontSize:"1.5rem"}}),W.createElement("span",{className:"header-text"},n("MOVE_BACKWARD")))),o&&W.createElement("li",{className:"gantt-menu-item",onClick:function(){return t.ganttCallback(t.moveForward)}},W.createElement("a",{"data-action":"toggleAutoScheduling"},W.createElement(ie.G,{icon:we.JY,style:{fontSize:"1.5rem"}}),W.createElement("span",{className:"header-text"},n("MOVE_FORWORD")))),r&&W.createElement("li",{className:"gantt-menu-item"},W.createElement("a",null,W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_export_24.png"}),W.createElement("span",{className:"header-text"},n("IMPORT"))),W.createElement("ul",{className:"gantt-controls"},W.createElement("li",{className:"gantt-menu-item",onClick:function(){document.getElementById("excelFile").click()}},W.createElement("input",{type:"file",id:"excelFile",name:"file",accept:".xlsx,.xls",onChange:function(e){return t.props.importExcel(e.target.files[0])},hidden:!0}),W.createElement("a",{"data-action":"toExcel"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_file_24.png"}),"Excel")),W.createElement("li",{className:"gantt-menu-item"},W.createElement("a",{className:"xlsx-sample",href:"/assets/files/DemoProject.xlsx",target:"_blank"},W.createElement(ie.G,{icon:le.q7m,style:{fontSize:"1.5rem"}}),"DemoProject.xlsx")))),W.createElement("li",{className:"gantt-menu-item"},W.createElement("a",null,W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_export_24.png"}),W.createElement("span",{className:"header-text"},n("EXPORT"))),W.createElement("ul",{className:"gantt-controls w-125"},W.createElement("li",{className:"gantt-menu-item",onClick:this.exportPDF},W.createElement("a",{"data-action":"toPDF"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_file_24.png"}),"PDF")),W.createElement("li",{className:"gantt-menu-item",onClick:this.exportPNG},W.createElement("a",{"data-action":"toPNG"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_file_24.png"}),"PNG")),W.createElement("li",{className:"gantt-menu-item",onClick:this.exportExcel},W.createElement("a",{"data-action":"toExcel"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_file_24.png"}),"Excel")),W.createElement("li",{className:"gantt-menu-item",onClick:this.exportMSProject},W.createElement("a",{"data-action":"toMSProject"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_file_24.png"}),"MS Project")))),W.createElement("li",{className:"gantt-menu-item gantt-menu-item-last",onClick:this.setZoomDefaultLevel},W.createElement("a",{"data-action":"zoomToFit"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_zoom_to_fit_24.png"}),W.createElement("span",{className:"header-text"},n("ZOOM_TO_FIT")))),W.createElement("li",{className:"gantt-menu-item",onClick:this.zoomOut},W.createElement("a",{"data-action":"zoomOut"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_zoom_out.png"}),W.createElement("span",{className:"header-text"},n("ZOOM_OUT")))),W.createElement("li",{className:"gantt-menu-item",onClick:this.zoomIn},W.createElement("a",{"data-action":"zoomIn"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_zoom_in.png"}),W.createElement("span",{className:"header-text"},n("ZOOM_IN")))),W.createElement("li",{className:"gantt-menu-item",id:"fullScreen",ref:function(e){return t.fullscreenRef=e}},W.createElement("a",{"data-action":"fullscreen"},W.createElement("img",{src:"https://dhtmlx.com/docs/products/dhtmlxGantt/demo/imgs/ic_fullscreen_24.png"}),W.createElement("span",{className:"header-text"},n("FULLSCREEN")))))),W.createElement("div",{ref:function(e){t.ganttContainer=e},style:{width:"100%",height:"100%"},className:"gantt-min-height"})))}}]),n}(W.Component);var Se=(0,t.Z)(function(e){return{todos:e.todoAppNote.todos}},function(e){return(0,ye.DE)({openTaskContent:_.tp,openNewTodoDialog:_.fE,editTodo:_.bm,getTodos:_.LC,openAddActivityTodoDialog:_.Am,openTimelineDialog:_.F8,setLoading:_.K4},e)})((0,X.EN)((0,i.Z)("gantt_project")(v))),Te=n(63978);function Ce(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Ie=(0,s.Z)(function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}});function Me(e){L("https://export.dhtmlx.com/gantt/api.js"),Ie();var t=W.useState(null),n=(m=U()(t,2))[0],a=m[1],r=W.useState(!1),o=(v=U()(r,2))[0],l=v[1],i=(0,h.useMediaQuery)({query:"(orientation: portrait)"}),c=(0,h.useMediaQuery)({query:"(min-device-width: 1224px)"}),s=(0,J.I0)(),u=(0,X.UO)(),d=(0,J.v9)(function(e){return e.fuse.settings.mainTheme}),t=(0,J.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),m=(0,J.v9)(function(e){return e.notesApp.project.projectDetail}),r=((0,J.v9)(function(e){return e.todoAppNote.todos.entities}),(0,W.useState)({device:"computer",orientation:"portrait"})),r=(v=U()(r,2))[0],p=v[1];function f(e){(e=e||n)&&(l(!1),j.gantt.importFromExcel({server:"https://export.dhtmlx.com/gantt",data:e,callback:function(e){if(e)try{var a=[],r=[],o=[],n=e.map(function(e){return{name:e["Task name"],progress:e["Completed percentage"],date_start:e["Start time"]?A()(e["Start time"]).format("YYYY-MM-DD"):void 0,date_end:e["End time"]?A()(e["End time"]).format("YYYY-MM-DD"):void 0}});e.forEach(function(t){var n=[];if(!a.length){for(var e in t)a.push(e);a.forEach(function(e,t){n.push("<th>".concat(e,"</th>"))}),o.push("<tr>".concat(n.join(""),"</tr>")),o.push("<tr>".concat(r.join(""),"</tr>"))}n=[],a.forEach(function(e){n.push("<td>".concat(t[e],"</td>"))}),o.push("<tr>".concat(n.join(""),"</tr>"))});j.gantt.modalbox({title:"Assign columns",type:"excel-form",text:'<div class="table-responsive"> <table class="table m-0">'.concat(o.join(""),"</table> </div>"),buttons:[{label:"Save",css:"link_save_btn",value:"save"},{label:"Cancel",css:"link_cancel_btn",value:"cancel"}],callback:function(e){var t;"save"===e&&(s(_.K4(!0)),t=n,e=localStorage.getItem("jwt_access_token"),Z.Z.post((0,te.Md)(u.id),t,{headers:{Authorization:"JWT ".concat(e)}}).then(function(e){s(_.LC(u.id,!0))}).catch(function(e){return console.log(e)}))}})}catch(e){k.Am.error("Not supported ")}}}))}(0,N.KW)(function(){return s(_.LC(u.id,!0)),function(){s({type:_.y$,payload:[],isGantt:!0})}},[s,u,e.value]),(0,W.useEffect)(function(){p(c?function(e){return Fe(Fe({},e),{},{orientation:"desktop"})}:i?function(e){return Fe(Fe({},e),{},{orientation:"portrait"})}:function(e){return Fe(Fe({},e),{},{orientation:"landscape"})})},[i]),"desktop"==r.orientation||r.orientation;var g=(0,Q.Fc)(),v=function(){var e;return null==g||null===(e=g.extra)||void 0===e?void 0:e.profile.role};return W.createElement("div",null,W.createElement(ne.Z,{theme:d},W.createElement("div",{className:"flex flex-1 dashboard-todo-header w-full"},W.createElement("div",{className:"project_list h-auto bg-dark-blue min-h-auto w-full p-16"},W.createElement(H.Z,{className:"sm:flex pt-4 pb-8 text-white mx-0 sm:mx-12",variant:"h6"},"Gantt"),W.createElement("div",{className:"flex flex-1 items-center justify-end"},W.createElement(ee.Z,{animation:"transition.slideRightIn",delay:300},W.createElement(q.Z,{onClick:function(e){return s(Te.Js())},className:"whitespace-no-wrap normal-case",variant:"contained",color:"secondary"},W.createElement("span",{className:"xs:hidden sm:flex"},"Guida"))))))),W.createElement("div",null,W.createElement(Se,V()({},Fe(Fe({},e),{},{company:t,projectDetail:m,orientation:r.orientation}),{importExcel:f})),(null===(m=m.company)||void 0===m?void 0:m.id)==t.id&&("d"==v()||"o"==v())&&W.createElement(M,{importExcel:function(e){l(!0)},createTasks:function(e){return s(_.fE())}}),W.createElement(S,{open:o,setOpen:l,target:n,setTarget:a,onImport:function(){return f(void 0)}})),W.createElement(de,{isGantt:4==e.value}),W.createElement(z,{isGantt:4==e.value}))}var i=n(68357),Le=n.n(i),v=n(28129),Re=n.n(v),Ge=n(23377),Ye=n(82186),ze=n(19199),We=n(95272),Ue=n(16496);function Ve(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var He=(0,a.Z)(function(e){return{root:{padding:e.spacing(2)}}})(r.Z),Je=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)},rightSidebar:{"&.fileInfoSidebar":{backgroundColor:"#fff"}}}})(y.Z);function Xe(){var t=(0,$.$)("filemanaer_project").t,o=(0,J.I0)(),e=(0,J.v9)(function(e){return e.fileManagerAppProject.files.allFolderPaths}),n=(0,J.v9)(function(e){return e.fileManagerAppProject.files.moveFileDialog}),a=(0,J.v9)(function(e){return e.fileManagerAppProject.files}),l=(0,J.v9)(function(e){return e.fileManagerAppProject.files.folderPath}),a=(null===(d=a.folders)||void 0===d||d.filter(function(e){return e.path==l[l.length-1]}),(0,W.useState)(void 0)),i=(d=U()(a,2))[0],r=d[1],c=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),s=(0,X.UO)(),a=(0,W.useState)({fileError:"",titleError:"",descError:"",nameError:"",apiError:""}),a=(d=U()(a,2))[0],u=d[1],d=(0,W.useState)(null),m=(d=U()(d,2))[0],p=d[1];function f(){o(Ue.fQ())}return(0,W.useEffect)(function(){},[n.props.open]),(0,W.useEffect)(function(){(n.data.name||n.data.title)&&r(n.data.name||n.data.title)},[n.data]),d=n.data.relative_path,W.createElement(ae.Z,{onClose:f,"aria-labelledby":"customized-dialog-title",open:n.props.open,maxWidth:"xs",fullWidth:"true"},W.createElement(B.Z,{position:"static",elevation:1},W.createElement(We.Z,null,W.createElement("div",{className:"absolute right-0"},W.createElement(re.Z,{onClick:f,edge:"start",color:"inherit","aria-label":"close"},W.createElement(oe.Z,null))),W.createElement(H.Z,{variant:"subtitle1",color:"inherit"},"rename"===n.type?t("RENAME"):t("MOVE_FILE")))),W.createElement(He,{dividers:!0},W.createElement("div",null,"rename"===n.type?W.createElement(Ye.Z,{error:!!a.titleError,name:"title",id:"title",label:t("TITLE"),className:"mt-8 mb-16 w-full",value:i,onChange:function(e){var t=e.target.value;u({fileError:"",titleError:"",descError:"",nameError:""}),c.find(function(e){return e.title==t})&&u(function(e){return Be(Be({},e),{},{titleError:"should have unique name !"})}),r(t)},variant:"outlined",helperText:a.titleError}):W.createElement(Ye.Z,{id:"folder",className:"mt-8 mb-16 w-full",value:d,disabled:!0,variant:"outlined"})),"rename"!==n.type&&e&&!!e.length&&W.createElement("div",null,W.createElement(ze.ZP,{options:e,style:{width:"100%"},className:"mb-24",getOptionLabel:function(e){return e.path},renderOption:function(e,t){t.selected;return W.createElement(W.Fragment,null,e.path)},renderInput:function(e){return W.createElement(Ye.Z,V()({},e,{label:t("PATH")}))},onChange:function(e,t){return p(t)},variant:"outlined"}))),W.createElement(Je,{className:"p-16"},W.createElement(q.Z,{autoFocus:!0,onClick:function(){var a=n.data.type,e=n.data.mainId,e=(n.data.folder_relative_path,("folder"==a?(0,te.qb):"photo"==a?(0,te.tw):"video"==a?(0,te.zw):(0,te.$4))(e)),r={},r="rename"===n.type?"folder"==a?{name:i,parent:n.data.parent}:{title:i}:"folder"==a?{name:i,parent:null!=m&&m.id?m.id:null}:{title:i,folder:null!=m&&m.id?m.id:null};(0,be.k)(e,r,function(e){var t,n;null===(t=(0,Q.Fc)().extra)||void 0===t||null===(n=t.profile)||void 0===n||n.company;"folder"==a&&o(Ue.L0(s.id)),console.log({folderPath11:l}),1<l.length&&o(Ue.a9(s.id,r)),"folder"!=a&&o("photo"==a?Ue.wP(s.id):"video"==a?Ue.WY(s.id):Ue.qi(s.id)),o(Ue.xh(s.id)),f()},function(e){return console.log(e)},be.Y.PUT,(0,Q.XW)())},variant:"contained",color:"secondary"},"rename"===n.type?t("RENAME"):t("MOVE"))))}var i=n(39203),$e=n(7420),Ke=(0,s.Z)(function(e){return{root:{transform:"translateZ(0px)",flexGrow:1},exampleWrapper:{position:"relative",marginTop:e.spacing(3),height:380},radioGroup:{margin:e.spacing(1,0)},speedDial:{position:"absolute","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}},fab:{"&:hover":{backgroundColor:"#295da2"}}}}),qe=[{icon:W.createElement(i.Z,null),name:"File"},{icon:W.createElement($e.Z,null),name:"Folder"}];function Qe(t){function n(){o(!1)}var a=Ke(),e=W.useState(!1),r=U()(e,2),e=r[0],o=r[1];return W.createElement("div",{className:(0,D.Z)(a.root,"speeddial-btn")},W.createElement("div",{className:a.exampleWrapper},W.createElement(O.Z,{ariaLabel:"SpeedDial example",className:(0,D.Z)(a.speedDial,"custom-float-btn file-manage-btn"),icon:W.createElement(T.Z,null),onClose:n,onOpen:function(){o(!0)},open:e,direction:"up"},qe.map(function(e){return W.createElement(C.Z,{className:a.fab,key:e.name,icon:e.icon,tooltipTitle:e.name,tooltipOpen:!0,onClick:function(){t.callAction(e.name),n()}})}))))}var et=n(80312),tt=n(53742),nt=(0,s.Z)(function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}});function at(e){var t=e.open,n=e.setOpen,a=e.text,e=nt();return W.createElement("div",{className:(0,D.Z)(e.root,"mt-8")},W.createElement(tt.Z,{in:t},W.createElement(et.Z,{variant:"outlined",severity:"warning",action:W.createElement(re.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){n(!1)}},W.createElement(oe.Z,{fontSize:"inherit"}))},a)))}var rt=n(59415),v=n(45559),ot=n.n(v);function lt(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ct(){return{rootFiles:[],allFiles:[],photos:[],videos:[],documents:[],files:[],folders:[],searchText:"",folderPath:[""],isUploadingFiles:!1,moveFileDialog:{type:"moveFile",props:{open:!1},data:{}},allFolderPaths:[],differenceFiles:[],updatedFolderValues:{}}}function st(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;return e.map(function(e,t){return it(it({},e),{},{mainId:e.id,type:n,size:function(e,t){var n=1<arguments.length&&void 0!==t?t:2;return 0===e?"0 Bytes":(t=n<0?0:n,n=Math.floor(Math.log(e)/Math.log(1024)),"".concat(parseFloat((e/Math.pow(1024,n)).toFixed(t))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]))}(e.size)})})}function ut(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return[].concat(me()(t),me()(e)).reduce(function(e,t){return e.find(function(e){return e.mainId===t.mainId&&e.type===t.type})?e:e.concat([t])},[])}function dt(e,n,t){var a=2<arguments.length&&void 0!==t?t:"ASC";return e.sort(function(e,t){return"ASC"===a?e[n]>t[n]?1:e[n]<t[n]?-1:0:e[n]>t[n]?-1:e[n]<t[n]?1:0})}function mt(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(e,t){return it(it({},e),{},{id:t})})}function pt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;return e.filter(function(e){return e.type!=t})}function ft(e,t){for(var n=0;n<t.length;n++)if("object"===ot()(t[n]))return t[n].id===e}i=(0,ye.UY)({files:function(){var t,n,e,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ct(),s=1<arguments.length?arguments[1]:void 0;switch(s.type){case Ue.ci:return it(it({},c),{},{allFiles:mt(s.payload)});case Ue.oi:return it(it({},c),{},{isUploadingFiles:!1,photos:s.payload,rootFiles:mt(dt(ut(pt(c.rootFiles,"photo"),st(s.payload,"photo")),"title"))});case Ue.XM:return it(it({},c),{},{isUploadingFiles:!1,videos:s.payload,rootFiles:mt(dt(ut(pt(c.rootFiles,"video"),st(s.payload,"video")),"title"))});case Ue.pF:return it(it({},c),{},{isUploadingFiles:!1,documents:s.payload,rootFiles:mt(dt(ut(pt(c.rootFiles,"document"),st(s.payload,"document")),"title"))});case Ue.Fs:return it(it({},c),{},{isUploadingFiles:!1,allFolderPaths:s.payload});case Ue.Hz:var a=c.folderPath;return it(it({},c),{},{isUploadingFiles:!1,folders:a[a.length-1]?c.folders:st(s.payload,"folder"),rootFolders:s.payload});case Ue.TF:return it(it({},c),{},{searchText:s.searchText});case Ue.i8:var u=[];c.folderPath.map(function(e){var t,n,a,r,o,l,i;"object"===ot()(e)&&"id"in e&&(u=s.payload.id!==e.id?(o=c.folderPath,l=s.currentFiles,i=[],l.map(function(e){ft(e.folder,o)&&i.push(e)}),function(e,t){for(var n=0;n<t.length;n++)if("object"===ot()(t[n])&&t[n].folder===e)return!0}(e.id,l=i)?(t=[],n=[],a=[],r={photo:[],video:[],document:[]},l.map(function(e){"photo"===e.type&&(t.push(e),r=it(it({},r),{},{photo:t})),"video"===e.type&&(n.push(e),r=it(it({},r),{},{video:n})),"document"===e.type&&(a.push(e),r=it(it({},r),{},{document:a}))}),l=it(it({},e),{},{media:r}),[].concat(me()(u),[l])):[].concat(me()(u),[e])):[].concat(me()(u),[e]))});var r=[[""]].concat(me()(u),[s.payload]);return it(it({},c),{},{folderPath:r,folders:st(s.payload.folders,"folder"),photos:s.payload.media.photo,files:mt(dt(ut([],[].concat(me()(st(s.payload.media.photo,"photo")),me()(st(s.payload.media.video,"video")),me()(st(s.payload.media.document,"document")))),"title"))});case Ue.Jm:var r=s.payload.media.photo.concat(s.payload.media.document,s.payload.media.video),o=(o=c.files,e=r,o.filter(function(t){return!e.some(function(e){return e.id===t.mainId})})),l=[];return c.folderPath.map(function(e){var t,n;l="object"===ot()(e)&&"id"in e?s.payload.id===e.id?[].concat(me()(l),[s.payload]):(n={},n=ft(s.payload.id,e.folders)?(t=[],e.folders.map(function(e){t=e.id===s.payload.id?[].concat(me()(t),[s.payload]):[].concat(me()(t),[e])}),it(it({},e),{},{folders:t})):it({},e),[].concat(me()(l),[n])):[].concat(me()(l),[e])}),console.log("files???????????????????",l),s.payload.media?it(it({},c),{},{folderPath:l,differenceFiles:o,updatedFolderValues:s.updatedFolderValues,folders:st(s.payload.folders,"folder"),files:mt(dt(ut([],[].concat(me()(st(s.payload.media.photo,"photo")),me()(st(s.payload.media.video,"video")),me()(st(s.payload.media.document,"document")))),"title"))}):it(it({},c),{},{folders:st(s.payload.folders,"folder"),files:mt(dt(ut([],[].concat(me()(st(c.photos,"photo")),me()(st(c.videos,"video")),me()(st(c.documents,"document")))),"title"))});case Ue.Kx:var i,d=[];return s.payload.map(function(n){var e,a;d="object"===ot()(n)&&"id"in n&&n.id===c.updatedFolderValues.folder?(a=n.media,c.differenceFiles.map(function(e){var t=Object.assign(e,{folder:n.id});"photo"===e.type&&(a=it(it({},a),{},{photo:[].concat(me()(a.photo),[t])})),"video"===e.type&&(a=it(it({},a),{},{video:[].concat(me()(a.video),[t])})),"document"===e.type&&(a=it(it({},a),{},{document:[].concat(me()(a.document),[t])}))}),e=it(it({},n),{},{media:a}),[].concat(me()(d),[e])):[].concat(me()(d),[n])}),o=0<c.differenceFiles.length?(i=d[d.length-1],d):(i=s.payload[s.payload.length-1],s.payload),console.log("files???????????????????",o),console.log("files???????????????????",i),it(it({},c),{},{folderPath:me()(o),photos:null!==i&&void 0!==i&&i.media?i.media.photo:[],files:null!==i&&void 0!==i&&i.media?mt(dt(ut([],[].concat(me()(st(i.media.photo,"photo")),me()(st(i.media.video,"video")),me()(st(i.media.document,"document")))),"title")):mt(dt(ut([],[].concat(me()(st(c.photos,"photo")),me()(st(c.videos,"video")),me()(st(c.documents,"document")))),"title")),folders:null!==i&&void 0!==i&&i.folders?st(i.folders,"folder"):st(c.rootFolders,"folder")});case Ue.ZH:var m=c.folderPath;m.pop();var p=m[m.length-1];return it(it({},c),{},{folderPath:m,photos:null!=p&&p.media?p.media.photo:[],files:null!=p&&p.media?mt(dt(ut(c.files,[].concat(me()(st(p.media.photo,"photo")),me()(st(p.media.video,"video")),me()(st(p.media.document,"document")))),"title")):mt(dt(ut(c.files,[].concat(me()(st(c.photos,"photo")),me()(st(c.videos,"video")),me()(st(c.documents,"document")))),"title")),folders:null!=p&&p.folders?st(p.folders,"folder"):st(c.rootFolders,"folder")});case Ue.MH:return it(it({},c),{},{isUploadingFiles:s.payload});case Ue.tq:return m=s.payload.fileType,p=c,t=s.payload.id,n=s.payload.deleteId,s.payload.selectedItem,it(it({},p),{},"folder"==m?{allFiles:mt(dt(p.allFiles.filter(function(e){return e.id!=t}),"title")),folders:p.folders.filter(function(e){return e.path!=n}),files:p.files.filter(function(e){return!e.folder_relative_path.includes(n)}),photos:it(it({},p.photos),{},{results:p.photos.results.filter(function(e){return!e.folder_relative_path.includes(n)})}),videos:it(it({},p.videos),{},{results:p.videos.results.filter(function(e){return!e.folder_relative_path.includes(n)})}),documents:it(it({},p.documents),{},{results:p.documents.results.filter(function(e){return!e.folder_relative_path.includes(n)})})}:"photo"==m?{allFiles:mt(dt(p.allFiles.filter(function(e){return e.id!=t}),"title")),photos:it(it({},p.photos),{},{results:p.photos.results.filter(function(e){return e.id!=n})}),files:p.files.filter(function(e){return e.mainId!=n})}:"video"==m?{allFiles:mt(dt(p.allFiles.filter(function(e){return e.id!=t}),"title")),videos:it(it({},p.videos),{},{results:p.videos.results.filter(function(e){return e.id!=n})}),files:p.files.filter(function(e){return e.mainId!=n})}:{allFiles:mt(dt(p.allFiles.filter(function(e){return e.id!=t}),"title")),documents:it(it({},p.documents),{},{results:p.documents.results.filter(function(e){return e.id!=n})}),files:p.files.filter(function(e){return e.mainId!=n})});case Ue.x_:return ct();case Ue.$g:return it(it({},c),{},{moveFileDialog:{type:"moveFile",props:{open:!0},data:s.payload}});case Ue.Mp:return it(it({},c),{},{moveFileDialog:{type:"moveFile",props:{open:!1},data:{}}});case Ue.p5:return it(it({},c),{},{moveFileDialog:{type:"rename",props:{open:!0},data:s.payload}});case Ue.MY:return it(it({},c),{},{moveFileDialog:{type:"rename",props:{open:!1},data:{}}});default:return c}},selectedItemId:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length?arguments[1]:void 0;return t.type!==Ue.iS?e:t.payload}});function gt(){return W.createElement("div",{className:"flex items-center h-full p-12"},W.createElement(P.Z,null,"folder"),W.createElement(H.Z,{variant:"h6",className:"mx-12"},"File Manager"))}var vt=n(82159),ht=n(96569),Et=n(73772),yt=n(88325);function bt(){return W.createElement(vt.Z,{component:"nav"},W.createElement(ht.Z,{button:!0,dense:!0},W.createElement(Et.Z,{className:"min-w-40"},W.createElement(P.Z,{className:"text-20"},"folder")),W.createElement(yt.Z,{primary:"My Files"})),W.createElement(ht.Z,{button:!0,dense:!0},W.createElement(Et.Z,{className:"min-w-40"},W.createElement(P.Z,{className:"text-20"},"star")),W.createElement(yt.Z,{primary:"Starred"})),W.createElement(ht.Z,{button:!0,dense:!0},W.createElement(Et.Z,{className:"min-w-40"},W.createElement(P.Z,{className:"text-20"},"folder_shared")),W.createElement(yt.Z,{primary:"Sharred with me"})),W.createElement(ht.Z,{button:!0,dense:!0},W.createElement(Et.Z,{className:"min-w-40"},W.createElement(P.Z,{className:"text-20"},"access_time")),W.createElement(yt.Z,{primary:"Recent"})),W.createElement(ht.Z,{button:!0,dense:!0},W.createElement(Et.Z,{className:"min-w-40"},W.createElement(P.Z,{className:"text-20"},"not_interested")),W.createElement(yt.Z,{primary:"Offline"})))}var xt=n(78997),wt=n(41713),Ot=n(49073),Pt=n(3572),Dt=n(73430),Nt=n(84798),_t=n(90997),Zt=n(28595),kt=n(2772),v=n(13199),jt=n.n(v);function At(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?At(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Tt=(0,o.ZP)(function(){return Promise.resolve().then(n.bind(n,73430))}),Ct=(0,s.Z)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},icon:{color:"rgba(255, 255, 255, 0.54)"}}});function Ft(e){function n(e,t){e.preventDefault(),e.stopPropagation(),r.current.toggleRightSidebar(),c(Ue.iM(t))}var a=e.tileData,r=e.pageLayout,o=e.handleDelete,l=e.setProgress,i=(0,$.$)("filemanaer_project").t,c=(0,J.I0)(),e=((0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),Ct()),t=[{name:"DELETE",icon:W.createElement(P.Z,null,"delete"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),o(t)}},{name:"DOWNLOAD",icon:W.createElement(P.Z,null,"cloud_download"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),s(t)}},{name:"MOVE_TO",icon:W.createElement(P.Z,null,"transform"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),c(Ue.iD(t))}},{name:"VIEW",icon:W.createElement(P.Z,null,"info"),handleClickEvent:function(e,t){n(e,t)}},{name:"RENAME",icon:W.createElement(P.Z,null,"edit"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),c(Ue.bZ(t))}}],s=function(t){var e=0,e="folder"==t.type?me()(a).findIndex(function(e){return e.path==t.path}):me()(a).findIndex(function(e){return e.mainId==t.mainId&&e.type==t.type}),n=a[e];n&&(l(0),c(Ue.MJ(!0)),e=("photo"==n.type?(0,te.K$):"video"==n.type?(0,te.Pn):(0,te.sU))(n.mainId),(0,be.k)(e,{},function(e){var t=e.headers,e=e.data,e=btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},"")),e="data:".concat(t["content-type"].toLowerCase(),";base64,").concat(e);console.log({file:e}),window&&(console.log("listenning to flutterInAppWebViewPlatformReady"),console.log(window.flutter_inappwebview),"photo"==n.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(n.photo),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",n.photo)),"video"==n.type?(window.DownloadFiles&&window.DownloadFiles.postMessage(n.video),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",n.video)):(window.DownloadFiles&&window.DownloadFiles.postMessage(n.document),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",n.document))),jt().saveAs(e),c(Ue.MJ(!1))},function(e){c(Ue.MJ(!1)),l(0)},be.Y.GET,St(St({},(0,Q.XW)()),{},{responseType:"arraybuffer",onDownloadProgress:function(e){e=Math.round(100*e.loaded/e.total);l(e)}}),!0))};return W.createElement("div",{className:e.root},W.createElement(Nt.Z,{cellHeight:180,className:e.gridList},null!=a&&a.length?a.map(function(r){return W.createElement(_t.Z,{key:r.img,onClick:function(e){return n(e,r)}},"video"==r.type?W.createElement("div",{className:"soft-icon"},W.createElement("img",{className:"icon mr-8",src:kt.Q7})):"photo"==r.type?W.createElement("img",{src:r.photo,alt:r.title}):"pdf"==r.extension?W.createElement("div",{className:"soft-icon"},W.createElement("img",{className:"mr-8",src:kt.zn})):"mp3"==r.extension?W.createElement("div",{className:"soft-icon"},W.createElement("img",{className:"mr-8",src:kt.Y2})):"docx"==r.extension?W.createElement("div",{className:"soft-icon"},W.createElement("img",{className:"mr-8",src:kt.GC})):"xlsx"==r.extension?W.createElement("div",{className:"soft-icon"},W.createElement("img",{className:"mr-8",src:kt.L2})):"zip"==r.extension||"rar"==r.extension?W.createElement("div",{className:"soft-icon"}," ",W.createElement("img",{className:"icon mr-8",src:kt._})):"ppt"==r.extension||"pptx"==r.extension||"pptm"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.yn}):W.createElement("div",{className:"soft-icon"},W.createElement("img",{className:"mr-8",src:kt.aA})),W.createElement(Zt.Z,{className:"text-14",title:W.createElement("div",{className:"flex"},"pdf"==r.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.zn})):"video"==r.type?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.Q7})):"photo"==r.type?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.I_})):"mp3"==r.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.Y2})):"docx"==r.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.GC})):"xlsx"==r.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.L2})):"zip"==r.extension||"rar"==r.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"icon mr-8",src:kt._})):"ppt"==r.extension||"pptx"==r.extension||"pptm"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.yn}):W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"mr-8",src:kt.aA})),W.createElement("p",null," ",r.title)),actionIcon:W.createElement(Tt,{icon:W.createElement(re.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true"},W.createElement(Pt.Z,null)),outsideClick:!0},t.map(function(e){var t=e.name,n=e.icon,a=e.handleClickEvent;return W.createElement(wt.Z,{key:t,onClick:function(e){a(e,r)}},W.createElement(Et.Z,null,n),W.createElement(H.Z,{variant:"inherit"}," ",i(t)))}))}))}):W.createElement("div",null,W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},i("NO_FILES_MESSAGE"))),W.createElement("div",{className:"flex flex-1 mt-20 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h6"},i("CREATE_FILE_ADVICE"))))))}function It(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Lt=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose,e=l()(e,["children","classes","onClose"]);return W.createElement(E.Z,V()({disableTypography:!0,className:n.root},e),W.createElement(H.Z,{variant:"h6"},t),a?W.createElement(re.Z,{"aria-label":"close",className:n.closeButton,onClick:a},W.createElement(oe.Z,null)):null)}),Rt=(0,a.Z)(function(e){return{root:{padding:e.spacing(2),flexGrow:1}}})(r.Z),Gt=(0,s.Z)({typeIcon:{"&.folder:before":{content:"'folder'",color:"#FFB300"},"&.document:before":{content:"'insert_drive_file'",color:"#1565C0"},"&.spreadsheet:before":{content:"'insert_chart'",color:"#4CAF50"}}}),Yt=(0,s.Z)(function(e){return{root:{borderRadius:"5%",backgroundColor:"#fff",boxShadow:"0 3px 6px #00000029"}}});function zt(e){var n=(0,$.$)("filemanaer_project").t,r=(0,J.I0)(),t=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.folders}),a=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.files}),o=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.rootFiles}),l=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),i=(0,J.v9)(function(e){return e.fileManagerAppProject.files.folderPath}),c=i[i.length-1],s=((0,J.v9)(function(e){return e.fileManagerAppProject.selectedItemId}),(0,J.v9)(function(e){return e.fileManagerAppProject.files.searchText})),u=(0,W.useState)([]),d=((f=U()(u,2))[0],f[1],(0,W.useState)([])),m=(u=U()(d,2))[0],p=u[1],f=(0,W.useState)(!1),u=(d=U()(f,2))[0],g=d[1],f=(0,W.useState)(""),v=(d=U()(f,2))[0],h=d[1],E=(Gt(),Yt()),y=(0,X.UO)();function b(){var e;return null==w||null===(e=w.extra)||void 0===e?void 0:e.profile.role}function x(){var e;console.log({currentFolderPath:c,rootFiles:o}),""==c&&Array.isArray(o)?p(o):Array.isArray(a)?(e=a.filter(function(e){return e.folder==c.id}),console.log({tempFiles:e}),p(e)):p([])}console.log("files???????????????????files",a),console.log("files???????????????????currentFiles",m),console.log("files???????????????????allFiles",l);var w=(0,Q.Fc)(),f=W.useState(null),f=(d=U()(f,2))[0];function O(e){g(!0),h(e)}return d[1],Boolean(f),(0,W.useEffect)(function(){x()},[a,t,a.photos,a.videos,a.documents,e.viewTable,o]),(0,W.useEffect)(function(){r(Ue.iM("")),x()},[c]),(0,W.useEffect)(function(){var e,t,n,a;s&&s.length?(t=l,n=s,a=Object.keys(t).map(function(e){return t[e]}),e=0===n.length?a:Ot.Z.filterArrayByString(a,n),r(Ue.Pr(e))):x()},[s]),(0,W.useEffect)(function(){var e=null==t?void 0:t.filter(function(e){return e.path.includes(c)&&e.path.split("/").length<=i.length&&!i.includes(e.path)});e&&(e=e.map(function(e){var t=(t=e.path.split("/"))[t.length-1];return Mt(Mt({},e),{},{title:t,type:"folder"})}),r(Ue.Pr([].concat(me()(e),me()(a.filter(function(e){return e.folder_relative_path==c}))))))},[c]),0===l.length&&s?W.createElement("div",null,W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},n("NO_FILES_MESSAGE"))),W.createElement("div",{className:"flex flex-1 mt-20 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h6"},n("CREATE_FILE_ADVICE")))):W.createElement("div",{className:"file-folder-grid px-24 mt-12"},!(null==t||!t.length)&&W.createElement(W.Fragment,null," ",W.createElement(H.Z,{variant:"subtitle1",className:"font-400 uppercase text-gray-600 mb-12"},n("FOLDERS")),W.createElement(xt.Z,{container:!0,spacing:12,className:"folder-grid"},null==t?void 0:t.map(function(t){return W.createElement(xt.Z,{className:"px-6 mb-20",item:!0,xs:12,sm:6,md:4,xl:3,onClick:function(){return r(Ue.Qc(t,m))}},W.createElement(ht.Z,{className:(0,D.Z)(E.root,"custom-box-shadow")},W.createElement(Et.Z,null,W.createElement($e.Z,{className:"text-custom-primary"})),W.createElement(yt.Z,{primary:t.name,secondary:null}),("o"==b()||"d"==b())&&W.createElement("div",{className:"actions-dropdown file-folder-action-dropdown"},W.createElement(Dt.default,{icon:W.createElement(re.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true"},W.createElement(Pt.Z,null)),outsideClick:!0},W.createElement(wt.Z,{onClick:function(e){e.stopPropagation(),O(t)}},W.createElement(Et.Z,null,W.createElement(P.Z,null,"delete")),W.createElement(H.Z,{variant:"inherit"}," ",n("DELETE"))),W.createElement(wt.Z,{onClick:function(e){e.stopPropagation(),r(Ue.bZ(t))}},W.createElement(Et.Z,null,W.createElement(P.Z,null,"edit")),W.createElement(H.Z,{variant:"inherit"}," ",n("RENAME"))),W.createElement(wt.Z,{onClick:function(e){e.preventDefault(),e.stopPropagation(),r(Ue.iD(t))}},W.createElement(Et.Z,null,W.createElement(P.Z,null,"transform")),W.createElement(H.Z,{variant:"inherit"}," ",n("MOVE_TO")))))))}))),0<m.length&&W.createElement(W.Fragment,null,W.createElement(H.Z,{variant:"subtitle1",className:"font-400 uppercase text-gray-600 mb-12"},n("FILES")),W.createElement(xt.Z,{container:!0,spacing:12,className:"file-grid"},W.createElement(Ft,V()({tileData:m},e,{handleDelete:O})))),0===m.length&&0===t.length&&W.createElement("div",null,W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},n("NO_FILES_MESSAGE"))),W.createElement("div",{className:"flex flex-1 mt-20 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h6"},n("CREATE_FILE_ADVICE")))),W.createElement(ae.Z,{open:u,"aria-labelledby":"customized-dialog-title",maxWidth:"xs",fullWidth:"true"},W.createElement(Lt,{id:"customized-dialog-title",onClose:function(){g(!1)}},"Remove?"),W.createElement(Rt,{dividers:!0},W.createElement(H.Z,{className:"text-lg"},"Are you sure that you want to delete this?"),W.createElement("div",null,W.createElement("div",{className:"flex mt-24 justify-end"},W.createElement(q.Z,{onClick:function(){var e,t,n=v,a=(null===(e=(0,Q.Fc)().extra)||void 0===e||null===(t=e.profile)||void 0===t||t.company,n.type),n=(n.mainId,"folder"==a?(0,te.ZS)(n.mainId||n.id):("photo"==a?(0,te.zu):"video"==a?(0,te.A9):(0,te.XL))(n.mainId));(0,be.k)(n,{},function(e){"folder"==a&&r(Ue.L0(y.id)),1<i.length&&r(Ue.a9()),"folder"!=a&&r("photo"==a?Ue.wP(y.id):"video"==a?Ue.WY(y.id):Ue.qi(y.id)),r(Ue.xh(y.id))},function(e){return console.log(e)},be.Y.DELETE,(0,Q.XW)()),g(!1)},variant:"contained",className:"justify-start d-inline-block mb-20 mr-10 bg-blue-500 text-white"},"Yes"),W.createElement(q.Z,{onClick:function(){g(!1)},variant:"contained",className:"justify-start d-inline-block mb-20 bg-gray-500 text-white"},"No"))))))}var Wt=n(52108),Ut=n(19684),Vt=n(24918),Bt=n(55572),Ht=n(45201);function Jt(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var $t=(0,o.ZP)(function(){return Promise.resolve().then(n.bind(n,73430))}),Kt=(0,s.Z)({typeIcon:{"&.folder:before":{content:"'folder'",color:"#FFB300"},"&.document:before":{content:"'insert_drive_file'",color:"#1565C0"},"&.spreadsheet:before":{content:"'insert_chart'",color:"#4CAF50"}}});function qt(a){function r(){var e;""==u&&Array.isArray(i)?(e=t||[],l(Ue.Pr([].concat(me()(e),me()(i))))):l(Ue.Pr([].concat(me()(t),me()(n.filter(function(e){return e.folder==u.mainId})))))}var o=(0,$.$)("filemanaer_project").t,l=(0,J.I0)(),t=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.folders}),n=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.files}),i=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.rootFiles}),c=(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),s=(0,J.v9)(function(e){return e.fileManagerAppProject.files.folderPath}),u=s[s.length-1],d=(0,J.v9)(function(e){return e.fileManagerAppProject.selectedItemId}),m=(0,J.v9)(function(e){return e.fileManagerAppProject.files.searchText}),p=(0,W.useRef)(null),f=Kt(),g=(0,X.UO)(),v=[{name:"DELETE",icon:W.createElement(P.Z,null,"delete"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),E(t)}},{name:"DOWNLOAD",icon:W.createElement(P.Z,null,"cloud_download"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),y(t)}},{name:"MOVE_TO",icon:W.createElement(P.Z,null,"transform"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),l(Ue.iD(t))}},{name:"VIEW",icon:W.createElement(P.Z,null,"info"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),a.pageLayout.current.toggleRightSidebar(),l(Ue.iM(t.id))}},{name:"RENAME",icon:W.createElement(P.Z,null,"edit"),handleClickEvent:function(e,t){e.preventDefault(),e.stopPropagation(),l(Ue.bZ(t))}}],e=W.useState(null),h=U()(e,2),e=h[0];h[1],Boolean(e),(0,W.useEffect)(function(){r()},[n,t,n.photos,n.videos,n.documents]),(0,W.useEffect)(function(){var e,t,n,a;m&&m.length?(t=c,n=m,a=Object.keys(t).map(function(e){return t[e]}),e=0===n.length?a:Ot.Z.filterArrayByString(a,n),l(Ue.Pr(e))):r()},[m]),(0,W.useEffect)(function(){l(Ue.iM("")),r()},[u]);var E=function(e){var t,n=e,a=(null===(e=(0,Q.Fc)().extra)||void 0===e||null===(t=e.profile)||void 0===t||t.company,n.type),n=(n.mainId,"folder"==a?(0,te.ZS)(n.mainId||n.id):("photo"==a?(0,te.zu):"video"==a?(0,te.A9):(0,te.XL))(n.mainId));(0,be.k)(n,{},function(e){"folder"==a&&l(Ue.L0(g.id)),1<s.length&&l(Ue.a9()),"folder"!=a&&l("photo"==a?Ue.wP(g.id):"video"==a?Ue.WY(g.id):Ue.qi(g.id)),l(Ue.xh(g.id))},function(e){return console.log(e)},be.Y.DELETE,(0,Q.XW)())},y=function(t){var e=0,e="folder"==t.type?me()(c).findIndex(function(e){return e.path==t.path}):me()(c).findIndex(function(e){return e.mainId==t.mainId&&e.type==t.type}),n=c[e];console.log("tile??????????????????????????",n),n&&(console.log("tile??????????????????????????",n),a.setProgress(0),l(Ue.MJ(!0)),e=("photo"==n.type?(0,te.K$):"video"==n.type?(0,te.Pn):(0,te.sU))(n.mainId),(0,be.k)(e,{},function(e){var t=e.headers,e=e.data,e=btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},"")),e="data:".concat(t["content-type"].toLowerCase(),";base64,").concat(e);window&&(console.log("listenning to flutterInAppWebViewPlatformReady"),console.log(window.flutter_inappwebview),"photo"==n.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(n.photo),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",n.photo)),"video"==n.type?(window.DownloadFiles&&window.DownloadFiles.postMessage(n.video),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",n.video)):(window.DownloadFiles&&window.DownloadFiles.postMessage(n.document),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",n.document))),console.log({file:e}),jt().saveAs(e),l(Ue.MJ(!1))},function(e){l(Ue.MJ(!1)),a.setProgress(0)},be.Y.GET,Xt(Xt({},(0,Q.XW)()),{},{responseType:"arraybuffer",onDownloadProgress:function(e){e=Math.round(100*e.loaded/e.total);a.setProgress(e)}}),!0))};return 0===c.length&&m?W.createElement("div",null,W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},o("NO_FILES_MESSAGE"))),W.createElement("div",{className:"flex flex-1 mt-20 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h6"},o("CREATE_FILE_ADVICE")))):W.createElement("div",{className:"file-folder-grid px-20"},W.createElement(ee.Z,{animation:"transition.slideUpIn",delay:300},W.createElement(Wt.Z,{className:"bg-white rounded table-shadow"},(""!=u||!!Object.entries(c).length)&&W.createElement(Ut.Z,null,W.createElement(Vt.Z,null,W.createElement(Bt.Z,{className:"max-w-64 w-64 p-0 text-center"}," "),W.createElement(Bt.Z,null,o("NAME")),W.createElement(Bt.Z,{className:"hidden sm:table-cell"},o("TYPE")),W.createElement(Bt.Z,{className:"hidden sm:table-cell"},o("OWNER")),W.createElement(Bt.Z,{className:"text-center hidden sm:table-cell"},o("SIZE")),W.createElement(Bt.Z,{className:"hidden sm:table-cell"},o("MODIFIED")),W.createElement(Bt.Z,null,o("ACTIONS")))),W.createElement(Ht.Z,null,""!=u&&W.createElement(Vt.Z,null,W.createElement(Bt.Z,{onClick:function(){return l(Ue.ic())}},W.createElement(re.Z,{"aria-label":"back",size:"small"},W.createElement(P.Z,null,"more_horiz"))),W.createElement(Bt.Z,null),W.createElement(Bt.Z,{className:"hidden sm:table-cell"}),W.createElement(Bt.Z,{className:"hidden sm:table-cell"}),W.createElement(Bt.Z,{className:"hidden sm:table-cell"}),W.createElement(Bt.Z,{className:"hidden sm:table-cell"}),W.createElement(Bt.Z,null),W.createElement(Bt.Z,null),W.createElement(Bt.Z,null,o("ACTIONS"))),Object.entries(c).map(function(e){var e=U()(e,2),r=(e[0],e[1]);return W.createElement(Vt.Z,{key:r.id,hover:!0,onClick:function(e){return"folder"==r.type?l(Ue.Qc(r)):l(Ue.iM(r))},selected:r.id===d,className:"cursor-pointer"},W.createElement(Bt.Z,{className:"max-w-64 w-64 p-0 text-center"},"video"==r.type?W.createElement("img",{className:"icon mr-8",src:kt.Q7}):"photo"==r.type?W.createElement("img",{className:"icon mr-8",src:kt.I_}):"folder"==r.type?W.createElement(P.Z,{className:(0,D.Z)(f.typeIcon,r.type)},"folder"):"pdf"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.zn}):"docx"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.GC}):"xlsx"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.L2}):"mp3"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.Y2}):"zip"==r.extension||"rar"==r.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"icon mr-8",src:kt._})):"ppt"==r.extension||"pptx"==r.extension||"pptm"==r.extension?W.createElement("img",{className:"icon mr-8",src:kt.yn}):W.createElement("img",{className:"icon mr-8",src:kt.aA})),W.createElement(Bt.Z,null,r.title||r.name),W.createElement(Bt.Z,{className:"hidden sm:table-cell"},r.type),W.createElement(Bt.Z,{className:"hidden sm:table-cell"},r.owner||"-"),W.createElement(Bt.Z,{className:"text-center hidden sm:table-cell"},""===r.size?"-":r.size),W.createElement(Bt.Z,{className:"hidden sm:table-cell"},r.date_last_modify?(e=r.date_last_modify,A()(e).format("MMMM Do YYYY, h:mm a")):"-"),W.createElement(Bt.Z,null,W.createElement("div",{className:"actions-dropdown"},W.createElement($t,{icon:W.createElement(re.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true"},W.createElement(Pt.Z,null)),ref:p,outsideClick:!0},v.map(function(e){var t=e.name,n=e.icon,a=e.handleClickEvent;return"DELETE"!=t?"folder"!=r.type?W.createElement(wt.Z,{key:t,onClick:function(e){a(e,r)}},W.createElement(Et.Z,null,n),W.createElement(H.Z,{variant:"inherit"}," ",o(t))):null:W.createElement(wt.Z,{key:t,onClick:function(e){a(e,r)}},W.createElement(Et.Z,null,n),W.createElement(H.Z,{variant:"inherit"}," ",o(t)))})))))})))),""==u&&!Object.entries(c).length&&W.createElement("div",null,W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},o("NO_FILES_MESSAGE"))),W.createElement("div",{className:"flex flex-1 mt-20 items-center justify-center h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h6"},o("CREATE_FILE_ADVICE")))))}var Qt=n(97642),en=n(43153);function tn(e){e.setProgress;var t=e.pageLayout,n=(0,J.I0)(),a=((0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.folders}),(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),(0,J.v9)(function(e){return e.fileManagerAppProject.selectedItemId})),r=(0,W.useState)(!1),o=U()(r,2),e=o[0],l=o[1],r=(0,W.useState)(!1),r=(o=U()(r,2))[0],i=o[1],c=(0,J.v9)(function(e){return e.fileManagerAppProject.files.folderPath}),s=(0,X.UO)();return a?("photo"==a.type?a.photo:"video"==a.type?a.video:a.document,W.createElement(W.Fragment,null,W.createElement(Qt.default,{text:"Are you sure want to delete ?",isOpenDeleteDialog:e,colseDeleteFileDialog:u,onYes:function(){s.id;var t=a.type,e=(a.mainId,"folder"==t?(0,te.ZS)(a.mainId||a.id):("photo"==t?(0,te.zu):"video"==t?(0,te.A9):(0,te.XL))(a.mainId));(0,be.k)(e,{},function(e){1<c.length&&n(Ue.a9(s.id)),"folder"!=t&&n("photo"==t?Ue.wP(s.id):"video"==t?Ue.WY(s.id):Ue.qi(s.id)),n(Ue.xh(s.id)),n(Ue.iM("")),u()},function(e){return console.log(e)},be.Y.DELETE,(0,Q.XW)())},onNo:u}),W.createElement(en.default,{isOpenViewFile:r,closeViewFile:function(){return i(!1)}}),W.createElement("div",{className:"flex flex-col justify-between"},W.createElement("div",{className:"flex items-center justify-between border-b-1 px-20 py-6"},W.createElement(ee.Z,{delay:200},W.createElement(H.Z,{variant:"subtitle1",className:"font-700"},a.title)),W.createElement(re.Z,{edge:"start",color:"inherit","aria-label":"close",className:"close-icon list-view-icon",onClick:function(){t.current.toggleRightSidebar(),n(Ue.iM(""))}},W.createElement(oe.Z,null)))))):null;function u(){return l(!1)}}var nn=n(84677),an=n(66776),rn=n(57972);function on(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function ln(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?on(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var cn=(0,o.ZP)(function(){return Promise.resolve().then(n.bind(n,97642))}),sn=(0,o.ZP)(function(){return Promise.resolve().then(n.bind(n,43153))}),un=(0,s.Z)({table:{"& th":{padding:"16px 0"}},typeIcon:{"&.folder:before":{content:"'folder'",color:"#FFB300"},"&.document:before":{content:"'insert_drive_file'",color:"#1565C0"},"&.spreadsheet:before":{content:"'insert_chart'",color:"#4CAF50"}}});function dn(e){var t=e.setProgress,n=(0,$.$)("filemanaer_project").t,a=((0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),(0,J.v9)(function(e){return e.fileManagerAppProject.selectedItemId})),r=(0,J.v9)(function(e){return e.fileManagerAppProject.files.folderPath}),o=(0,J.I0)(),l=(0,W.useState)(!1),i=U()(l,2),c=i[0],s=i[1],u=(0,X.UO)(),d=(0,W.useState)(!1),e=(f=U()(d,2))[0],m=f[1],l=W.useState(!1),d=(i=U()(l,2))[0],p=i[1],f=un();return a?(l=function(e){return A()(e).format("MMMM Do YYYY, h:mm a")},i=function(e){return e||"-"},Boolean(d),W.createElement(W.Fragment,null,W.createElement(cn,{text:"Are you sure want to delete ?",isOpenDeleteDialog:c,colseDeleteFileDialog:g,onYes:function(){null===(e=(0,Q.Fc)().extra)||void 0===e||null===(n=e.profile)||void 0===n||n.company;var e,t=a.type,n=(a.mainId,"folder"==t?(0,te.ZS)(a.mainId||a.id):("photo"==t?(0,te.zu):"video"==t?(0,te.A9):(0,te.XL))(a.mainId));(0,be.k)(n,{},function(e){1<r.length&&o(Ue.a9(u.id)),"folder"!=t&&o("photo"==t?Ue.wP(u.id):"video"==t?Ue.WY(u.id):Ue.qi(u.id)),o(Ue.xh(u.id)),o(Ue.iM("")),g()},function(e){return console.log(e)},be.Y.DELETE,(0,Q.XW)())},onNo:g}),W.createElement(ee.Z,{animation:"transition.slideUpIn",delay:600},W.createElement("div",null,W.createElement("div",{className:"file-details p-24 border-b-1"},W.createElement("div",{className:"preview h-128 sm:h-256 file-icon flex items-center justify-center custom-pdf"},"photo"==a.type?W.createElement("img",{className:"h-128 sm:h-256 object-contain",src:a.photo}):"pdf"==a.extension?W.createElement(rn.Z,{height:256,width:270,file:a.document}):"video"==a.type?W.createElement("img",{className:"icon mr-8",src:kt.Q7}):"pdf"==a.extension?W.createElement("img",{className:"icon mr-8",src:kt.zn}):"docx"==a.extension?W.createElement("img",{className:"icon mr-8",src:kt.GC}):"xlsx"==a.extension?W.createElement("img",{className:"icon mr-8",src:kt.L2}):"mp3"==a.extension?W.createElement("img",{className:"icon mr-8",src:kt.Y2}):"zip"==a.extension||"rar"==a.extension?W.createElement("div",{className:"soft-icon-title"},W.createElement("img",{className:"icon mr-8",src:kt._})):"ppt"==a.extension||"pptx"==a.extension||"pptm"==a.extension?W.createElement("img",{className:"icon mr-8",src:kt.yn}):W.createElement("img",{className:"icon mr-8",src:kt.aA}))),W.createElement("div",{className:"px-10 py-12 border-b-1"},W.createElement(nn.Z,{className:"flex items-center actions-dropdown p-0 small"},W.createElement(wt.Z,{onClick:function(){var e;a&&(t(0),o(Ue.MJ(!0)),e=("photo"==a.type?(0,te.K$):"video"==a.type?(0,te.Pn):(0,te.sU))(a.mainId),(0,be.k)(e,{},function(e){e.headers;e=e.data,e=new File([e],"".concat(a.title,".").concat(a.extension));window&&(console.log("listenning to flutterInAppWebViewPlatformReady"),console.log(window.flutter_inappwebview),"photo"==a.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(a.photo),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",a.photo)),"video"==a.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(a.video),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",a.video)),"document"==a.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(a.document),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",a.document)),console.log("finish listenning to flutterInAppWebViewPlatformReady")),jt().saveAs(e),o(Ue.MJ(!1))},function(e){o(Ue.MJ(!1))},be.Y.GET,ln(ln({},(0,Q.XW)()),{},{responseType:"blob",onDownloadProgress:function(e){e=Math.round(100*e.loaded/e.total);t(e)}}),!0))}},W.createElement(P.Z,{className:"mr-8"},"cloud_download"),W.createElement(H.Z,{variant:"inherit"},n("DOWNLOAD"))),W.createElement(wt.Z,{onClick:function(){return s(!0)}},W.createElement(Et.Z,null,W.createElement(an.Z,{fontSize:"medium"})),W.createElement(H.Z,{variant:"inherit"},n("DELETE"))),W.createElement(wt.Z,{onClick:function(){return m(!0)}},W.createElement(Et.Z,null,W.createElement(P.Z,null,"visibility")),W.createElement(H.Z,{variant:"inherit"},n("VIEW"))))),W.createElement(sn,{isOpenViewFile:e,closeViewFile:function(e){m(!1),e.stopPropagation(),p(!1)},setProgress:t}),W.createElement("div",{className:"px-24 py-12 border-b-1"},W.createElement(H.Z,{variant:"subtitle2",className:"py-10 uppercase text-gray-500"},n("INFO")),W.createElement("table",{className:(0,D.Z)(f.table,"w-full text-justify")},W.createElement("tbody",null,W.createElement("tr",{className:"type"},W.createElement("th",null,n("TYPE")),W.createElement("td",null,i(a.type))),W.createElement("tr",{className:"size"},W.createElement("th",null,n("SIZE")),W.createElement("td",null,""===a.size?"-":a.size)),W.createElement("tr",{className:"location"},W.createElement("th",null,n("LOCATION")),W.createElement("td",null,i(a.location))),W.createElement("tr",{className:"owner"},W.createElement("th",null,n("OWNER")),W.createElement("td",null,i(a.owner))),W.createElement("tr",{className:"modified"},W.createElement("th",null,n("MODIFIED")),W.createElement("td",null,l(a.date_last_modify))),W.createElement("tr",{className:"opened"},W.createElement("th",null,n("OPENED")),W.createElement("td",null,i(a.opened))),W.createElement("tr",{className:"created"},W.createElement("th",null,n("CREATED")),W.createElement("td",null,l(a.date_create)))))))))):null;function g(){return s(!1)}}function mn(e){function n(n){var e=a.filter(function(e,t){return t<=n});console.log({newFolders:e}),o(Ue.H$(e))}var t=e.className,a=e.selected,r=(0,$.$)("filemanaer_project").t,o=(0,J.I0)();return W.createElement(H.Z,{className:t},a.map(function(e,t){e=e.name;return W.createElement("span",{key:t,className:"flex items-center"},0==t?W.createElement(q.Z,{onClick:function(){return n(t)}},r("MY_DRIVE")):W.createElement(q.Z,{onClick:function(){return n(t)}},e),a.length-1!==t&&W.createElement(P.Z,null,"chevron_right"))}))}function pn(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function fn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pn(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose,e=l()(e,["children","classes","onClose"]);return W.createElement(E.Z,V()({disableTypography:!0,className:n.root},e),W.createElement(H.Z,{variant:"h6"},t),a?W.createElement(re.Z,{"aria-label":"close",className:n.closeButton,onClick:a},W.createElement(oe.Z,null)):null)});var gn=(0,a.Z)(function(e){return{root:{padding:e.spacing(2)}}})(r.Z),vn=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)},rightSidebar:{"&.fileInfoSidebar":{backgroundColor:"#fff"}}}})(y.Z);var hn=(0,X.EN)((0,p.Z)("fileManagerAppProject",i)(function(e){function s(t){return Y(function(e){return fn(fn({},e),t)})}function r(){return R({fileError:"",titleError:"",descError:"",nameError:""})}var t=(0,$.$)("filemanaer_project").t,u=(0,J.I0)(),n=(0,J.v9)(function(e){return e.fileManagerAppProject.files.allFolderPaths}),a=(0,J.v9)(function(e){return e.fileManagerAppProject.files}),d=(0,J.v9)(function(e){return e.fileManagerAppProject.files.folderPath}),o=((0,J.v9)(function(e){return e.fileManagerAppProject.files.searchText}),(0,J.v9)(function(e){return e.fileManagerAppProject.files.isUploadingFiles})),l=((0,J.v9)(function(e){return e.chatApp.company}),(0,J.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),(0,J.v9)(function(e){return e.fileManagerAppProject.selectedItemId})),i=(0,J.v9)(function(e){return e.fuse.settings.mainTheme}),c=(0,W.useRef)(null),m=(0,W.useState)(!1),p=(w=U()(m,2))[0],f=w[1],g=(0,W.useState)(!1),v=(k=U()(g,2))[0],h=k[1],E=(0,W.useState)({file:null,fileType:null}),y=(S=U()(E,2))[0],b=S[1],x=(0,W.useState)(!1),w=(m=U()(x,2))[0],O=m[1],g=(0,W.useState)("folder"),P=(k=U()(g,2))[0],D=k[1],E=W.useState(0),x=(S=U()(E,2))[0],N=S[1],m=(0,W.useState)(""),_=(g=U()(m,2))[0],Z=g[1],k=(0,W.useState)(""),j=(E=U()(k,2))[0],A=E[1],S=(0,W.useState)(void 0),T=(m=U()(S,2))[0],C=m[1],g=(0,W.useState)(void 0),F=(k=U()(g,2))[0],I=k[1],E=W.useState(!1),m=(S=U()(E,2))[0],g=S[1],M=(null===(k=a.folders)||void 0===k||k.filter(function(e){return e.path==d[d.length-1]}),(0,J.v9)(function(e){return e.notesApp.project.projectDetail}),(0,X.UO)()),L=(0,Q.Fc)(),E=function(){var e;return null==L||null===(e=L.extra)||void 0===e?void 0:e.profile.role},S=(0,W.useState)({fileError:"",titleError:"",descError:"",nameError:"",apiError:""}),k=(a=U()(S,2))[0],R=a[1],S=(0,W.useState)({loadingPhotos:!1,loadingVideos:!1,loadingDocuments:!1,loadingFolders:!1}),G=(a=U()(S,2))[0],Y=a[1];(0,W.useEffect)(function(){A(d[d.length-1]),Z(d[d.length-1])},[d,p]),(0,W.useEffect)(function(){M&&u(Ue.bE(M.id,s))},[u,M]);var S=function(){var e=Le()(Re().mark(function e(){var t,a,n,r,o,l,i,c;return Re().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=v){e.next=37;break}if(h(!0),N(0),u(Ue.MJ(!0)),a=y.fileType,n=y.file,a||"file"!=P){e.next=7;break}return e.abrupt("return");case 7:if(z(),r=new FormData,o="image"==a?"photo":"video"==a?"video":"document","folder"!=P){e.next=14;break}e.t0={name:T,parent:null!=_&&_.id?_.id:null,is_public:!1},e.next=31;break;case 14:if(t={},e.t1=K(),e.t2=t,e.t3=o,"image"==a)return e.next=21,(0,Q.y6)(n);e.next=24;break;case 21:e.t4=e.sent,e.next=25;break;case 24:e.t4=n;case 25:e.t5=e.t4,(0,e.t1)(e.t2,e.t3,e.t5),K()(t,"title",T),K()(t,"description",F),K()(t,"folder",j?j.mainId||j.id:null),e.t0=t;case 31:if(l=e.t0,"folder"==P)r=l;else for(i in l)l[i]&&r.append(i,l[i]);c=("folder"==P?(0,te.ys):"image"==a?(0,te.Gr):"video"==a?(0,te.yS):(0,te.Pq))(M.id),(0,be.k)(c,r,function(e){var t,n=null===(t=(0,Q.Fc)().extra)||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.company;"folder"==P&&u(Ue.L0(M.id,s)),1<d.length?u(Ue.a9(n,s)):"folder"!=P&&u("image"==a?Ue.wP(M.id,s):"video"==a?Ue.WY(M.id,s):Ue.qi(M.id,s)),u(Ue.xh(M.id,s)),u(Ue.MJ(!1))},function(e){R({fileError:e.document?e.document[0]:"",titleError:e.title?e.title[0]:"",descError:e.description?e.description[0]:"",nameError:e.name?e.name[0]:"",apiError:e.detail||""}),u(Ue.MJ(!1)),N(0)},be.Y.POST,fn(fn({},(0,Q.XW)()),{},{onUploadProgress:function(e){e=Math.round(100*e.loaded/e.total);N(e)}})),h(!1),C("");case 37:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),z=function(){b({file:null,fileType:null}),C(void 0),A(""),I(void 0),R({fileError:"",titleError:"",descError:"",nameError:""}),f(!1)},a=W.createElement("div",{className:"flex flex-1 flex-col items-center justify-center h-full"},W.createElement(H.Z,{style:{height:"auto"},className:"text-20 mb-16",color:"textSecondary"},t("LOADING_FILES"),"..."),W.createElement(xe.Z,{className:"w-xs",color:"secondary"}));return G.loadingVideos||G.loadingPhotos||G.loadingFolders||G.loadingDocuments?a:W.createElement(W.Fragment,null,W.createElement(Ge.Z,{classes:{root:null!=l&&l.title?"fileInfoSidebar":"bg-red-500 fileInfoSidebar hide-sidebar",header:"pb-0 bg-white h-auto min-h-auto block",sidebarHeader:"",rightSidebar:"w-320"},header:W.createElement(W.Fragment,null,W.createElement(ne.Z,{theme:i},W.createElement("div",{className:"flex flex-1 dashboard-todo-header w-full"},W.createElement("div",{className:"project_list h-auto bg-dark-blue min-h-auto w-full p-16"},W.createElement(H.Z,{className:"sm:flex pt-4 pb-8 text-white mx-0 sm:mx-12",variant:"h6"},t("FILES")),W.createElement("div",{className:"flex flex-1 items-center justify-end"},W.createElement(ee.Z,{animation:"transition.slideRightIn",delay:300},W.createElement(q.Z,{onClick:function(e){return u(Te.Js())},className:"whitespace-no-wrap normal-case",variant:"contained",color:"secondary"},W.createElement("span",{className:"xs:hidden sm:flex"},"Guida")))))))),content:W.createElement(W.Fragment,null,W.createElement("div",{className:"flex flex-col flex-1 relative z-50 mt-10"},W.createElement("div",{className:"flex items-center justify-between left-icon-btn"},W.createElement(ee.Z,{delay:200},W.createElement("div",{className:"pl-24"},d&&W.createElement(mn,{selected:d,className:"flex flex-1 flex-wrap filemanager-breadcumb font-700 text-24 text-default mt-6"}))),W.createElement("div",{className:"flex two-btn rounded h-40 ml-10"},W.createElement(re.Z,{onClick:function(){return O(!1)},className:w?"":"text-default"},W.createElement(ie.G,{icon:le.szN})),W.createElement(re.Z,{onClick:function(){return O(!0)}},W.createElement(ie.G,{icon:le.Zrf,className:w?"text-default":""})))),W.createElement(at,{open:m,setOpen:g,text:k.apiError}),o&&W.createElement("div",{className:"linear-progress custom-color"},W.createElement(rt.Z,{progress:x}))),w?W.createElement(qt,{viewTable:w,pageLayout:c,setProgress:N}):W.createElement(zt,{viewTable:w,pageLayout:c,setProgress:N})),leftSidebarVariant:"temporary",leftSidebarHeader:W.createElement(gt,null),leftSidebarContent:W.createElement(bt,null),rightSidebarHeader:W.createElement(tn,{pageLayout:c,setProgress:N}),rightSidebarContent:W.createElement(dn,{setProgress:N}),ref:c,innerScroll:!0}),("o"==E()||"d"==E())&&W.createElement(ee.Z,{animation:"transition.expandIn",delay:600},W.createElement(Qe,{color:"secondary",className:" ltr:left-0 rtl:right-0 mx-16 z-999",callAction:function(e){return f(!0),D("Folder"==e?"folder":"file")}})),W.createElement(Xe,null),W.createElement(ae.Z,{onClose:z,"aria-labelledby":"customized-dialog-title",open:p,maxWidth:"xs",fullWidth:"true"},W.createElement(B.Z,{position:"static",className:"border-0",elevation:1},W.createElement(We.Z,null,W.createElement("div",{className:"absolute right-0"},W.createElement(re.Z,{onClick:z,edge:"start",color:"inherit","aria-label":"close"},W.createElement(oe.Z,null))),W.createElement(H.Z,{variant:"subtitle1",color:"inherit"},t("UPLOAD_FILE")))),W.createElement(gn,{dividers:!0},"folder"==P?W.createElement(W.Fragment,null,W.createElement("div",null,W.createElement(Ye.Z,{error:!!k.nameError,name:"folder",id:"folder",label:t("FOLDER"),className:"mt-8 mb-16 w-full",value:T,onChange:function(e){e=e.target.value;r(),C(e)},helperText:k.nameError,variant:"outlined"})),n&&!!n.length&&W.createElement("div",null,W.createElement(ze.ZP,{options:n,style:{width:"100%"},className:"mb-24",getOptionLabel:function(e){return e.path},renderOption:function(e,t){t.selected;return W.createElement(W.Fragment,null,e.path)},renderInput:function(e){return W.createElement(Ye.Z,V()({},e,{label:t("PATH")}))},onChange:function(e,t){Z(t)},variant:"outlined",defaultValue:_}))):W.createElement(W.Fragment,null,W.createElement("div",null,W.createElement(Ye.Z,{error:!!k.titleError,name:"title",id:"title",label:t("TITLE"),className:T?"mt-8 mb-16 w-full custom-label-up":"mt-8 mb-16 w-full",value:T,onChange:function(e){e=e.target.value;r(),C(e)},variant:"outlined",helperText:k.titleError})),W.createElement("div",null,W.createElement(Ye.Z,{error:!!k.fileError,type:"file",className:"mt-8 mb-16 w-full custom-fileinput",onChange:function(e){r();for(var t=e.target.files,n=0;n<t.length;n++){console.log(t[n]),T||((a=t[n].name.split(".")).pop(),C(a.join(" ")));var a=null===(a=t[n].type)||void 0===a?void 0:a.split("/")[0];b({file:t[n],fileType:a})}},variant:"outlined",helperText:k.fileError})),n&&!!n.length&&W.createElement("div",null,W.createElement(ze.ZP,{options:n,style:{width:"100%"},className:"mb-24",getOptionLabel:function(e){return e.path},renderOption:function(e,t){t.selected;return W.createElement(W.Fragment,null,e.path)},renderInput:function(e){return W.createElement(Ye.Z,V()({},e,{label:t("PATH")}))},onChange:function(e,t){A(t)},variant:"outlined",defaultValue:j})))),W.createElement(vn,{className:"p-16"},W.createElement(q.Z,{autoFocus:!0,disabled:!("folder"==P?null==T?void 0:T.length:(null==T?void 0:T.length)&&y.file),onClick:S,variant:"contained",color:"secondary"},t("folder"==P?"CREATE":"UPLOAD")))))})),v=n(26258),En=n(86926),yn=n(38932),bn=n(12707),xn=n(7074);function wn(t){var n=(0,J.I0)(),e=(0,J.v9)(function(e){return e.todoAppNote.todos.searchText}),a=(0,J.v9)(function(e){return e.fuse.settings.mainTheme}),r=(0,J.v9)(function(e){return e.notesApp.project.projectDetail});return W.createElement(ne.Z,{theme:a},W.createElement("div",{className:"flex flex-1 dashboard-todo-header w-full"},W.createElement("div",{className:"project_list h-auto bg-dark-blue min-h-auto w-full p-16"},W.createElement("div",null,W.createElement(H.Z,{className:"sm:flex pt-4 text-white mx-0 sm:mx-12",variant:"h6"},r.name),W.createElement(H.Z,{className:"sm:flex pb-8 text-white mx-0 sm:mx-12",variant:"p"},r.address)),W.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},W.createElement("div",{className:"flex items-center"},W.createElement(ee.Z,{animation:"transition.expandIn",delay:300},W.createElement(re.Z,{onClick:function(e){return t.pageLayout.current.toggleLeftSidebar()}},W.createElement(P.Z,{className:"text-32 text-white"},"filter_list")))),W.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},W.createElement(ne.Z,{theme:a},W.createElement(ee.Z,{animation:"transition.slideDownIn",delay:300},W.createElement(En.Z,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},W.createElement(P.Z,{color:"action"},"search"),W.createElement(yn.Z,{placeholder:"Cerca persone del team",className:"flex flex-1 mx-8",disableUnderline:!0,fullWidth:!0,value:e,inputProps:{"aria-label":"Search"},onChange:function(e){return n(xn.FD(e))}}))))),W.createElement(ee.Z,{animation:"transition.slideRightIn",delay:300},W.createElement(q.Z,{component:bn.rU,to:"/apps/e-commerce/products/new",className:"whitespace-no-wrap normal-case",variant:"contained",color:"secondary"},W.createElement("span",{className:"xs:hidden sm:flex"},"Info progetto"),W.createElement("span",{className:"flex sm:hidden"},"Info")))))))}var On=n(66256);function Pn(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Nn=(0,o.ZP)(function(){return n.e(88638).then(n.bind(n,88638))}),_n=(0,o.ZP)(function(){return n.e(87576).then(n.bind(n,87576))}),Zn=(0,o.ZP)(function(){return n.e(97795).then(n.bind(n,97795))}),kn=(0,o.ZP)(function(){return Promise.resolve().then(n.bind(n,18644))});function jn(n){(0,J.I0)();var e=(0,$.$)("todo_project").t,o=(0,J.v9)(function(e){return e.todoAppNote.todos.todoEntities}),l=(0,J.v9)(function(e){return e.todoAppNote.todos.searchText}),t=(0,W.useState)(!1),i=((g=U()(t,2))[0],g[1]),c=(0,J.v9)(function(e){return e.todoAppNote.todos.orderBy}),s=(0,J.v9)(function(e){return e.todoAppNote.todos.orderDescending}),a=(0,J.v9)(function(e){return e.contactsApp.contacts.approvedCompanies}),r=(0,W.useState)(null),t=(y=U()(r,2))[0],u=y[1],d=(0,J.v9)(function(e){return e.todoAppNote.filters}),m=(0,J.v9)(function(e){return e.todoAppNote.filters.activeFilter}),p=(0,J.v9)(function(e){return e.todoAppNote.filters.activeFilterKey}),f=(0,J.v9)(function(e){return e.todoAppNote.filters.usedKeys}),g=(0,J.v9)(function(e){return e.todoAppNote.todos.openDrawingContent}),v=(0,J.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),h=["companyFilter","peopleFilter"],r=((0,J.v9)(function(e){return e.notificationPanel}),(0,W.useRef)(null),(0,W.useState)(null)),r=(y=U()(r,2))[0],E=y[1],y=(0,J.v9)(function(e){return e.todoAppNote.todos.todoDialog}),b=(0,J.v9)(function(e){return e.todoAppNote.todos.taskContentDialog});(0,W.useEffect)(function(){o&&v&&new Promise(function(e,t){var n,a;e(se.Z.orderBy((n=o,a=l,e=Object.keys(n).map(function(e){return n[e]}),0===a.length?e:Ot.Z.filterArrayByString(e,a)),[c],[s?"desc":"asc"]))}).then(function(e){u(w(m,e,p)),x()})},[o,l,c,s]),(0,W.useEffect)(function(){x()},[p,v,f,o]),(0,W.useEffect)(function(){var e;null!=b&&(null!==(e=b.data)&&void 0!==e&&e.id)&&E(b.data.id)},[null==b?void 0:b.data]);var x=function(){v&&o&&function(){var t,e,n,a=se.Z.orderBy((t=o,e=l,n=Object.keys(t).map(function(e){return t[e]}),0===e.length?n:Ot.Z.filterArrayByString(n,e)),[c],[s?"desc":"asc"]);if(f&&f.length){for(var r in f)f.hasOwnProperty(r)&&function(){var e,t=f[r];h.includes(t)?(e=d[t].map(function(e){if(e.isActive)return"peopleFilter"==t?e.id:e.name}),a=w(t,a,e)):d[t].map(function(e){e.isActive&&(console.log("activeFilter????????????????????3",p),a=w(t,a,"peopleFilter"==t?e.id:e.name))})}();u(a)}else u(a);setTimeout(function(){i(!0)},3e3)}()},w=function(e,t,a){function n(t,e){var n=Object.keys(t).map(function(e){return t[e]});return 0===e.length?n:Ot.Z.filterArrayByString(n,e)}switch(e){case"genrealFilter":var r=(0,Q.Fc)();return"MINE"===a&&r?t.reduce(function(e,t){var n=[];return(n=t.assigned_company&&t.assigned_company.id==v.id?O(t.activities,r.extra.profile.id):n).length&&e.push(Dn(Dn({},t),{},{activities:n})),e},[]):"ALL"===a?se.Z.orderBy(n(o,l),[c],[s?"desc":"asc"]):t.reduce(function(e,t){var n=[];return t.assigned_company&&t.assigned_company.id==v.id&&(n=D(t.activities)),(t.alert||n.length)&&e.push(Dn(Dn({},t),{},{activities:n})),e},[]);case"peopleFilter":return t.reduce(function(e,t){var n=[];return(n=t.assigned_company&&t.assigned_company.id==v.id?O(t.activities,a):n).length&&e.push(Dn(Dn({},t),{},{activities:n})),e},[]);case"projectFilter":return t.reduce(function(e,t){return a.includes(t.project.name)&&e.push(t),e},[]);case"companyFilter":return t.reduce(function(e,t){var n;return a.includes(null===(n=t.assigned_company)||void 0===n?void 0:n.name)&&e.push(t),e},[]);case"timeFilter":return"TODAY"===a?t.reduce(function(e,t){var n=new Date(t.date_start),a=new Date(t.date_end),r=new Date,o=[];return t.assigned_company&&t.assigned_company.id==v.id&&(o=N(t.activities)),(r.getTime()<=a.getTime()&&r.getTime()>=n.getTime()||o.length)&&e.push(Dn(Dn({},t),{},{activities:o})),e},[]):"NEXT_WEEK"===a?t.reduce(function(e,t){var n=new Date(t.date_start),a=new Date(t.date_end),r=new Date,o=new Date,l=o.getDate()+7;o.setDate(l);l=[];return t.assigned_company&&t.assigned_company.id==v.id&&(l=Z(t.activities)),(n.getTime()<=o.getTime()&&a.getTime()>=r.getTime()||l.length)&&e.push(Dn(Dn({},t),{},{activities:l})),e},[]):"IN_LATE"===a?t.reduce(function(e,t){var n=new Date(t.date_end),a=new Date,r=[];return t.assigned_company&&t.assigned_company.id==v.id&&(r=_(t.activities)),(a.getTime()>=n.getTime()&&t.progress<100||r.length)&&e.push(Dn(Dn({},t),{},{activities:r})),e},[]):t.reduce(function(e,t){var n=[];return t.assigned_company&&t.assigned_company.id==v.id&&(n=P(t.activities)),100!=t.progress&&!n.length||e.push(Dn(Dn({},t),{},{activities:n})),e},[]);default:return se.Z.orderBy(n(o,l),[c],[s?"desc":"asc"])}},O=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;return e.reduce(function(e,t){return(Array.isArray(n)?t.workers.filter(function(e){return n.includes(e.id)}):t.workers.filter(function(e){return e.id==n})).length&&e.push(t),e},[])},P=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return"to-do"!=t.status&&e.push(t),e},[])},D=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return t.alert&&e.push(t),e},[])},N=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=new Date(t.datetime_start),a=new Date(t.datetime_end),r=new Date;return a.getTime()>=r.getTime()&&n.getTime()<=r.getTime()&&e.push(t),e},[])},_=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=new Date(t.datetime_end);return(new Date).getTime()>=n.getTime()&&"to-do"==t.status&&e.push(t),e},[])},Z=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=new Date(t.datetime_start),a=new Date(t.datetime_end),r=new Date,o=new Date,l=o.getDate()+7;return o.setDate(l),n.getTime()<=o.getTime()&&a.getTime()>=r.getTime()&&e.push(t),e},[])};return t?W.createElement(On.Z,{enter:{animation:"transition.slideUpBigIn"}},W.createElement("div",null,0===t.length?W.createElement(ee.Z,{delay:100},W.createElement("div",null,W.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nogantt.png"})),W.createElement("div",{className:"flex flex-1 items-center justify-center"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},"Sembra che non ci siano fasi di lavoro")),W.createElement("div",{className:"flex flex-1 mt-20 items-center justify-center"},W.createElement(H.Z,{color:"textSecondary",variant:"h6"},"Clicca sul tasto verde per crearne una o importarle da excel")))):W.createElement("div",{className:"flex"},W.createElement("div",{className:"lg:w-1/3 sidebar-ht"},W.createElement("div",{className:"lg:mr-28 custom-margin"},t.map(function(e,t){return W.createElement(Nn,V()({setTodoId:E},n,{todo:e,key:e.id,index:t,companies:a}))}))),W.createElement("div",{className:"lg:w-2/3 content-ht custom-modal-open marginleft flex-fill"},b.props.open&&r==b.data.id?W.createElement(kn,null):!g&&!y.props.openTimelineDialog&&W.createElement("div",{className:"flex flex-col items-center justify-center"},W.createElement("div",{className:"h-full"},W.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),W.createElement("div",{className:"h-full"},W.createElement(H.Z,{color:"textSecondary",variant:"h5"},e("NO_POSTS_MESSAGE")))),g&&!y.props.openTimelineDialog&&W.createElement(Zn,null),y.props.openTimelineDialog&&r==y.data.task.id&&W.createElement(_n,null))))):null}n(2258);var An=n(64270),Sn=n(25710),Tn=(0,s.Z)(function(e){return{listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:24,paddingRight:12,"&.active":{backgroundColor:e.palette.secondary.main,color:"".concat(e.palette.secondary.contrastText,"!important"),"& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{fontSize:16,width:16,height:16,marginRight:16}},listSubheader:{paddingLeft:24},small:{width:e.spacing(3),height:e.spacing(3),marginRight:10}}});function Cn(e){function n(e,t){return a(_.P7({activeFilter:e,activeFilterKey:t}))}var a=(0,J.I0)(),t=((0,J.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),(0,J.v9)(function(e){return e.todoAppNote.filters.genrealFilter})),r=(0,J.v9)(function(e){return e.todoAppNote.filters.timeFilter}),o=(0,J.v9)(function(e){return e.todoAppNote.filters.companyFilter}),l=(0,J.v9)(function(e){return e.todoAppNote.filters.peopleFilter}),i=(0,$.$)("todo_project").t,c=Tn(e);return W.createElement(ee.Z,{animation:"transition.slideUpIn",delay:400},W.createElement("div",{className:"flex-auto md:ml-20 border-l-1 border-solid"},W.createElement("div",{className:"pt-60 lg:pl-44"},W.createElement(vt.Z,{className:"p-0"},W.createElement(B.Z,{position:"static",elevation:1},W.createElement(We.Z,{className:"p-0"},W.createElement(re.Z,{className:"p-32",color:"inherit"},W.createElement(P.Z,{className:"text-32"},"filter_list")),W.createElement(H.Z,{className:"mx-8 p-32 text-24",color:"inherit"},"Filtri"))),W.createElement(An.Z,{className:c.listSubheader,disableSticky:!0},i("GENERAL_FILTERS")),0<t.length&&t.map(function(e){return W.createElement(ht.Z,{button:!0,onClick:function(){return n("genrealFilter",e.name)},className:(0,D.Z)(c.listItem,{active:e.isActive}),activeClassName:"active",key:e.name},W.createElement(P.Z,{className:"list-item-icon",color:"action"},e.icon),W.createElement(yt.Z,{primary:i(e.name),disableTypography:!0}))})),W.createElement(vt.Z,null,W.createElement(An.Z,{className:c.listSubheader,disableSticky:!0},i("TIME_FILTERS")),0<r.length&&r.map(function(e){return W.createElement(ht.Z,{button:!0,onClick:function(){return n("timeFilter",e.name)},className:(0,D.Z)(c.listItem,{active:e.isActive}),activeClassName:"active",key:e.name},W.createElement(P.Z,{className:"list-item-icon",color:"action"},e.icon),W.createElement(yt.Z,{primary:i(e.name),disableTypography:!0}))})),W.createElement(vt.Z,null,W.createElement(An.Z,{className:c.listSubheader,disableSticky:!0},i("COMPANY_FILTERS")),0<o.length&&o.map(function(e){return W.createElement(ht.Z,{button:!0,onClick:function(){return n("companyFilter",e.name)},className:(0,D.Z)(c.listItem,{active:e.isActive}),activeClassName:"active",key:e.name},W.createElement(Sn.Z,{src:e.logo,className:c.small}),W.createElement(yt.Z,{primary:e.name,disableTypography:!0}))})),W.createElement(vt.Z,null,W.createElement(An.Z,{className:c.listSubheader,disableSticky:!0},i("PEOPLE_FILTERS")),0<l.length&&l.map(function(e){var t="".concat(e.first_name," ").concat(e.last_name);return W.createElement(ht.Z,{button:!0,key:e.id,onClick:function(){return n("peopleFilter",e.id)},className:(0,D.Z)(c.listItem,{active:e.isActive})},W.createElement(Sn.Z,{className:"h-24 w-24 mx-8",src:e.photo,alt:e.name},me()(t)[0]),W.createElement(yt.Z,{primary:t,disableTypography:!0}))})))))}function Fn(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function In(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Mn=(0,o.ZP)(function(){return n.e(65661).then(n.bind(n,65661))}),Ln=(0,o.ZP)(function(){return n.e(36673).then(n.bind(n,36673))}),Rn=(0,s.Z)({addButton:{position:"fixed",right:90,bottom:65,zIndex:999999}});var Gn=(0,p.Z)("todoAppNote",v.Z)(function(e){function t(){var e;return null==g||null===(e=g.extra)||void 0===e?void 0:e.profile.role}var l=(0,J.I0)(),n=(0,$.$)("todo_project").t,a=(0,W.useState)(!0),r=(E=U()(a,2))[0],o=E[1],i=(0,W.useState)(!1),c=(h=U()(i,2))[0],s=h[1],u=(Rn(e),(0,J.v9)(function(e){return e.notesApp.project.projectDetail})),d=(0,J.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),m=(0,W.useRef)(null),p=(0,X.UO)(),f=(0,J.v9)(function(e){return e.notificationPanel}),g=((0,J.v9)(function(e){return e.todoAppNote.todos.upload}),(0,Q.Fc)()),a=W.useState(null),v=(E=U()(a,2))[0],i=E[1],h=W.useState(!1),E=(a=U()(h,2))[0],y=a[1],h=(0,W.useState)({loadingTodos:!1}),h=(a=U()(h,2))[0],b=a[1],a=(0,J.v9)(function(e){return e.fuse.settings.current.layout.config}),x=(0,J.v9)(function(e){return e.fuse.navbar}),w=(0,J.v9)(function(e){return e.fuse.settings.toggleSidebarMenu}),O=a.navbar.folded;function P(t){t.loadingTodos?b(function(e){return In(In({},e),t)}):setTimeout(function(){b(function(e){return In(In({},e),t)})},500)}function D(e){(e=e||v)&&(y(!1),j.gantt.importFromExcel({server:"https://export.dhtmlx.com/gantt",data:e,callback:function(e){if(e)try{var a=[],r=[],o=[],n=e.map(function(e){return{name:e["Task name"],progress:e["Completed percentage"],date_start:e["Start time"]?A()(e["Start time"]).format("YYYY-MM-DD"):void 0,date_end:e["End time"]?A()(e["End time"]).format("YYYY-MM-DD"):void 0}});e.forEach(function(t){var n=[];if(!a.length){for(var e in t)a.push(e);a.forEach(function(e,t){n.push("<th>".concat(e,"</th>"))}),o.push("<tr>".concat(n.join(""),"</tr>")),o.push("<tr>".concat(r.join(""),"</tr>"))}n=[],a.forEach(function(e){n.push("<td>".concat(t[e],"</td>"))}),o.push("<tr>".concat(n.join(""),"</tr>"))});j.gantt.modalbox({title:"Assign columns",type:"excel-form",text:'<div class="table-responsive"> <table class="table m-0">'.concat(o.join(""),"</table> </div>"),buttons:[{label:"Save",css:"link_save_btn",value:"save"},{label:"Cancel",css:"link_cancel_btn",value:"cancel"}],callback:function(e){var t;"save"===e&&(l(_.K4(!0)),t=n,e=localStorage.getItem("jwt_access_token"),Z.Z.post((0,te.Md)(p.id),t,{headers:{Authorization:"JWT ".concat(e)}}).then(function(e){l(_.LC(p.id,!1))}).catch(function(e){return console.log(e)}))}})}catch(e){k.Am.error("Not supported ")}}}))}return(0,W.useEffect)(function(){o(!w)},[w]),O&&x.foldedOpen,(0,W.useEffect)(function(){var e=O&&x.foldedOpen;setTimeout(function(){e&&(o(!1),s(e))},200),e||s(e)},[O,x]),(0,W.useEffect)(function(){l(_.ue())},[l]),(0,W.useEffect)(function(){var e,n,a,t;!(f.viewing&&null!==(e=f.notificationData)&&void 0!==e&&e.notification||p.pid||p.cid)||("post"===(null==(n=null===(e=f.notificationData)||void 0===e?void 0:e.notification)?void 0:n.content_type)||"comment"===(null==n?void 0:n.content_type)||p.pid||p.cid)&&(a=(null==n?void 0:n.body.task_id)||p.dataId,null!=n&&n.body.hasOwnProperty("activity_id")||p.aid?(t=(null==n?void 0:n.body.activity_id)||p.dataId,l(_.F8({todo:{id:t},task:{}})),(0,be.k)((0,te.ZJ)(t),{},function(e){l(_.$U({todo:In({id:t},e)}))},function(e){return console.log(e)},be.Y.GET,(0,Q.XW)())):l(_.tp({id:a})),(0,be.k)((0,te.j4)(a),{},function(e){var t;null!=n&&(null!==(t=n.body)&&void 0!==t&&t.hasOwnProperty("activity_id"))||"activity"==p.tab?l(_.$U({task:In({id:a},e)})):l(_.t(e))},function(e){return console.log(e)},be.Y.GET,(0,Q.XW)()))},[f.viewing]),(0,W.useEffect)(function(){var e;(null!==(e=f.notificationData)&&void 0!==e&&e.notification||p.pid||p.cid)&&((null==(e=null===(e=f.notificationData)||void 0===e?void 0:e.notification)?void 0:e.project_id)!=p.id||"activity"!==(null==e?void 0:e.content_type)&&"task"!==(null==e?void 0:e.content_type)||l(_.LC(p.id,!1)))},[f,p]),(0,N.KW)(function(){return l(_.LC(p.id,!1,P)),function(){l({type:_.y$,payload:[]})}},[l,p]),h.loadingTodos?W.createElement("div",{className:"flex flex-1 flex-col items-center justify-center h-full"},W.createElement(H.Z,{style:{height:"auto"},className:"text-20 mb-16",color:"textSecondary"},n("LOADING_TASKS"),"..."),W.createElement(xe.Z,{className:"w-xs",color:"secondary"})):W.createElement(W.Fragment,null,W.createElement(Ge.Z,{classes:{contentWrapper:"bg-azure h-full",content:"flex bg-azure flex-col h-full pb-0",leftSidebar:"mobile-h-full w-350 border-0 ".concat(c||r?"ml-19":""),header:"h-72 sm:h-136 sm:min-h-136",wrapper:"p-24 team-tab"},header:W.createElement(wn,{pageLayout:m}),content:W.createElement(jn,V()({pageLayout:m},e)),leftSidebarContent:W.createElement(Cn,{pageLayout:m}),leftSidebarVariant:!0,sidebarInner:!0,ref:m,innerScroll:!0}),(null===(u=u.company)||void 0===u?void 0:u.id)==d.id&&("d"==t()||"o"==t())&&W.createElement(M,{importExcel:function(e){y(!0)},createTasks:function(e){return l(_.fE())}}),W.createElement(S,{open:E,setOpen:y,target:v,setTarget:i,onImport:function(){return D(void 0)}}),W.createElement(de,null),W.createElement(ce.default,null),W.createElement(z,null),W.createElement(Mn,null),W.createElement(Ln,null))}),Yn=n(27349),zn=n(45781),Wn=n(15440),Un=n(389),Vn=n(66942);function Bn(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Hn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Jn(e){return Array.isArray(e)&&e.length?(console.log({chats:e}),e.reduce(function(e,t){return{files:[].concat(me()(e.files),me()(t.files)).map(function(e,t){return Hn(Hn({},e),{},{index:t})})}},{files:[]})):{files:[]}}var Xn=null,r=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Xn,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Vn.aF:return{chats:me()(t.chat),media:Jn(t.chat)};case Vn.gQ:return null;case Vn.ww:return Hn(Hn({},e),{},{dialog:[].concat(me()(e.dialog),[t.message])});case Vn.Qg:return Hn(Hn({},e),{},{chats:null!=e&&e.chats?[].concat(me()(e.chats),[t.update.message]):[],media:Jn(null!=e&&e.chats?[].concat(me()(e.chats),[t.update.message]):[])});default:return e}};function $n(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function Kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var qn={entities:[],selectedContactId:null},a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qn,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Vn.bG:return Kn(Kn({},e),{},{entities:me()(t.payload)});case Vn.$C:return Kn(Kn({},e),{},{selectedContactId:t.payload});case Vn.mN:return Kn(Kn({},e),{},{selectedContactId:null});default:return e}};function Qn(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function ea(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qn(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ta={mobileChatsSidebarOpen:!1,userSidebarOpen:!1,contactSidebarOpen:!1},i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ta;switch((1<arguments.length?arguments[1]:void 0).type){case Vn.zl:return ea(ea({},e),{},{mobileChatsSidebarOpen:!0});case Vn.o5:return ea(ea({},e),{},{mobileChatsSidebarOpen:!1});case Vn.wu:return ea(ea({},e),{},{userSidebarOpen:!0});case Vn.R:return ea(ea({},e),{},{userSidebarOpen:!1});case Vn.HJ:return ea(ea({},e),{},{contactSidebarOpen:!0});case Vn.IS:return ea(ea({},e),{},{contactSidebarOpen:!1});default:return e}},v=n(52077),na=n.n(v);function aa(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function ra(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aa(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function oa(e,t){var n=na().merge({},e),e=n.chatList.find(function(e){return e.contactId===t.userChatData.contactId});return n.chatList=e?n.chatList.map(function(e){return e.contactId===t.userChatData.contactId?t.userChatData:e}):[t.userChatData].concat(me()(n.chatList)),n}function la(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}var ia={company:{can_access_chat:!0,can_access_files:!0}},r=(0,ye.UY)({sidebars:i,user:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case Vn.q1:case Vn.hq:return ra({},t.payload);case Vn.aF:case Vn.ww:return oa(e,t);default:return e}},contacts:a,chat:r,company:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ia,t=1<arguments.length?arguments[1]:void 0;return t.type!==Vn.hg?e:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?la(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t.company)}});function ca(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function sa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ca(Object(n),!0).forEach(function(e){K()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ua=(0,o.ZP)(function(){return n.e(71497).then(n.bind(n,71497))}),da=(0,o.ZP)(function(){return n.e(12812).then(n.bind(n,12812))}),ma=(0,o.ZP)(function(){return n.e(72967).then(n.bind(n,72967))}),pa=(0,o.ZP)(function(){return n.e(53178).then(n.bind(n,89452))}),fa=(0,s.Z)(function(e){var t;return{root:{display:"flex",flexDirection:"row",minHeight:"100%",position:"relative",flex:"1 1 auto",height:"auto",backgroundColor:e.palette.background.default},topBg:{position:"absolute",left:0,right:0,top:0,height:200,backgroundImage:'url("../../assets/images/backgrounds/header-bg.png")',backgroundColor:e.palette.primary.dark,backgroundSize:"cover",pointerEvents:"none"},contentCardWrapper:(t={position:"relative",display:"flex",flexDirection:"column",flex:"1 0 auto",width:"100%",minWidth:"0",maxHeight:"100%",margin:"0 auto"},K()(t,e.breakpoints.down("sm"),{padding:16}),K()(t,e.breakpoints.down("xs"),{padding:12}),t),contentCard:{display:"flex",position:"relative",flex:"1 1 100%",flexDirection:"row",backgroundImage:'url("/assets/images/patterns/rain-grey.png")',backgroundColor:e.palette.background.paper,boxShadow:e.shadows[1],borderRadius:8,minHeight:0,height:"100%",overflow:"hidden"},drawerPaper:K()({width:350,maxWidth:"100%",overflow:"hidden",height:"100%"},e.breakpoints.up("md"),{position:"relative"}),contentWrapper:{display:"flex",flexDirection:"column",flex:"1 1 100%",zIndex:10,background:"linear-gradient(to bottom, ".concat((0,Un.fade)(e.palette.background.paper,.8)," 0,").concat((0,Un.fade)(e.palette.background.paper,.6)," 20%,").concat((0,Un.fade)(e.palette.background.paper,.8),")")},content:{display:"flex",flex:"1 1 100%",minHeight:0}}});var ga=(0,X.EN)((0,p.Z)("chatAppProject",r)(function(e){function t(t){return f(function(e){return sa(sa({},e),t)})}var n=(0,$.$)("chat_projects").t,a=(0,J.I0)(),r=(0,J.v9)(function(e){return e.fuse.settings.mainTheme}),o=(0,J.v9)(function(e){return e.chatAppProject.searchText}),l=((0,J.v9)(function(e){return e.chatAppProject.chat}),(0,J.v9)(function(e){return e.chatAppProject.company})),i=((0,J.v9)(function(e){return e.chatAppProject.contacts.entities}),(0,J.v9)(function(e){return e.chatAppProject.contacts.selectedContactId}),(0,J.v9)(function(e){return e.chatAppProject.sidebars.mobileChatsSidebarOpen})),c=(0,J.v9)(function(e){return e.chatAppProject.sidebars.userSidebarOpen}),s=(0,J.v9)(function(e){return e.chatAppProject.sidebars.contactSidebarOpen}),u=(0,J.v9)(function(e){return e.notesApp.project.projectDetail}),d=(0,X.UO)(),m=fa(e),p=(0,W.useState)({loadingCompanyInfo:!1,loadingGetContacts:!1,loadingGetChat:!1}),p=(e=U()(p,2))[0],f=e[1];return(0,W.useEffect)(function(){a(Vn.tJ(t))},[a]),(0,W.useEffect)(function(){return a(Vn.is()),a(Vn.K2(d.id,t)),a(Vn.mb(d.id,t)),function(){a({type:Vn.aF,chat:[],userChatData:{}})}},[a,l,d,u]),p.loadingCompanyInfo||p.loadingGetChat||p.loadingGetContacts?W.createElement("div",{className:"flex flex-1 flex-col items-center justify-center h-full"},W.createElement(H.Z,{style:{height:"auto"},className:"text-20 mb-16",color:"textSecondary"},n("LOADING_CHATS"),"..."),W.createElement(xe.Z,{className:"w-xs",color:"secondary"})):W.createElement("div",null,W.createElement(ne.Z,{theme:r},W.createElement("div",{className:"flex flex-1 dashboard-todo-header w-full"},W.createElement("div",{className:"project_list h-auto bg-dark-blue min-h-auto w-full p-16"},W.createElement("div",null,W.createElement(H.Z,{className:"sm:flex pt-4 pb-4 text-white mx-0 sm:mx-12",variant:"h6"},u.name),W.createElement(H.Z,{className:"sm:flex pb-8 text-white mx-0 sm:mx-12",variant:"p"},u.address)),W.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},W.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},W.createElement(ne.Z,{theme:r},W.createElement(ee.Z,{animation:"transition.slideDownIn",delay:300},W.createElement(En.Z,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},W.createElement(P.Z,{color:"action"},"search"),W.createElement(yn.Z,{placeholder:"Cerca Progetti o aziende committenti",className:"flex flex-1 mx-8",disableUnderline:!0,fullWidth:!0,value:o,inputProps:{"aria-label":"Search"}}))))),W.createElement(ee.Z,{animation:"transition.slideRightIn",delay:300},W.createElement(q.Z,{component:Wn.Z,to:"/apps/e-commerce/products/new",className:"whitespace-no-wrap normal-case",variant:"contained",color:"secondary"},W.createElement("span",{className:"flex"},"Nuovo"))))))),W.createElement(ne.Z,{theme:r},W.createElement("div",{className:(0,D.Z)(m.contentCardWrapper,"container chat-custom-h-full p-0 inner-height")},W.createElement("div",{className:(0,D.Z)(m.contentCard,"chat-bg")},W.createElement(Yn.Z,{mdUp:!0},W.createElement(zn.ZP,{className:"h-full absolute z-20 b-right",variant:"temporary",anchor:"left",open:i,onClose:function(){return a(Vn._j())},classes:{paper:(0,D.Z)(m.drawerPaper,"absolute ltr:left-0 rtl:right-0")},style:{position:"absolute"},ModalProps:{keepMounted:!0,disablePortal:!0,BackdropProps:{classes:{root:"absolute"}}}},W.createElement(da,null))),W.createElement(Yn.Z,{smDown:!0},W.createElement(zn.ZP,{className:"h-full z-20 b-right",variant:"permanent",open:!0,classes:{paper:m.drawerPaper}},W.createElement(da,null))),W.createElement(zn.ZP,{className:"h-full absolute z-30 b-right",variant:"temporary",anchor:"left",open:c,onClose:function(){return a(Vn.Sm())},classes:{paper:(0,D.Z)(m.drawerPaper,"absolute left-0")},style:{position:"absolute"},ModalProps:{keepMounted:!1,disablePortal:!0,BackdropProps:{classes:{root:"absolute"}}}},W.createElement(pa,null)),W.createElement("main",{className:(0,D.Z)(m.contentWrapper,"z-10 multiple-images-overflow-x chat-bg custom-w-form")},W.createElement(W.Fragment,null,W.createElement("div",{className:m.content},W.createElement(ua,{className:"flex flex-1 z-10 Poppinsple-images-overflow-x chat-bg"})))),W.createElement(zn.ZP,{className:"h-full absolute z-30",variant:"temporary",anchor:"right",open:s,onClose:function(){return a(Vn.Rb())},classes:{paper:(0,D.Z)(m.drawerPaper,"absolute ltr:right-0 rtl:left-0")},style:{position:"absolute"},ModalProps:{keepMounted:!0,disablePortal:!0,BackdropProps:{classes:{root:"absolute"}}}},W.createElement(ma,null))))))})),va=n(98705);n(55545);function ha(e){var t=e.children,n=e.value,a=e.index,e=l()(e,["children","value","index"]);return W.createElement("div",V()({role:"tabpanel",hidden:n!==a,id:"wrapped-tabpanel-".concat(a),"aria-labelledby":"wrapped-tab-".concat(a)},e),n===a&&W.createElement(u.Z,{p:3},W.createElement(H.Z,null,t)))}function Ea(e){return{id:"wrapped-tab-".concat(e),"aria-controls":"wrapped-tabpanel-".concat(e)}}ha.propTypes={children:c().node,index:c().any.isRequired,value:c().any.isRequired};var ya=(0,s.Z)(function(e){return{root:{flexGrow:1,minHeight:"100%",backgroundColor:"#1e2125",height:76}}});var ba=(0,p.Z)("contactsApp",m.Z)(function(e){var t=e.value,n=e.setValue,a=e.setOpenDialog,r=(0,$.$)("projects").t,o=ya(),l=(0,J.v9)(function(e){return e.todoAppNote.todos.taskContentDialog}),i=(0,J.v9)(function(e){return e.todoAppNote.todos.todoDialog}),c=(0,W.useState)({currentZoom:"Months"}),c=(e=U()(c,2))[0],s=(e[1],(0,J.I0)()),u=(0,X.UO)();return(0,N.KW)(function(){return s(d.gH(u.id)),s(d.t9())},[s,u]),W.createElement("div",{className:o.root},W.createElement(ha,{value:t,index:0,className:"team-tab-content p-0 no-data-height-full"},W.createElement(va.Z,{value:t,setValue:n,setOpenDialog:a})),W.createElement(ha,{value:t,index:1,className:"h-full no-data-height-full chat-tab-content-height"},W.createElement(ga,{value:t,setValue:n})),W.createElement(ha,{value:t,index:2,className:"no-data-height-full"},W.createElement(Gn,{value:t,setValue:n})),W.createElement(ha,{value:t,index:3,className:"no-data-height-full"},W.createElement(hn,{value:t,setValue:n})),W.createElement("div",{id:"myCover",className:4!==t?"hidden":"gantt-container gantt-height-full"},W.createElement(Me,{zoom:c.currentZoom,value:t,setValue:n})),W.createElement(B.Z,{className:"fixed custom-tab-header lightblue-bg custom-tab-header-mobile right-0 bottom-0"},W.createElement(f.Z,{value:t,onChange:function(e,t){l.props.open?(s(_.X_()),setTimeout(function(){n(t)},0)):i.props.openTimelineDialog?(s(_.aP()),setTimeout(function(){n(t)},0)):n(t)},showLabels:!0,className:o.root},W.createElement(g.Z,V()({className:"text-white",label:r("TEAM"),icon:W.createElement(P.Z,{className:"white"},"people")},Ea(0))),W.createElement(g.Z,V()({label:r("CHAT"),icon:W.createElement(P.Z,null,"message")},Ea(1))),W.createElement(g.Z,V()({label:r("TODO"),icon:W.createElement(P.Z,null,"check_box")},Ea(2))),W.createElement(g.Z,V()({label:r("FILES"),icon:W.createElement(P.Z,null,"folder")},Ea(3))),W.createElement(g.Z,V()({label:r("GANTT"),icon:W.createElement(P.Z,null,"subject")},Ea(4))))))});function xa(e){var t=e.value,n=e.setValue,e=e.setOpenDialog;return W.createElement("div",{className:"flex flex-col w-full"},W.createElement(ba,{value:t,setValue:n,setOpenDialog:e}))}},97642:function(e,t,n){"use strict";n.r(t);var a=n(51265),r=n.n(a),o=n(20305),l=n.n(o),i=n(48258),c=n(78709),s=n(13786),u=n(6274),d=n(99904),m=n(70964),a=n(80896),o=n(19462),p=n(35965),f=n(92466),g=n(53369),v=(0,u.Z)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose,e=l()(e,["children","classes","onClose"]);return c.createElement(m.Z,r()({disableTypography:!0,className:n.root},e),c.createElement(f.Z,{variant:"h6"},t),a?c.createElement(i.Z,{"aria-label":"close",className:n.closeButton,onClick:a},c.createElement(p.Z,null)):null)}),h=(0,u.Z)(function(e){return{root:{padding:e.spacing(2)}}})(a.Z),E=(0,u.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)}}})(o.Z);t.default=function(e){var t=e.isOpenDeleteDialog,n=e.colseDeleteFileDialog,a=e.onYes,r=e.onNo,o=e.text,e=(0,g.$)("filemanaer_project").t;return c.createElement(d.Z,{onClose:n,"aria-labelledby":"customized-dialog-title",open:t,maxWidth:"xs",fullWidth:"true"},c.createElement(v,{id:"customized-dialog-title",onClose:n},e("DELETE")),c.createElement(h,{dividers:!0},c.createElement("div",null,o)),c.createElement(E,null,c.createElement(s.Z,{autoFocus:!0,onClick:a,variant:"contained",color:"secondary"},e("YES")),c.createElement(s.Z,{autoFocus:!0,onClick:r,variant:"contained",color:"secondary"},e("NO"))))}},43153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var a=n(56156),r=n.n(a),o=n(61432),f=n.n(o),l=n(51265),i=n.n(l),t=n(20305),c=n.n(t),s=n(48258),g=n(78709),a=n(6274),v=n(99904),u=n(70964),o=n(80896),l=n(19462),d=n(35965),m=n(92466),h=n(58913),E=n(62475),y=n(81566),b=n(13786),x=n(79337),w=n(11208),O=n(88572),t=n(13199),P=n.n(t),D=n(3089),N=n(21066),_=n(53369),Z=n(16496),k=n(57972),t=n(82853),p=n.n(t),t=n(82147),j=n.n(t),t=n(38050),A=n.n(t),t=n(3056),S=n.n(t),t=n(71470),T=n.n(t),t=n(39903),C=n.n(t),F=n(37695);function I(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=T()(n);return t=a?(e=T()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),S()(this,t)}}g.Component;function M(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var R=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose,e=c()(e,["children","classes","onClose"]);return g.createElement(u.Z,i()({disableTypography:!0,className:n.root},e),g.createElement(m.Z,{variant:"h6"},t),a?g.createElement(s.Z,{"aria-label":"close",className:n.closeButton,onClick:a},g.createElement(d.Z,null)):null)}),G=(0,a.Z)(function(e){return{root:{padding:e.spacing(2)}}})(o.Z),Y=(0,a.Z)(function(e){return{root:{margin:0,padding:e.spacing(1)}}})(l.Z);var z=function(e){var t=e.isOpenViewFile,n=e.closeViewFile,a=e.setProgress,r=(0,_.$)("filemanaer_project").t,o=(0,h.I0)(),l=(0,h.v9)(function(e){return null===(e=e.fileManagerAppProject.files)||void 0===e?void 0:e.allFiles}),i=(e=(0,h.v9)(function(e){return e.fileManagerAppProject.files.folderPath}))[e.length-1],c=(0,h.v9)(function(e){var t=e.fileManagerAppProject;return""==i?null===(e=t.files)||void 0===e?void 0:e.rootFiles:null===(t=t.files)||void 0===t?void 0:t.files}),s=(0,h.v9)(function(e){return e.fileManagerAppProject.selectedItemId}),e=(0,g.useState)(null),u=(e=f()(e,2))[0],d=e[1],e=(0,g.useState)(null),m=(e=f()(e,2))[0],p=e[1];return(0,g.useEffect)(function(){console.log({currentIndex:u});var e=c[u];p(e)},[u]),(0,g.useEffect)(function(){var t,e;Array.isArray(c)&&s&&(t=s,e=c.findIndex(function(e){return e.mainId==t.mainId&&e.type==t.type}),console.log({findIndex:e,Allfiles:c}),0<=e&&(d(e),e=c[e],p(e)))},[s,c,l]),g.createElement(v.Z,{onClose:n,"aria-labelledby":"customized-dialog-title",open:t,fullWidth:"true"},g.createElement(R,{id:"customized-dialog-title",onClose:n},null==m?void 0:m.title),g.createElement(G,{dividers:!0},"photo"==(null==m?void 0:m.type)?g.createElement(y.LazyLoadImage,{delayTime:300,src:null==m?void 0:m.photo,alt:null==m?void 0:m.title}):"video"==(null==m?void 0:m.type)?g.createElement(N.default,{width:"100%",height:"100%",video_url:null==m?void 0:m.video}):"pdf"==(null==m?void 0:m.extension)?g.createElement(k.Z,{height:700,file:m.document}):g.createElement(E.G,{icon:"document"==(null==m?void 0:m.type)?"pdf"==(null==m?void 0:m.extension)?x.gS:"docx"==(null==m?void 0:m.extension)?x.Mf:"xlsx"==(null==m?void 0:m.extension)?x.ic:"mp3"==(null==m?void 0:m.extension)?x.FM:x.gM:x.gM,style:L(L({},"pdf"==(n=null==m?void 0:m.extension)||"video"==n?{color:"red"}:"mp3"==n?{color:"brown"}:"docx"==n?{color:"blue"}:"xlsx"==n?{color:"green"}:{}),{},{fontSize:"2.4rem"})})),g.createElement(Y,{className:"p-8"},g.createElement(b.Z,{variant:"contained",color:"primary",onClick:function(){var e;m&&(a(0),o(Z.MJ(!0)),e=("photo"==m.type?(0,w.K$):"video"==m.type?(0,w.Pn):(0,w.sU))(m.mainId),(0,O.k)(e,{},function(e){var t=e.headers,e=e.data,e=btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},"")),e="data:".concat(t["content-type"].toLowerCase(),";base64,").concat(e);console.log({file:e}),window&&(console.log("listenning to flutterInAppWebViewPlatformReady"),console.log(window.flutter_inappwebview),"photo"==m.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(m.photo),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",m.photo)),"video"==m.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(m.video),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",m.video)),"document"==m.type&&(window.DownloadFiles&&window.DownloadFiles.postMessage(m.document),window.flutter_inappwebview&&window.flutter_inappwebview.callHandler("DownloadFiles",m.document)),console.log("finish listenning to flutterInAppWebViewPlatformReady")),P().saveAs(e),o(Z.MJ(!1))},function(e){o(Z.MJ(!1))},O.Y.GET,L(L({},(0,D.XW)()),{},{responseType:"arraybuffer",onDownloadProgress:function(e){e=Math.round(100*e.loaded/e.total);a(e)}}),!0))}},r("DOWNLOAD")),g.createElement(b.Z,{variant:"contained",color:"primary",disabled:0==u,onClick:function(){0<u&&d(function(e){return e-1})}},r("PREVIOUS")),g.createElement(b.Z,{variant:"contained",color:"primary",disabled:u==(null==c?void 0:c.length)-1,onClick:function(){u<(null==c?void 0:c.length)-1&&d(function(e){return e+1})}},r("NEXT"))))}},59415:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(51265),r=n.n(a),o=n(78709),l=(n(16526),n(40962)),t=n(6274),a=n(70621),i=n(29796),c=n(92466),s=n(1644),u=n(66066),d=n(53369);function m(e){var t=(0,d.$)("filemanaer_project").t,n=p();return o.createElement(s.Z,{display:"flex",alignItems:"center",className:n.progressBox},o.createElement(s.Z,{width:"100%",mr:1},o.createElement(f,r()({variant:"determinate"},e,{value:100}))),o.createElement(s.Z,{className:n.root},o.createElement(c.Z,null,t(e.label)," ","".concat(Math.round(e.value),"%"))))}m.defaultProps={label:""};var p=(0,l.Z)({root:{position:"absolute",zIndex:"50",textAlign:"center",width:"100%",color:" white"},progressBox:{width:"300px",margin:"0 auto",position:"relative",top:"-20px"}}),f=(0,t.Z)({root:{height:36,width:300,backgroundColor:(0,a.$n)("#53b987",0),animation:"$myEffect 2s linear infinite",borderRadius:20,backgroundImage:"-webkit-gradient(linear, 0 0, 100% 100%, color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent), color-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent) )",backgroundSize:"50px 50px"},bar:{width:"100%",backgroundColor:"transparent"},"@keyframes myEffect":{"0%":{backgroundPosition:"0px 0px"},"100%":{backgroundPosition:"50px 50px"}}})(i.Z);function g(e){var t=e.progress,e=(0,u.useStyles)();return o.createElement("div",{className:e.root},o.createElement(m,{color:"secondary",value:t}))}},57972:function(e,t,n){"use strict";var a=n(61432),s=n.n(a),u=n(13786),d=n(78709),m=n(85550),p=(n(9094),n(53369));m.v0.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(m.v0.version,"/pdf.worker.js"),t.Z=function(e){var t=e.file,n=e.height,a=e.width,r=(0,p.$)("filemanaer_project").t,o=(0,d.useState)(null),l=(e=s()(o,2))[0],i=e[1],o=(0,d.useState)(1),o=(e=s()(o,2))[0],c=e[1];return d.createElement("div",null,d.createElement(m.BB,{options:{cMapUrl:"//cdn.jsdelivr.net/npm/pdfjs-dist@".concat(m.v0.version,"/cmaps/"),cMapPacked:!0},file:t,onLoadSuccess:function(e){e=e.numPages,i(e)}},d.createElement(m.T3,{size:"A4",height:n,width:a,pageNumber:o})),d.createElement("p",{className:"text-center"},d.createElement(u.Z,{onClick:function(){return c(function(e){return 1!=e?e-1:1})},type:"button"},"<"),r("PAGE")," ",o," ",r("OF")," ",l,d.createElement(u.Z,{onClick:function(){return c(function(e){return e!=l?e+1:l})},type:"button"},">")))}},16496:function(e,t,n){"use strict";n.d(t,{tq:function(){return i},Mp:function(){return E},$g:function(){return h},MY:function(){return b},p5:function(){return y},ci:function(){return a},pF:function(){return u},Hz:function(){return p},Fs:function(){return d},oi:function(){return c},XM:function(){return s},MH:function(){return g},ZH:function(){return M},x_:function(){return v},i8:function(){return x},TF:function(){return f},iS:function(){return F},Kx:function(){return I},Jm:function(){return m},fQ:function(){return P},a9:function(){return A},L0:function(){return S},qi:function(){return Z},bE:function(){return D},xh:function(){return k},wP:function(){return N},WY:function(){return _},MJ:function(){return T},iD:function(){return O},bZ:function(){return w},ic:function(){return G},Pr:function(){return C},Qc:function(){return j},iM:function(){return L},H$:function(){return R}});n(31806);var r=n(88572),o=n(11208),l=n(3089),a="[FILE MANAGER APP(PROJECT)] GET ALL FILES",i="[FILE MANAGER APP(PROJECT)] DELETE FILE",c="[FILE MANAGER APP(PROJECT)] GET PHOTOS",s="[FILE MANAGER APP(PROJECT)] GET VIDEOS",u="[FILE MANAGER APP(PROJECT)] GET DOCUMENTS",d="[FILE MANAGER APP(PROJECT)] GET FOLDERS PATHS",m="[FILE MANAGER APP(PROJECT)] UPDATE SPECIFIC FOLDER",p="[FILE MANAGER APP(PROJECT)] GET FOLDERS",f="[FILE MANAGER APP(PROJECT)] SET SEARCH TEXT",g="[FILE MANAGER APP(PROJECT)] HANDLE UPLOAD LOADING",v="[FILE MANAGER APP(PROJECT)] RESET FILES",h="[FILE MANAGER APP(PROJECT)] FILE MOVE OPEN DIALOG",E="[FILE MANAGER APP(PROJECT)] FILE MOVE CLOSE DIALOG",y="[FILE MANAGER APP(PROJECT)] FILE RENAME OPEN DIALOG",b="[FILE MANAGER APP(PROJECT)] FILE RENAME CLOSE DIALOG",x="[FILE MANAGER APP(PROJECT)] SET FOLDER PATH";function w(e){return{type:y,payload:e}}function O(e){return{type:h,payload:e}}function P(){return{type:E}}function D(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return""};return function(e,t){e(N(n,a)),e(_(n,a)),e(Z(n,a)),e(k(n,a)),e(S(n,a))}}function N(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return""};return a({loadingPhotos:!0}),function(t,e){(0,r.k)((0,o.JN)(n),{},function(e){a({loadingPhotos:!1}),t({type:c,payload:e})},function(e){a({loadingPhotos:!1}),console.log(e)},r.Y.GET,(0,l.XW)())}}function _(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return""};return a({loadingVideos:!0}),function(t,e){(0,r.k)((0,o.hl)(n),{},function(e){a({loadingVideos:!1}),t({type:s,payload:e})},function(e){a({loadingVideos:!1}),console.log(e)},r.Y.GET,(0,l.XW)())}}function Z(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return""};return a({loadingDocuments:!0}),function(t,e){(0,r.k)((0,o.ol)(n),{},function(e){a({loadingDocuments:!1}),t({type:u,payload:e})},function(e){a({loadingDocuments:!1}),console.log(e)},r.Y.GET,(0,l.XW)())}}function k(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return""};return a({loadingFolders:!0}),function(t,e){(0,r.k)((0,o.wy)(n),{},function(e){a({loadingFolders:!1}),t({type:p,payload:e})},function(e){a({loadingFolders:!1}),console.log(e)},r.Y.GET,(0,l.XW)())}}function j(e,t){return{type:x,payload:e,currentFiles:t}}function A(e,n){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return""};return a({loadingFolders:!0}),function(t,e){e=e().fileManagerAppProject.files.folderPath,e=e[e.length-1];e&&(0,r.k)((0,o.cX)(e.id),{},function(e){console.log("GET_FOLDERS_DETAIL",e),a({loadingFolders:!1}),console.log(e),t({type:m,payload:e,updatedFolderValues:n})},function(e){a({loadingFolders:!1}),console.log(e)},r.Y.GET,(0,l.XW)())}}function S(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return""};return a({loadingFolders:!0}),function(t,e){(0,r.k)((0,o.Uk)(n),{},function(e){console.log(e),a({loadingFolders:!1}),t({type:d,payload:e})},function(e){a({loadingFolders:!1}),console.log(e)},r.Y.GET,(0,l.XW)())}}function T(e){return{type:g,payload:e}}function C(e){return{type:a,payload:e}}var F="[FILE MANAGER APP(PROJECT)] SET SELECTED ITEM",I="[FILE MANAGER APP(PROJECT)] UPDATE FOLDER PATH",M="[FILE MANAGER APP(PROJECT)] POP FOLDER PATH";function L(e){return{type:F,payload:e}}function R(e){return{type:I,payload:e}}function G(e){return{type:M,payload:e}}},76984:function(e,t,n){"use strict";n.r(t);var a=n(68357),T=n.n(a),a=n(61432),C=n.n(a),a=n(56156),F=n.n(a),a=n(79545),I=n.n(a),a=n(28129),M=n.n(a),L=n(94678),R=n(38932),G=n(84403),Y=n(48258),z=n(96282),W=n(50390),U=n(41713),V=n(73772),B=n(92466),H=n(13786),J=n(29796),X=n(78709),$=n(88572),K=n(11208),q=n(3089),Q=n(58913),ee=n(10588),te=n(49073),ne=n(53369),ae=n(90),re=n(8662),a=n(32986);function oe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,t=function(){};return{s:t,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){F()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ie=(0,a.ZP)(function(){return n.e(47553).then(n.bind(n,47553))}),ce=(0,a.ZP)(function(){return Promise.resolve().then(n.bind(n,23814))}),se=(0,a.ZP)(function(){return Promise.resolve().then(n.bind(n,73430))}),ue=n(95679);t.default=function(e){var m=e.isTask,p=e.taskId,t=(0,ne.$)("todo_project").t,f=(0,Q.I0)(),n=X.useState(),a=C()(n,2)[1],g=X.useCallback(function(){return a({})},[]),r=(0,Q.v9)(function(e){return e.auth.user.data.company}),o=(0,X.useState)({}),v=(s=C()(o,2))[0],l=s[1],i=(0,X.useState)({posts:[]}),e=(d=C()(i,2))[0],c=d[1],n=(0,X.useState)({}),h=(o=C()(n,2))[0],E=o[1],s=(0,X.useState)(""),y=(i=C()(s,2))[0],u=i[1],d=(0,X.useState)(null),b=(n=C()(d,2))[0],x=n[1],o=(0,X.useState)(!1),i=(s=C()(o,2))[0],w=s[1],d=(0,X.useState)(!0),O=(n=C()(d,2))[0],P=n[1],o=[{icon:"public",name:"Public",handler:function(){P(!0)}},{icon:"lock",name:"Private",handler:function(e){P(!1)}}],s=(0,X.useState)({files:[]}),n=(d=C()(s,2))[0],D=d[1],d=null===(s=(0,Q.v9)(function(e){return e.notificationPanel}).notificationData)||void 0===s?void 0:s.notification,N=(document.getElementById("post".concat(null==d?void 0:d.object_id)),(0,q.Fc)()),s=(0,X.useState)({fileData:void 0,imagePreviewUrl:void 0}),_=((d=C()(s,2))[0],d[1]),Z=(0,X.useRef)(null),k=(0,Q.v9)(function(e){return e.todoAppNote.todos.todoDialog});(0,X.useEffect)(function(){r&&l(le({},r))},[r]),(0,X.useEffect)(function(){var e;c({posts:[]}),null!==(e=k.data)&&void 0!==e&&(null!==(e=e.todo)&&void 0!==e&&e.id)&&A()},[k.data]),(0,X.useEffect)(function(){c({posts:[]}),m&&(S(),A())},[m,p]);var j,A=function(){var e;w(!0),(0,$.k)(m?(0,K.ri)(p):(0,K._j)(null===(e=k.data.todo)||void 0===e?void 0:e.id),{},function(t){w(!1),c(function(e){return le(le({},e),{},{posts:t.results})});var e,e=(e=t.results,Array.isArray(e)&&e.length?(console.log({timeline:e}),e.reduce(function(e,t){return{media_set:[].concat(I()(e.media_set),I()(t.media_set)).map(function(e,t){return le(le({},e),{},{index:t})})}},{media_set:[]})):{media_set:[]});D({files:e.media_set})},function(e){w(!1),console.log(e)},$.Y.GET,(0,q.XW)())},s=function(){var e=T()(M().mark(function e(){var t,n,a,r,o,l,i,c,s,u,d;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,n=ue(),a={text:y,unique_code:n,is_public:O},r=[],b&&(r=b.map(function(e){return{extension:e.extension,media_url:e.imgPath,name:e.file.name,type:e.type}})),b){u=b.map(function(e){return e.file}),o=0,l=oe(u);try{for(l.s();!(i=l.n()).done;)c=i.value,t.append("media[".concat(o,"]"),c,c.name),o+=1}catch(e){l.e(e)}finally{l.f()}}for(s in a)a[s]&&t.append(s,a[s]);u={formData:t,text:y,author:v,media_set:r,unique_code:n},console.log({media_set:r}),d=le(le({},h),{},F()({},n,u)),E(d),f(ae.VX(!0)),(0,$.k)(m?(0,K.NP)(p):(0,K.AY)(null===(u=k.data.todo)||void 0===u?void 0:u.id),t,function(e){console.log({res:e}),delete d[e.unique_code],E(d),f(ae.VX(!1)),A()},function(e){f(ae.VX(!1)),d[n]=le(le({},d[n]),{},{retryOption:!0}),console.log({myError:e,tempOfflinePosts:d}),E(d),g()},$.Y.POST,le(le({},(0,q.XW)()),{},{onUploadProgress:function(e){e=Math.round(100*e.loaded/e.total);f(ae.iw(e))}})),document.getElementById("addPost").value="",x(null);case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(){var t=T()(M().mark(function e(t){var n,a,r,o,l,i;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget.files,a=t.currentTarget.files[0],console.log("File size ".concat(a.size/1024/1024," MB")),console.log("File name ".concat(a.name)),console.log("File Index 0",JSON.stringify(a)),"image"==(null===(r=a.type)||void 0===r?void 0:r.split("/")[0]))return e.next=8,(0,ee.Z)(a,{maxSizeMB:.1,maxWidthOrHeight:1024,useWebWorker:!0});e.next=16;break;case 8:r=e.sent,console.log("without compressedFile(blob)",JSON.stringify(r)),console.log("compressedFile into the file",JSON.stringify(new File([r],r.name))),console.log("compressedFile instanceof Blob",JSON.stringify(r instanceof Blob)),console.log("compressedFile size ".concat(r.size/1024/1024," MB")),_({fileData:new File([r],r.name)}),e.next=17;break;case 16:_({fileData:a});case 17:o=[],l=0;case 19:if(!(l<n.length)){e.next=44;break}if(i=null===(i=n[l].type)||void 0===i?void 0:i.split("/"),console.log("file",JSON.stringify(o[l])),console.log("fileType",JSON.stringify(i)),console.log("local url",JSON.stringify(URL.createObjectURL(n[l]))),e.t0=[],e.t1=I()(o),"image"==i[0])return e.next=29,(0,q.y6)(n[l]);e.next=32;break;case 29:e.t2=e.sent,e.next=33;break;case 32:e.t2=n[l];case 33:e.t3=e.t2,e.t4=URL.createObjectURL(n[l]),e.t5=i.join("/"),e.t6={file:e.t3,imgPath:e.t4,fileType:"image",extension:".jpg",type:e.t5},e.t7=[e.t6],o=e.t0.concat.call(e.t0,e.t1,e.t7),console.log("fuck     file",JSON.stringify(o)),x(o);case 41:l++,e.next=19;break;case 44:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),S=function(){};return e?X.createElement("div",{className:"md:flex max-w-2xl"},X.createElement("div",{className:"flex flex-col flex-1"},"w"!=(null==N||null===(j=N.extra)||void 0===j?void 0:j.profile.role)&&X.createElement("div",null,X.createElement(L.Z,{className:"w-full overflow-hidden post-form mb-20 post-card-clx"},X.createElement(R.Z,{id:"addPost",className:"p-16 w-full write-post",classes:{root:"text-14"},placeholder:t("WRITE_SOMETHING"),multiline:!0,rows:"3",margin:"none",disableUnderline:!0,onChange:function(e){return u(e.target.value)}}),b&&X.createElement(ce,{images:b,replaceUrl:function(e,t){b[t]=le(le({},b[t]),{},{imgPath:e,file:te.Z.dataURItoFile(e)}),x(b)}}),X.createElement(G.Z,{className:"card-footer flex flex-row border-t-1 items-center justify-between pt-8 pb-6 pr-12 pl-10",position:"static",color:"default",elevation:0},X.createElement("div",{className:"add-photo-image flex"},X.createElement(Y.Z,{onClick:function(){return Z.current.click()},"aria-label":"Add photo",className:"p-8"},X.createElement(z.Z,null,"photo")),X.createElement(se,{icon:X.createElement(X.Fragment,null,X.createElement(W.Z,{id:"demo-simple-select-label",className:"p-8 border-2 mx-8"},O?"Public":"Private",X.createElement("span",{className:"arrow-icon"}," ",X.createElement(re.Z,null)," ")," ")),outsideClick:!0},o.map(function(e){return X.createElement(U.Z,{key:e.name,selected:"Pyxis"===e.name,onClick:e.handler},X.createElement(V.Z,null,X.createElement(z.Z,null,e.icon)),X.createElement(B.Z,{variant:"inherit"}," ",t(e.name)))})),X.createElement("input",{hidden:!0,multiple:!0,type:"file",accept:"image/*",ref:Z,onChange:d})),X.createElement(H.Z,{onClick:s,variant:"contained",color:"primary",size:"large","aria-label":"post",disabled:!(y.length||null!=b&&b.length)},t("POST"))))),i&&X.createElement("div",{className:"flex flex-1 flex-col items-center justify-center"},X.createElement(B.Z,{style:{height:"auto"},className:"text-20 mb-16",color:"textSecondary"},"Sto caricando i posts"),X.createElement(J.Z,{className:"w-xs",color:"secondary"})),X.createElement(ie,{isOffline:!0,tempAuthor:v,isTask:m,taskId:p,posts:Object.values(h),callRetryAfterSuccess:function(e,t){var n=le({},h);n[e]=le(le(le({},n[e]),t),{},{retryOption:!1,successAfterRetry:!0}),E(n),g()}}),0<e.posts.length?X.createElement(ie,{isTask:m,tempAuthor:v,posts:e.posts,media:n.files}):X.createElement("div",{className:"flex flex-col items-center justify-center"},X.createElement("div",{className:"h-full"},X.createElement("img",{className:"w-400",src:"assets/images/errors/nofiles.png"})),X.createElement("div",{className:"h-full"},X.createElement(B.Z,{color:"textSecondary",variant:"h5"},t("NO_POSTS_MESSAGE")))),X.createElement(ie,{isTask:m,tempAuthor:v,posts:e.sharedPosts}))):null}},18644:function(e,t,n){"use strict";n.r(t);var a=n(56156),r=n.n(a),o=n(79545),T=n.n(o),l=n(61432),C=n.n(l),i=n(51265),F=n.n(i),a=n(20305),c=n.n(a),o=n(16526),l=n.n(o),I=n(92505),M=n(35923),L=(n(65129),n(80896)),R=n(96282),G=n(48258),Y=n(92571),s=n(1644),z=n(82186),W=n(92466),i=n(78279),U=n.n(i),V=n(78278),B=n(78709),H=n(58913),a=n(40962),o=n(6274),i=n(12303),J=n(13786),X=n(65087),$=n(70310),K=n(61681),q=n(55110),Q=n(3089),ee=n(53369),te=n(35965),ne=n(69796),ae=n(76984),re=n(4330),oe=n(90);function u(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ie(e){var t=e.children,n=e.value,a=e.index,e=c()(e,["children","value","index"]);return B.createElement("div",F()({role:"tabpanel",hidden:n!==a,id:"wrapped-tabpanel-".concat(a),"aria-labelledby":"wrapped-tab-".concat(a)},e),n===a&&B.createElement(s.Z,{p:3},B.createElement(W.Z,null,t)))}function ce(e){return{id:"wrapped-tab-".concat(e),"aria-controls":"wrapped-tabpanel-".concat(e)}}ie.propTypes={children:l().node,index:l().any.isRequired,value:l().any.isRequired};(0,a.Z)(function(e){return{root:{flexGrow:1,minHeight:"100%",backgroundColor:e.palette.background.paper}}});var se=[{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80},{value:90},{value:100}],a="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",ue=(0,o.Z)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:a,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:a}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(i.Z);t.default=function(e){function t(e){return"".concat(e.first_name," ").concat(e.last_name)}var n=(0,ee.$)("todo_project").t,a=(0,H.I0)(),r=(0,H.v9)(function(e){return e.todoAppNote.todos.upload}),o=(0,H.v9)(function(e){return e.todoAppNote.todos.taskContentDialog}),l=(0,H.v9)(function(e){return e.todoAppNote.todos.openDrawingContent}),i=(0,H.v9)(function(e){return null===(e=e.todoAppNote.todos.taskContentDialog)||void 0===e?void 0:e.data}),c=(0,H.v9)(function(e){return e.contactsApp.contacts.approvedCompanies}),s=(0,B.useState)([]),u=(h=C()(s,2))[0],d=h[1],m=(0,B.useState)([]),p=(b=C()(m,2))[0],f=(b[1],(0,B.useState)([])),g=(s=C()(f,2))[0],v=s[1],h=(0,B.useState)(0),E=(m=C()(h,2))[0],y=m[1],b=(0,B.useState)(!1),s=(f=C()(b,2))[0],x=f[1],w=(0,q.UO)(),O=(0,H.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),P=(0,H.v9)(function(e){return e.notesApp.project.projectDetail}),h=(0,B.useState)({startDate:new Date,endDate:void 0}),D=(m=C()(h,2))[0],N=m[1],b=B.useState(0),h=(f=C()(b,2))[0],_=f[1];function Z(){var e;return null==k||null===(e=k.extra)||void 0===e?void 0:e.profile.role}(0,B.useEffect)(function(){var e;c&&c.length&&i&&(e=T()(c).filter(function(e){var t,n;return(null===(e=e.profile)||void 0===e||null===(t=e.company)||void 0===t?void 0:t.id)==(null==i||null===(n=i.assigned_company)||void 0===n?void 0:n.id)}).map(function(e){var t,n;return{data:e,value:null===(t=e.profile)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.name,label:B.createElement("span",{className:"flex items-center"},B.createElement(R.Z,{className:"list-item-icon mx-6 text-20",style:{color:null===(n=e.profile.company)||void 0===n?void 0:n.color_project},color:"action"},"label")," ",e.profile.company.name)}}),v(e)),i&&(console.log({taskContentData:i,date_start:i.date_start}),i.isGantt&&1==i.parent?(N({startDate:new Date(i.datetime_start),endDate:new Date(i.datetime_end)}),y(i.progress),d(i.workers.map(function(e){return{data:e,value:t(e),label:B.createElement("span",{className:"flex items-center"},t(e))}})),S()):(N({startDate:new Date(i.date_start),endDate:new Date(i.date_end)}),y(i.progress)))},[c,i]),(0,B.useEffect)(function(){l&&(_(1),ce(1))},[l]),(0,B.useEffect)(function(){_(0)},[i]);var k=(0,Q.Fc)(),j=(m=(0,M.cI)({name:1==(null==i?void 0:i.parent)?null==i?void 0:i.title:null==i?void 0:i.name,description:1==(null==i?void 0:i.parent)?null==i?void 0:i.description:null==i?void 0:i.note})).form,b=m.handleChange,A=(m.setForm,m.setInForm);j&&j.due&&U()(j.due).format(U().HTML5_FMT.DATE),(0,B.useCallback)(function(e,t){A("checklists[".concat(t,"]"),e)},[A]),f=function(){var e;return(null===(e=P.company)||void 0===e?void 0:e.id)!=O.id||"w"==Z()||"m"==Z()},console.log({getIsDisabled:f(),projectDetail:null===(m=P.company)||void 0===m?void 0:m.id,companyDetail:O.id,getRole:Z()});var S=function(e){console.log(w.id,i,e)};return B.createElement("div",{className:"w-full custom-task-content"},B.createElement("div",{className:"custom-tab-header2 bg-white h-64 flex relative"},B.createElement($.Z,{value:h,onChange:function(e,t){console.log("newValue",t),_(t)},showLabels:!0,className:"w-full h-64"},B.createElement(K.Z,F()({className:"min-w-auto max-w-full font-bold",label:"Contents",wrapped:!0},ce(0))),B.createElement(K.Z,F()({className:"min-w-auto max-w-full font-bold hidden",label:"Drawings"},ce(1))),B.createElement(K.Z,F()({className:"min-w-auto max-w-full font-bold",label:"Edit"},ce(2)))),B.createElement("div",{className:"absolute right-m-12"},B.createElement(G.Z,{onClick:function(e){return a(oe.X_())},edge:"start",color:"inherit","aria-label":"close",className:"close-icon"},B.createElement(te.Z,null))),!(null==r||!r.isUploading)&&B.createElement("div",{className:"linear-progress custom-color"},B.createElement(ne.default,{progress:r.uploadPercentage,label:n("PROCESSING_UPLOADING_POST")}))),B.createElement("div",{className:"my-24 todo-bg-footer p-12 px-20 rounded"},(null==i?void 0:i.project)&&B.createElement(W.Z,{variant:"h6",color:"inherit",className:"font-size-14 "},B.createElement("div",null,null==i?void 0:i.project.name)),B.createElement("div",{className:"flex items-center font-weight-700 font-size-18"},B.createElement("div",{className:"my-4"},null==i?void 0:i.name," "))),B.createElement(L.Z,{id:"dialog-content",className:"p-0"},B.createElement(ie,{value:h,index:0,class:"write-post-img-full"},B.createElement(ae.default,{taskId:null==i?void 0:i.id,isTask:!0})),B.createElement(ie,{value:h,index:1,className:"bg-white"},B.createElement("div",{className:"sm:mx-12"},B.createElement(re.default,{taskId:null==i?void 0:i.id,attachments:null==i?void 0:i.media_set}))),B.createElement(ie,{value:h,index:2,className:"bg-white"},B.createElement("div",{className:"sm:mx-12"},f()&&B.createElement("div",{className:"flex items-center mb-24"},B.createElement(R.Z,null,"lock")," only company owner can change this details"),B.createElement("div",{className:"flex items-center mb-24"},B.createElement(z.Z,{label:n("TITLE"),disabled:f(),type:"text",name:"name",variant:"outlined",value:j.name,onChange:b,fullWidth:!0,required:!0,InputProps:{endAdornment:B.createElement(Y.Z,{position:"end"},B.createElement(R.Z,{className:"text-20",color:"action"},"remove_red_eye"))}})),null!=i&&i.isGantt&&1==(null==i?void 0:i.parent)?B.createElement("div",{className:"mt-8 mb-16 select-dropdown"},B.createElement(I.default,{isDisabled:f(),placeholder:n("SELECT_PROFILE"),variant:"fixed",isMulti:!0,textFieldProps:{label:"Profile",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){d(e.splice(e.length-1))},value:u,options:p.map(function(e){return{data:e,value:t(e),label:B.createElement("span",{className:"flex items-center"},t(e))}})})):c&&!!c.length&&B.createElement("div",{className:"mt-8 mb-16 select-dropdown"},B.createElement(I.default,{className:"",placeholder:n("SELECT_COMPANY"),isDisabled:f(),variant:"fixed",isMulti:!0,textFieldProps:{label:"Company",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){v(e.splice(e.length-1))},value:g,options:c.map(function(e){var t,n;return{data:e,value:null===(t=e.profile)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.name,label:B.createElement("span",{className:"flex items-center"},B.createElement(R.Z,{className:"list-item-icon mx-6 text-20",style:{color:null===(n=e.profile.company)||void 0===n?void 0:n.color_project},color:"action"},"label")," ",e.profile.company.name)}})})),B.createElement("div",{className:"w-full mb-24"},B.createElement(z.Z,{label:n("DESCRIPTION"),name:"description",value:j.description,disabled:f(),onChange:b,multiline:!0,rows:"4",variant:"outlined",fullWidth:!0})),B.createElement("div",{className:"flex -mx-4"},B.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},B.createElement(V.e,{label:n("START_DATE"),inputVariant:"outlined",format:"DD/MM/yyyy",value:D.startDate,onChange:function(e){N(le(le({},D),{},{startDate:e}))},className:"mt-8 mb-16 w-full",disabled:f()})),B.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},B.createElement(V.e,{label:n("END_DATE"),inputVariant:"outlined",format:"DD/MM/yyyy",value:D.endDate,onChange:function(e){N(le(le({},D),{},{endDate:e}))},className:"mt-8 mb-16 w-full",disabled:f(),minDate:D.startDate}))),null!=i&&i.isGantt&&1==(null==i?void 0:i.parent)?null:B.createElement("div",{className:"mt-24 mx-12 zoom-125"},B.createElement(ue,{"aria-label":"ios slider",disabled:f(),defaultValue:0,marks:se,onChange:function(e,t){return y(t)},value:E,valueLabelDisplay:"on"})),B.createElement("div",{className:"flex justify-end mt-16"},B.createElement(J.Z,{"aria-label":"save",variant:"contained",color:"secondary",type:"submit",size:"small",disabled:!(j.name&&0<j.name.length&&D.startDate&&D.endDate)||f(),onClick:f()?function(){return""}:function(){x(!0),a(i.isGantt&&1==i.parent?oe.Kj(le(le({},j),{},{id:i.id,profile:u},D),w.id,function(){a(oe.X_())},i.isGantt,x):oe.bm(le(le({},j),{},{id:i.id,company:g,profile:u,progress:E},D),w.id,o.type,function(){a(oe.X_())},i.isGantt,x))}},n("SAVE")," ",s&&B.createElement(X.Z,{size:15,color:"secondary"})))))))}},69796:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(51265),r=n.n(a),o=n(78709),l=n(40962),i=n(6274),t=n(70621),c=n(1644),s=n(92466),a=n(29796),u=n(66066);function d(e){var t=m();return o.createElement(c.Z,{display:"flex",alignItems:"center",className:t.progressBox},o.createElement(c.Z,{width:"100%",mr:1},o.createElement(p,r()({variant:"determinate"},e,{value:100}))),o.createElement(c.Z,{className:t.root},o.createElement(s.Z,null,e.label," ","".concat(Math.round(e.value),"%"))))}d.defaultProps={label:"Processing uploading file"};var m=(0,l.Z)({root:{position:"absolute",zIndex:"50",textAlign:"center",width:"100%",color:" white"},progressBox:{width:"300px",margin:"0 auto",position:"relative",top:"-20px"}}),p=(0,i.Z)({root:{height:36,width:300,backgroundColor:(0,t.$n)("#53b987",0),animation:"$myEffect 2s linear infinite",borderRadius:20,backgroundImage:"-webkit-gradient(linear, 0 0, 100% 100%, color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent), color-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent) )",backgroundSize:"50px 50px"},bar:{width:"100%",backgroundColor:"transparent"},"@keyframes myEffect":{"0%":{backgroundPosition:"0px 0px"},"100%":{backgroundPosition:"50px 50px"}}})(a.Z);function f(e){var t=e.progress,n=e.label,e=(0,u.useStyles)();return o.createElement("div",{className:e.root},o.createElement(d,{color:"secondary",label:n,value:t}))}},53103:function(e,t,n){"use strict";n.r(t);var a=n(51265),_=n.n(a),r=n(79545),o=n(56156),l=n.n(o),a=n(61432),Z=n.n(a),k=n(35923),j=n(49073),r=(n(65129),n(6274)),o=n(12303),A=n(99904),S=n(84403),T=n(95272),C=n(92466),F=n(48258),I=n(80896),M=n(41533),L=n(82186),R=n(96282),G=n(19462),Y=n(13786),z=n(65087),a=n(78279),W=n.n(a),U=n(78709),V=n(58913),B=n(92505),H=n(55110),J=n(78278),X=n(11208),$=n(88572),K=n(3089),q=n(35965),Q=n(53369),ee=n(90);function i(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){l()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ne={id:"",title:"",notes:"",startDate:new Date,dueDate:new Date,completed:!1,starred:!1,important:!1,deleted:!1,labels:[]},n="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",ae=[{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80},{value:90},{value:100}],re=(0,r.Z)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:n,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:n}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(o.Z);t.default=function(e){var t=(0,Q.$)("todo_project").t,n=(0,V.I0)(),a=(0,V.v9)(function(e){return e.todoAppNote.todos.todoDialog}),r=((0,V.v9)(function(e){return e.todoAppNote.labels}),(0,V.v9)(function(e){return e.contactsApp.contacts.approvedCompanies})),o=(0,U.useState)(null),l=Z()(o,2),i=(p=(l[0],l[1],(0,k.cI)(te({},ne)))).form,c=p.handleChange,s=p.setForm,u=p.resetForm,o=(W()(i.startDate).format(W().HTML5_FMT.DATETIME_LOCAL_SECONDS),W()(i.dueDate).format(W().HTML5_FMT.DATETIME_LOCAL_SECONDS),(0,U.useState)([])),d=(l=Z()(o,2))[0],m=l[1],p=(0,U.useState)([]),l=(o=Z()(p,2))[0],f=o[1],p=(0,U.useState)([]),g=(o=Z()(p,2))[0],v=o[1],p=(0,U.useState)(0),h=(o=Z()(p,2))[0],E=o[1],p=(0,U.useState)(!1),p=(o=Z()(p,2))[0],y=o[1],b=(0,H.UO)(),o=(0,U.useState)({startDate:new Date,endDate:void 0}),x=(o=Z()(o,2))[0],w=o[1],O=(0,U.useCallback)(function(){var e;console.log({assigned_company:a.data}),"edit"===a.type&&a.data&&s(te({},a.data)),"activity"===a.type&&null!==(e=a.data)&&void 0!==e&&e.assigned_company&&(u(),v([]),D(),w({startDate:new Date(a.data.date_start),endDate:new Date(a.data.date_end)})),"new"===a.type&&(m([]),w({startDate:new Date,endDate:void 0}),s(te(te(te({},ne),a.data),{},{id:j.Z.generateGUID()})))},[a.data,a.type,s]);function P(){return y(!1),"activity"===a.type?n(ee.Bl()):"edit"===a.type?n(ee.a7()):n(ee.Ln())}(0,U.useEffect)(function(){if(a.props.open)return O(),function(){u()}},[a.props.open]);var D=function(e){var t;console.log(b.id,a.data.assigned_company.id,e),(0,$.k)((0,X.GL)(b.id,null===(t=a.data.assigned_company)||void 0===t?void 0:t.id,e),{},function(e){f(e),v(e.filter(function(e){return"Owner"==e.role||"Delegate"==e.role}).map(function(e){return{data:e,value:N(e),label:U.createElement("span",{className:"flex items-center pl-12"},N(e))}}))},function(e){return console.log(e)},$.Y.GET,(0,K.XW)())},N=function(e){return"".concat(e.profile.first_name," ").concat(e.profile.last_name)};return U.createElement(A.Z,_()({},a.props,{onClose:P,fullWidth:!0,maxWidth:"sm",className:"custom-modal-new"}),U.createElement(S.Z,{position:"static",elevation:1},U.createElement(T.Z,{className:"flex"},U.createElement(C.Z,{variant:"h6",color:"inherit"},"new"===a.type?t("NEW_TODO"):"activity"===a.type?t("NEW_ACTIVITY"):t("EDIT_TODO")),U.createElement("div",{className:"absolute right-m-12"},U.createElement(F.Z,{onClick:P,edge:"start",color:"inherit","aria-label":"close"},U.createElement(q.Z,null))))),U.createElement(I.Z,{classes:{root:"p-0"}},U.createElement("div",{className:"px-20 sm:mb-24 mt-16 sm:mt-20 sm:px-32"},U.createElement(M.Z,{className:"mt-8 mb-16",required:!0,fullWidth:!0},U.createElement(L.Z,{label:t("TASK_TITLE"),autoFocus:!0,name:"title",value:i.title,onChange:c,required:!0,variant:"outlined"})),"activity"===a.type?U.createElement("div",{className:"mt-8 mb-16 select-dropdown"},U.createElement(B.default,{placeholder:t("SELECT_PROFILE"),variant:"fixed",isMulti:!0,textFieldProps:{label:"Profile",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){v(e)},value:g,options:l.map(function(e){return{data:e,value:N(e),label:U.createElement("span",{className:"flex items-center"},N(e))}})})):r&&d&&!!r.length&&U.createElement("div",{className:"mt-8 mb-16 select-dropdown"},U.createElement(B.default,{className:"",placeholder:t("SELECT_COMPANY"),variant:"fixed",isMulti:!0,textFieldProps:{label:"Company",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){m(e.splice(e.length-1))},value:d,options:r.map(function(e){var t,n,a,r,o;return{data:e,value:null==e||null===(t=e.profile)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.name,label:U.createElement("span",{className:"flex items-center"},U.createElement(R.Z,{className:"list-item-icon mx-6 text-20",style:{color:null==e||null===(a=e.profile)||void 0===a||null===(r=a.company)||void 0===r?void 0:r.color_project},color:"action"},"label")," ",null==e||null===(o=e.profile)||void 0===o?void 0:o.company.name)}})})),U.createElement(M.Z,{className:"mt-8 mb-16",required:!0,fullWidth:!0},U.createElement(L.Z,{label:t("NOTES"),name:"notes",multiline:!0,rows:"6",value:i.notes,onChange:c,variant:"outlined"})),U.createElement("div",{className:"flex -mx-4"},U.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},U.createElement(J.e,{label:t("START_DATE"),inputVariant:"outlined",format:"DD/MM/yyyy",value:x.startDate,onChange:function(e){w(te(te({},x),{},{startDate:e}))},className:"mt-8 mb-16 w-full"})),U.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},U.createElement(J.e,{label:t("END_DATE"),inputVariant:"outlined",format:"DD/MM/yyyy",value:x.endDate,onChange:function(e){w(te(te({},x),{},{endDate:e}))},minDate:x.startDate,className:"mt-8 mb-16 w-full"}))),U.createElement("div",{className:"w-full zoom-125"},U.createElement("label",null,U.createElement("small",null,t("TASK_PROGRESS"))),U.createElement("div",{className:"mx-8 mt-32 custom-ios-slider"},U.createElement(re,{"aria-label":"ios slider",defaultValue:0,marks:ae,onChange:function(e,t){return E(t)},valueLabelDisplay:"on"}))))),"new"===a.type||"activity"===a.type?U.createElement(G.Z,{className:"p-16 pb-24 px-44"},U.createElement(Y.Z,{variant:"contained",color:"primary",size:"large",onClick:function(){var e;y(!0),n(ee.rk(te(te({},i),{},{id:null===(e=a.data)||void 0===e?void 0:e.id,company:d,profile:g,progress:h},x),b.id,a.type,P,null===(e=a.data)||void 0===e?void 0:e.isGantt))},disabled:!(0<i.title.length&&x.startDate&&x.endDate)},t("ADD")," ",p&&U.createElement(z.Z,{size:15,color:"secondary"}))):U.createElement(G.Z,{className:"justify-between p-8"},U.createElement("div",{className:"px-16"},U.createElement(Y.Z,{variant:"contained",color:"primary",size:"large"},t("SAVE"))),U.createElement(F.Z,{className:"min-w-auto"},U.createElement(R.Z,null,"delete"))))}},26258:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var a=n(28348),r=n(79545),l=n.n(r),o=n(56156),i=n.n(o),c=n(3089),s=n(90);function u(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return d(d({},e),{},{isActive:!1})})}function p(e){var r=(0,c.Fc)(),e=e.reduce(function(e,t){var n,a=[];return t.assigned_company&&null!=r&&(null!==(n=r.extra)&&void 0!==n&&n.profile)&&t.assigned_company.id==r.extra.profile.company&&(a=function n(e){return Array.isArray(e)&&e.reduce(function(e,t){return e.concat(Array.isArray(t.workers)?n(t.workers):t)},[])}(t.activities)),e=Array.isArray(a)?[].concat(l()(e),l()(a)):e},[]);return m(f(e))}var f=function(e){e=e.reduce(function(e,t){return e.some(function(e){return e.id===t.id})||e.push(t),e},[]);return m(e)};var g=["projectFilter","companyFilter","peopleFilter"],t=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){localStorage.getItem("genrealFilterJsonDataProject"),localStorage.getItem("timeFilterJsonDataProject");var e=new Date,t=e.getDate()+7;return e.setDate(t),{projectFilter:[],companyFilter:[],peopleFilter:[],activeFilter:"genrealFilter",activeFilterKey:"ALL",usedKeys:[],genrealFilter:[{name:"MINE",isActive:!1,icon:"person"},{name:"ALL",isActive:!0,icon:"all_inbox"},{name:"ALERTED",isActive:!1,icon:"announcement"}],timeFilter:[{name:"TODAY",isActive:!1,icon:"today"},{name:"NEXT_WEEK",isActive:!1,icon:"next_week"},{name:"IN_LATE",isActive:!1,icon:"av_timer"},{name:"COMPLETED",isActive:!1,icon:"done"}]}}(),n=1<arguments.length?arguments[1]:void 0;switch(n.type){case s.y$:return d(d({},e),{},{projectFilter:n.payload.reduce(function(e,t){return e.some(function(e){return e.name===(null===(e=t.project)||void 0===e?void 0:e.name)})||e.push(d({},t.project)),e},[]),companyFilter:function(e){e=e.reduce(function(e,t){return t.assigned_company&&!e.some(function(e){return e.id===t.assigned_company.id})&&e.push(d({},t.assigned_company)),e},[]);return m(e)}(n.payload),peopleFilter:p(n.payload),usedKeys:["genrealFilter","timeFilter"]});case s.hN:return d(d({},e),{},{projectFilter:m(e.projectFilter),companyFilter:m(e.companyFilter),peopleFilter:m(e.peopleFilter),genrealFilter:m(e.genrealFilter),timeFilter:m(e.timeFilter)});case s.O0:var t,a=(a=l()(e.usedKeys)).filter(function(e){return e!=n.payload.activeFilter}),r=e[n.payload.activeFilter].map(function(e){if(e.name!=n.payload.activeFilterKey&&e.id!=n.payload.activeFilterKey)return g.includes(n.payload.activeFilter)?e:d(d({},e),{},{isActive:!1});var t=!e.isActive;return d(d({},e),{},{isActive:t})}),o=r.filter(function(e){return e.isActive});return console.log({allActivited:o}),null!=o&&o.length&&a.push(n.payload.activeFilter),"genrealFilter"===n.payload.activeFilter&&(o=JSON.stringify(r),localStorage.setItem("genrealFilterJsonDataProject",o)),"timeFilter"===n.payload.activeFilter&&(t=JSON.stringify(r),localStorage.setItem("timeFilterJsonDataProject",t)),d(d({},e),{},(t={},i()(t,n.payload.activeFilter,r),i()(t,"usedKeys",a),t),n.payload);default:return e}},r=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;return t.type!==s.Hz?e:l()(t.payload)},o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;return t.type!==s.D4?e:l()(t.payload)};n(65129);function v(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach(function(e){i()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var E={isLoadingTodos:!1,upload:{isUploading:!1,uploadPercentage:0},entities:[],searchText:"",orderBy:"",orderDescending:!1,routeParams:{},todoDialog:{type:"new",props:{open:!1},data:null},taskContentDialog:{type:"new",props:{open:!1},data:null},isNotificationDialog:!1,notificationPost:{},isStateConfirmDialog:!1,statusPost:{},okStateConfirmDialog:!1,openDrawingContent:!1},y=(0,a.UY)({todos:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:E,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case s.y$:return console.log({payload:t.payload,isGantt:t.isGantt}),h(h({},e),{},(n={},i()(n,t.isGantt?"entities":"todoEntities",h({},t.payload)),i()(n,"searchText",""),i()(n,"routeParams",t.routeParams),n));case s.Tu:return h(h({},e),{},i()({},t.isGantt?"entities":"todoEntities",t.payload));case s.sJ:return h(h({},e),{},{todoDialog:{type:"new",props:{open:!0},data:t.data||null}});case s.Wo:return h(h({},e),{},{taskContentDialog:{type:"new",props:{open:!0},data:t.data}});case s.kK:return h(h({},e),{},{openDrawingContent:!0,taskContentDialog:{type:"new",props:{open:!1},data:t.data}});case s.Xg:return h(h({},e),{},{openDrawingContent:!1});case s.X1:return h(h({},e),{},{isNotificationDialog:!0,notificationPost:t.data});case s.rv:return h(h({},e),{},{isNotificationDialog:!1});case s.JV:return h(h({},e),{},{isStateConfirmDialog:!0,statusPost:t.data});case s.p2:return h(h({},e),{},{isStateConfirmDialog:!1,okStateConfirmDialog:!1});case s.Im:return h(h({},e),{},{okStateConfirmDialog:!0});case s.WL:return h(h({},e),{},{taskContentDialog:h(h({},e.taskContentDialog),{},{data:h(h({},e.taskContentDialog.data),t.data)})});case s.uq:return h(h({},e),{},{taskContentDialog:{type:"new",props:{open:!1},data:null}});case s.AS:return h(h({},e),{},{todoDialog:{type:"new",props:{openTimelineDialog:!0},data:t.todo}});case s.cS:return h(h({},e),{},{isLoadingTodos:t.payload});case s.W6:return h(h({},e),{},{upload:h(h({},e.upload),{},{isUploading:t.payload,uploadPercentage:0})});case s.VL:return h(h({},e),{},{upload:h(h({},e.upload),{},{uploadPercentage:t.payload})});case s.bP:return h(h({},e),{},{todoDialog:h(h({},e.todoDialog),{},{data:h(h({},e.todoDialog.data),t.todo)})});case s.r8:return h(h({},e),{},{todoDialog:{type:"new",props:{open:!1},data:null}});case s.lt:return h(h({},e),{},{todoDialog:{type:"new",props:{openTimelineDialog:!1},data:null}});case s.__:return h(h({},e),{},{todoDialog:{type:"edit",props:{open:!0},data:t.data}});case s.t7:return h(h({},e),{},{todoDialog:{type:"edit",props:{open:!1},data:null}});case s.s8:return h(h({},e),{},{todoDialog:{type:"activity",props:{open:!0},data:t.data}});case s.Wy:return h(h({},e),{},{todoDialog:{type:"activity",props:{open:!1},data:null}});case s.Iu:var n=t.payload;return h(h({},e),{},i()({},t.isGantt?"entities":"todoEntities",h(h({},e.entities),{},i()({},n.id,h({},n)))));case s.TF:return h(h({},e),{},{searchText:t.searchText});case s.v0:return h(h({},e),{},{orderDescending:!e.orderDescending});case s._V:return h(h({},e),{},{orderBy:t.orderBy});default:return e}},folders:r,labels:o,filters:t})},7074:function(e,t,n){"use strict";n.d(t,{O0:function(){return $},_V:function(){return E},Wy:function(){return N},Xg:function(){return w},t7:function(){return v},r8:function(){return f},uq:function(){return b},lt:function(){return P},Hz:function(){return J},D4:function(){return X},y$:function(){return r},s8:function(){return D},kK:function(){return x},__:function(){return g},sJ:function(){return s},Wo:function(){return y},AS:function(){return O},TF:function(){return c},W6:function(){return _},VL:function(){return Z},v0:function(){return h},Iu:function(){return i},Tu:function(){return o},P7:function(){return K},Bl:function(){return F},ue:function(){return Y},a7:function(){return W},Ln:function(){return z},X_:function(){return I},aP:function(){return C},yv:function(){return M},bm:function(){return V},LC:function(){return S},Am:function(){return U},WL:function(){return G},tp:function(){return R},F8:function(){return B},FD:function(){return H},VX:function(){return j},iw:function(){return A},CU:function(){return L}});n(56156);var t=n(31806),a=n.n(t),u=n(11208),d=n(88572),m=n(3089),t=n(78279),p=n.n(t),l=n(43812);var r="[TODO APP] GET TODOS",o="[TODO APP] UPDATE TODOS",i="[TODO APP] UPDATE TODO",c="[TODO APP] SET SEARCH TEXT",s="[TODO APP] OPEN NEW TODO DIALOG",f="[TODO APP] CLOSE NEW TODO DIALOG",g="[TODO APP] OPEN EDIT TODO DIALOG",v="[TODO APP] CLOSE EDIT TODO DIALOG",h="[TODO APP] TOGGLE ORDER DESCENDING",E="[TODO APP] CHANGE ORDER",y="[TODO APP] OPEN TASK CONTENT DIALOG",b="[TODO APP] CLOSE TASK CONTENT DIALOG",x="[TODO APP] OPEN DRAWING CONTENT DIALOG",w="[TODO APP] CLOSE DRAWING CONTENT DIALOG",O="[TODO APP] OPEN TIMELINE DIALOG",P="[TODO APP] CLOSE TIMELINE DIALOG",D="[TODO APP] OPEN ACTIVITY TODO DIALOG",N="[TODO APP] CLOSE ACTIVITY TODO DIALOG",_="[TODO APP] SET UPLOAD ",Z="[TODO APP] SET UPLOAD PERCENTAGE ";function k(e,t){return e.id>t.id?1:e.id<t.id?-1:0}function j(e){return{type:_,payload:e}}function A(e){return{type:Z,payload:e}}function S(e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return""};return a({loadingTodos:!0}),function(t,e){var n=null===(e=e().auth.user.data.extra)||void 0===e?void 0:e.profile.company;(0,d.k)(u.Qh,{},function(e){a({loadingTodos:!1}),t({type:r,payload:e.sort(k),companyId:n})},function(e){a({loadingTodos:!1}),console.log(e)},d.Y.GET,(0,m.XW)())}}function T(){return function(t,e){e=e().todoApp.todos.routeParams;return a().get("/api/todo-app/todos",{params:e}).then(function(e){return t({type:o,payload:e.data})})}}function C(){return{type:P}}function F(){return{type:N}}function I(){return{type:b}}function M(n,a,r,o){return function(t){console.log(n,n.profile);var e={title:n.title,description:n.notes,datetime_start:p()(n.startDate).format("YYYY-MM-DD"),datetime_end:p()(n.endDate).format("YYYY-MM-DD"),status:n.progress,workers:null!==(e=n.profile)&&void 0!==e&&e.length?n.profile.map(function(e){return(e.data.profile||e.data).id}):void 0};(0,d.k)((0,u.E1)(n.id),e,function(e){o&&(t(S(a,o)),t(C())),console.log(e),r(!1),l.Am.success("Updated")},function(e){return console.log(e)},d.Y.PUT,(0,m.XW)())}}function L(e){var n=a().post("/api/todo-app/update-todo",e);return function(t){return n.then(function(e){Promise.all([t({type:i,payload:e.data})]).then(function(){return t(T())})})}}function R(e){return{type:y,data:e}}function G(e){return{type:x,data:e}}function Y(){return{type:w}}function z(){return{type:f}}function W(){return{type:v}}function U(t){return function(e){return e({type:D,data:t})}}function V(a,r,o,l,i,c,s){return console.log({todo:a}),function(t){var e,n="new"==o?{name:a.name,note:a.description,progress:a.progress,date_start:p()(a.startDate).format("YYYY-MM-DD"),date_end:p()(a.endDate).format("YYYY-MM-DD"),assigned_company:null!==(e=a.company[0].data)&&void 0!==e&&(null!==(e=e.profile)&&void 0!==e&&e.company)?a.company[0].data.profile.company.id:null!==(n=a.company[0].data)&&void 0!==n&&n.id?a.company[0].data.id:void 0,project:r,date_completed:null,alert:!1,starred:!1}:{title:a.title,description:a.notes,datetime_start:p()(a.startDate).format("YYYY-MM-DD"),datetime_end:p()(a.endDate).format("YYYY-MM-DD"),profile:a.profile[0]?a.profile[0].data.profile.id:void 0};(0,d.k)(("new"==o?(0,u.KR):(0,u.he))(a.id),n,function(e){c(!1),t(S(r,i,s)),l()},function(e){return console.log(e)},d.Y.PUT,(0,m.XW)())}}function B(e){return{type:O,todo:e}}function H(e){return{type:c,searchText:e.target.value.toLowerCase()}}var J="[TODO APP] GET FOLDERS";var X="[TODO APP] GET LABELS";var $="[TODO APP] CHANGE FILTERS";function K(t){return function(e){return e({type:$,payload:t})}}},40349:function(e,t,n){"use strict";var a=n(68922),a=n.n(a)()(function(e){return e[1]});a.push([e.id,"/* .gantt-min-height {\n\tmin-height: calc(100vh - 195px);\n} */\n.nested_task {\n\t/* background-color: #dedede !important; */\n\tbackground-color: rgb(236 236 238 / 0.30) !important;\n}\n.nested_task .gantt_add {\n\tdisplay: none !important;\n}\n.nested_task.gantt_selected{\n\tbackground-color: #fff3a1 !important\n}\n.hide_add .gantt_add {\n\tdisplay: none !important;\n}\n.hide_add.gantt_grid_head_add {\n\tdisplay: none !important;\n}\n.hide_tree_icon .gantt_tree_icon.gantt_open {\n\tdisplay: none !important;\n}\n.hide_tree_icon .gantt_folder_closed {\n\tmargin-left: 18px;\n}\n.hide_progress_drag .gantt_task_progress_drag {\n\tdisplay: none !important;\n}\n.hide_date_drag .gantt_task_drag.task_right {\n\tdisplay: none !important;\n}\n.hide_date_drag .gantt_task_drag.task_left {\n\tdisplay: none !important;\n}\n.important {\n\tborder: 2px solid red;\n\tcolor: red;\n\tbackground: red;\n}\n.important .gantt_task_progress {\n\tbackground: #ff5956;\n}\n.nested_task_right {\n\tborder: 2px solid lightgreen;\n\tcolor: lightgreen;\n\tbackground: lightgreen;\n}\n.nested_task_right .gantt_task_progress {\n\tbackground: green;\n}\n.status_line {\n\tbackground-color: #0ca30a;\n}\n.weekend {\n\tbackground: #f4f7f4;\n}\n\n.gantt_selected .weekend {\n\tbackground: #f7eb91;\n}\n.gantt_modal_box {\n\tmin-width: 750px;\n\ttop: 50% !important;\n\tleft: 50% !important;\n\ttransform: translate(-50%, -50%);\n\tfont-family: inherit;\n}\n.gantt_modal_box table td {\n\tpadding: 0.75rem;\n\tborder-top: 1px solid #dee2e6;\n}\n.gantt_modal_box .gantt_popup_text {\n\tmax-height: 500px;\n\toverflow-y: auto;\n\tmargin: 0px;\n}\n.gantt_modal_box .gantt_popup_title {\n\tborder-bottom: 1px solid #dee2e6;\n\theight: 55px;\n\tline-height: 55px;\n}\n.gantt_popup_button {\n\tline-height: 28px;\n\tbackground: #232428;\n\tcolor: #fff;\n}\n.gantt_row.block_row_events  {\n\tpointer-events: none !important;\n\ttouch-action: none;\n}\n.gantt_task_line.block_row_events  {\n\tpointer-events: none !important;\n\ttouch-action: none;\n}\n.gantt_grid_scale, .gantt_task_scale {\n    color: #1E2129 !important;\n    font-weight: 700 !important;\n}\n.nested_task {\n    background-color: rgb(236 236 238 / 0.30) !important;\n}\n.gantt_grid_data .gantt_cell {\n    color: #5C616F !important;\n}\n/* .gantt_task_progress {\n\tbackground-color: rgba(54, 54, 54, 0.2) !important;\n\topacity: 1 !important;\n} */",""]),t.Z=a},22675:function(e,t,n){"use strict";var a=n(68922),a=n.n(a)()(function(e){return e[1]});a.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Roboto:400,500,700);"]),a.push([e.id,'.landing-view-demo{\n    min-height: 641px;\n}\n\n.demo-main-container{\n    height: 641px;\n    z-index: 4; /* for fullscreen mode of gantt*/\n}\n.demo-main-content{\n    height: calc(100% - 41px);\n    background: #fff;\n}\n\n#gantt_here{\n    width:100%;\n    height: calc(100% - 41px);\n    position:absolute;\n    background: #fff;\n}\n\n.gantt-advantage-col-1 .container-img,\n.gantt-advantage-col-2 .container-img {\n    max-width: 182px;\n    margin: 0 auto;\n}\n\n.gantt-demo-header{\n    border-top: 1px solid #cecece;\n    border-left: 1px solid #cecece;\n    border-right: 1px solid #cecece;\n}\n\n.gantt-controls {\n    background-color: #f5f5f5;\n    font-size:14px;\n    list-style-type: none;\n    margin: 0;\n    overflow: visible;\n    padding: 0;\n    text-align: left;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\n.gantt-menu-item {\n    display:inline-block;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n\n    position: relative;\n    overflow: visible;\n    /*padding:0 10px;*/\n}\n\n.gantt-menu-item-right {\n    float: right;\n}\n\n.gantt-menu-item img {\n    margin-right: 8px;\n    vertical-align: middle;\n}\n.gantt-menu-item svg {\n    margin-right: 8px;\n    vertical-align: middle;\n    font-size: \'1.5rem\',\n}\n.gantt-menu-item a {\n    display: block;\n    cursor: pointer;\n    color: #3d3d3d;\n    text-align: center;\n    line-height: 40px;\n    padding:0 10px;\n    text-decoration: none;\n}\n\n.gantt-menu-item a:hover {\n    background-color: #e2e2e2;\n}\n\n.gantt-controls .gantt-controls{\n    display: none;\n}\n.gantt-menu-item:hover .gantt-controls{\n    display: block;\n    left:0;\n    padding: 5px 0;\n    position: absolute;\n    top:41px;\n    z-index: 5;\n}\n\n.gantt-menu-item .menu-item-active{\n    background-color: #dadada !important;\n}\n\n.gantt-menu-item.menu-item-disabled{\n    color: #818181 !important;\n    pointer-events:none;\n}\n\n.gantt-menu-item:hover .gantt-controls li{\n    width:100%;\n}\n.gantt-menu-item:hover .gantt-controls a{\n    white-space: nowrap;\n    text-align: left;\n}\n\n.gantt-menu-item:hover .gantt-controls::before{\n    position: absolute;\n    top:-7px;\n    width:100%;\n    content:" ";\n    height:10px;\n    background: transparent;\n    left:0;\n    z-index: 5;\n}\n\n.gantt-menu-item-last {\n    border-right: 1px solid #cecece;\n}\n\n.status_line{\n    background-color: #0ca30a;\n}\n\n\n.gantt_grid_wbs{\n    position: absolute;\n}\n\n.gantt_grid_scale{\n    position: relative;\n    z-index: 1;\n}\n\n\n\n.dnd_highlighter {\n    position: absolute;\n    height: 4px;\n    width: 500px;\n    background-color: #3498db;\n}\n.dnd_highlighter::before{\n    background: transparent;\n    width: 12px;\n    height: 12px;\n    box-sizing: border-box;\n    border: 3px solid #3498db;\n    border-radius: 6px;\n    content: "";\n    line-height: 1px;\n    display: block;\n    position: absolute;\n    margin-left: -11px;\n    margin-top: -4px;\n}\n\n.gantt_tooltip {\n    font-size: 14px;\n    line-height: 120%;\n    border-bottom:1px solid #b3b3b3;\n    border-right:1px solid #b3b3b3;\n    border-color: #b3b3b3;\n}\n\n.gantt_drag_marker{\n    opacity: 0.6;\n}\n\n.gantt_drag_marker.gantt_grid_resize_area{\n    z-index: 1;\n}\n\n.gantt_parent_row{\n    font-weight: bold;\n}\n\n.gantt_task_line div.gantt_side_content{\n    bottom: 0;\n}\n\n.gantt-top-panel{\n    position: relative;\n    color: #fff;\n    padding: 11px 16px;\n    background: #3d3d3d;\n}\n\n.gantt-top-panel__btn{\n    display: inline-block;\n    color: #fff;\n    padding: 7px 24px;\n    text-decoration: none;\n    border-radius: 20px;\n    background: #2095f3;\n\n    position: absolute;\n    right: 8px;\n    top: 50%;\n    margin-top: -16px;\n}\n\n.gantt-top-panel__btn:hover{\n    background: #03a9f4;\n}\n\n.gantt-top-panel__btn:focus{\n    outline: none;\n}\n\n.gantt-top-panel__btn:active{\n    transform: translateY(1px);\n    -webkit-transform: translateY(1px);\n}\n.salesforce-banner {\n    margin-top: 80px;\n    width: 100%;\n    text-align: center;\n    background-color: #fff;\n}\n.salesforce-banner__link {\n    color: #03a9f4;\n    font: inherit;\n    transition: color .2s ease-in-out;\n    font-size: 20px;\n    font-family: Roboto, sans-serif;\n    line-height: 24px;\n}\n.salesforce-banner__link:hover {\n    color: #2095f3;\n}\n.salesforce-banner__link:after {\n    content: "\\00a0\\003e";\n    display: inline-block;\n    transition: transform .2s ease-in-out;\n}\n.salesforce-banner__link:hover:after {\n    transform: translateX(10px);\n    -webkit-transform: translateX(10px);\n    -moz-transform: translateX(10px);\n    -ms-transform: translateX(10px);\n    -o-transform: translateX(10px);\n}\n.gantt-menu-item img, svg, video, canvas, audio, iframe, embed, object {\n    display: -webkit-inline-box;\n}\n@media screen and (max-width: 768px) {\n    .salesforce-banner {\n        margin-top: 30px;\n        text-align: center;\n    }\n    .salesforce-banner__link {\n        font-size: 16px;\n    }\n}',""]),t.Z=a},49080:function(){},57588:function(){},3071:function(){},4918:function(){},15232:function(){}}]);