(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[34018,41934],{97115:function(e,t,n){"use strict";var u=n(78709),s=n(91169),d=(n(16526),n(17700)),p=n(70198);var f="undefined"!=typeof window?u.useLayoutEffect:u.useEffect;t.Z=u.forwardRef(function(e,t){var n=e.children,r=e.container,o=e.disablePortal,a=void 0!==o&&o,i=e.onRendered,e=u.useState(null),l=e[0],c=e[1],e=(0,p.Z)(u.isValidElement(n)?n.ref:null,t);return f(function(){var e;a||c((e="function"==typeof(e=r)?e():e,s.findDOMNode(e)||document.body))},[r,a]),f(function(){if(l&&!a)return(0,d.Z)(t,l),function(){(0,d.Z)(t,null)}},[t,l,a]),f(function(){i&&(l||a)&&i()},[i,l,a]),a?u.isValidElement(n)?u.cloneElement(n,{ref:e}):n:l&&s.createPortal(n,l)})},13117:function(e,t,n){"use strict";n.d(t,{n:function(){return r},C:function(){return o}});var r=function(e){return e.scrollTop};function o(e,t){var n=e.timeout,e=e.style,e=void 0===e?{}:e;return{duration:e.transitionDuration||"number"==typeof n?n:n[t.mode]||0,delay:e.transitionDelay}}},88514:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r,o){return null==o?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(this,t),o.apply(this,t)}},function(){})}n.d(t,{Z:function(){return r}})},92505:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var t=n(56156),r=n.n(t),t=n(20305),o=n.n(t),t=n(51265),a=n.n(t),i=n(78709),t=n(40962),l=n(389),c=n(92466),u=n(82186),s=n(41713),d=n(23610),p=n(86926),f=n(28344),m=n(67485),v=n(94435);function g(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}var h=(0,t.Z)(function(e){return{root:{"& .fuse-chip-select__input":{color:e.palette.text.primary},"&.standard":{"& $placeholder":{},"& $valueContainer":{paddingTop:4}},"&.filled":{"& $placeholder":{left:12},"& $valueContainer":{paddingTop:24,paddingLeft:12},"& $chip":{border:"1px solid rgba(0, 0, 0, 0.12)"}},"&.outlined":{"& $placeholder":{left:12},"& $valueContainer":{paddingLeft:12,paddingTop:12}}},input:{display:"flex",padding:0,height:"auto"},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",paddingBottom:4,paddingTop:12,minHeight:40},chip:{margin:"4px 4px 4px 0"},chipFocused:{backgroundColor:(0,l.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing(),"px ").concat(e.spacing(2),"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:0,fontSize:16,margin:0},paper:{position:"absolute",zIndex:2,marginTop:e.spacing(),left:0,right:0},divider:{height:e.spacing(2)}}});function b(e){var t=e.inputRef,e=o()(e,["inputRef"]);return i.createElement("div",a()({ref:t},e))}var y={Control:function(e){var t=h();return i.createElement(u.Z,a()({fullWidth:!0,className:(0,f.Z)(t.root,e.selectProps.textFieldProps.variant),required:e.selectProps.required,error:e.selectProps.error,InputProps:{inputComponent:b,inputProps:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({className:t.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){var t=h();return i.createElement(p.Z,a()({square:!0,className:t.paper},e.innerProps),e.children)},MultiValue:function(t){var e=h();return i.createElement(d.Z,{tabIndex:-1,label:t.children,className:(0,f.Z)(e.chip,r()({},e.chipFocused,t.isFocused),t.data.class),onDelete:function(e){t.removeProps.onClick(),t.removeProps.onMouseDown(e)}})},NoOptionsMessage:function(e){var t=h();return i.createElement(c.Z,a()({color:"textSecondary",className:t.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return i.createElement(s.Z,a()({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?600:400}},e.innerProps),e.children)},Placeholder:function(e){var t=h();return i.createElement(c.Z,a()({color:"textSecondary",className:t.placeholder},e.innerProps),e.children)},SingleValue:function(e){var t=h();return i.createElement(c.Z,a()({className:t.singleValue},e.innerProps),e.children)},ValueContainer:function(e){var t=h();return i.createElement("div",{className:t.valueContainer},e.children)}};function x(t){function e(e){null===e&&(e=[]),t.onChange&&t.onChange(e)}return"fixed"===t.variant?i.createElement(m.ZP,a()({classNamePrefix:"fuse-chip-select"},t,{components:y,onChange:e})):i.createElement(v.ZP,a()({classNamePrefix:"fuse-chip-select"},t,{components:y,onChange:e}))}var P=i.memo(x)},41934:function(e,t,n){"use strict";n.r(t);var r=n(56156),o=n(79545),x=n.n(o),a=n(61432),P=n.n(a),i=n(51265),l=(n(20305),n(16526)),r=n.n(l),o=n(32986),w=(n(92505),n(35923)),a=(n(65129),n(1644),n(92466),n(40962)),i=n(6274),c=n(12303),E=n(96282),C=n(48258),D=n(80896),l=n(78279),Z=n.n(l),k=n(78709),O=n(58913),N=n(55110),_=n(7074),S=n(3089),j=n(53369),R=n(35965);(0,o.ZP)(function(){return Promise.all([n.e(66066),n.e(79718)]).then(n.bind(n,69796))}),(0,o.ZP)(function(){return Promise.all([n.e(38192),n.e(52624)]).then(n.bind(n,52624))});var T=(0,o.ZP)(function(){return Promise.all([n.e(62475),n.e(10930),n.e(79337),n.e(4330),n.e(84982)]).then(n.bind(n,4330))});r().node,r().any.isRequired,r().any.isRequired;(0,a.Z)(function(e){return{root:{flexGrow:1,minHeight:"100%",backgroundColor:e.palette.background.paper}}});a="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",(0,i.Z)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:a,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:a}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(c.Z);t.default=function(e){function t(e){return"".concat(e.first_name," ").concat(e.last_name)}(0,j.$)("dashboard").t;var n=(0,O.I0)(),r=((0,O.v9)(function(e){return e.todoApp.todos.upload}),(0,O.v9)(function(e){return e.todoApp.todos.taskContentDialog}),(0,O.v9)(function(e){return null===(e=e.todoApp.todos.taskContentDialog)||void 0===e?void 0:e.data})),o=(0,O.v9)(function(e){return e.todoAppNote.todos.openDrawingContent}),a=(0,O.v9)(function(e){return e.contactsApp.contacts.approvedCompanies}),i=(0,k.useState)([]),l=((p=P()(i,2))[0],p[1]),i=(0,k.useState)([]),i=((p=P()(i,2))[0],p[1],(0,k.useState)([])),c=((p=P()(i,2))[0],p[1]),i=(0,k.useState)(0),u=((p=P()(i,2))[0],p[1]),i=(0,k.useState)(!1),s=((p=P()(i,2))[0],p[1],(0,N.UO)()),d=(0,O.v9)(function(e){e=e.chatApp;return null==e?void 0:e.company}),i=null==r?void 0:r.project,p=(0,k.useState)({startDate:new Date,endDate:void 0}),f=((p=P()(p,2))[0],p[1]),p=k.useState(0),m=((p=P()(p,2))[0],p[1]);function v(){var e;return null==h||null===(e=h.extra)||void 0===e?void 0:e.profile.role}(0,k.useEffect)(function(){var e;console.log("openDrawingContent?????????????????????????",o),o&&(m(1),"wrapped-tab-".concat(e=1),"wrapped-tabpanel-".concat(e))},[o]),(0,k.useEffect)(function(){var e;a&&a.length&&r&&(e=x()(a).filter(function(e){var t,n;return(null===(e=e.profile)||void 0===e||null===(t=e.company)||void 0===t?void 0:t.id)==(null==r||null===(n=r.assigned_company)||void 0===n?void 0:n.id)}).map(function(e){var t,n;return{data:e,value:null===(t=e.profile)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.name,label:k.createElement("span",{className:"flex items-center"},k.createElement(E.Z,{className:"list-item-icon mx-6 text-20",style:{color:null===(n=e.profile.company)||void 0===n?void 0:n.color_project},color:"action"},"label")," ",e.profile.company.name)}}),c(e)),r&&(console.log({taskContentData:r,date_start:r.date_start}),r.isGantt&&1==r.parent?(f({startDate:new Date(r.datetime_start),endDate:new Date(r.datetime_end)}),u(r.progress),l(r.workers.map(function(e){return{data:e,value:t(e),label:k.createElement("span",{className:"flex items-center"},t(e))}})),y()):(f({startDate:new Date(r.date_start),endDate:new Date(r.date_end)}),u(r.progress),c([{data:r.assigned_company}])))},[a,r]),(0,k.useEffect)(function(){m(0)},[r]);var g,h=(0,S.Fc)(),b=(p=(0,w.cI)({name:1==(null==r?void 0:r.parent)?null==r?void 0:r.title:null==r?void 0:r.name,description:1==(null==r?void 0:r.parent)?null==r?void 0:r.description:null==r?void 0:r.note})).form;p.handleChange,p.setForm,p.setInForm,b&&b.due&&Z()(b.due).format(Z().HTML5_FMT.DATE),console.log({getIsDisabled:(null==r||null===(g=r.assigned_company)||void 0===g?void 0:g.id)!=d.id||"w"==v()||"m"==v(),projectDetail:i,companyDetail:d.id,getRole:v()});var y=function(e){console.log(s.id,r,e)};return k.createElement("div",{className:"w-full custom-task-content mt-20"},k.createElement("div",{className:"absolute right-m-12"},k.createElement(C.Z,{onClick:function(e){return n(_.ue())},edge:"start",color:"inherit","aria-label":"close",className:"close-icon"},k.createElement(R.Z,null))),k.createElement(D.Z,{id:"dialog-content",className:"p-0"},k.createElement("div",{className:"sm:mx-12"},k.createElement(T,{taskId:null==r?void 0:r.id,attachments:null==r?void 0:r.media_set}))))}}}]);