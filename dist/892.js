(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[892,10991],{10991:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var t=r(61432),n=r.n(t),t=r(82853),o=r.n(t),t=r(82147),c=r.n(t),t=r(40734),l=r.n(t),t=r(38050),i=r.n(t),t=r(3056),s=r.n(t),t=r(71470),u=r.n(t),t=r(56156),f=r.n(t),m=r(48258),d=r(96282),p=r(78709),t=r(78279),b=r.n(t);function h(r){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=u()(r);return t=a?(e=u()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),s()(this,t)}}var g=new(r(86351))({bitRate:320}),a=function(e){i()(a,e);var t=h(a);function a(e){var r;return o()(this,a),r=t.call(this,e),f()(l()(r),"startRecording",function(){g.start().then(function(){r.setState({record:!0})}).catch(function(e){console.error(e)})}),f()(l()(r),"stopRecording",function(){r.setState({record:!1}),g.stop().getMp3().then(function(e){var t=n()(e,2),e=t[0],t=t[1],t=new File(e,"Record ".concat(b()().format("ll"),".mp3"),{type:t.type,lastModified:Date.now()});r.props.afterRecordComplete(t)}).catch(function(e){alert("We could not retrieve your message")})}),f()(l()(r),"sendDirectToChat",function(){r.state.record&&(r.setState({record:!1}),g.stop().getMp3().then(function(e){var t=n()(e,2),e=t[0],t=t[1],t=new File(e,"Record ".concat(b()().format("ll"),".mp3"),{type:t.type,lastModified:Date.now()});r.props.sendDirectToChat(t)}).catch(function(e){alert("We could not retrieve your message")}))}),r.state={record:!1},r}return c()(a,[{key:"render",value:function(){return p.createElement("div",null,this.state.record?p.createElement(p.Fragment,null,p.createElement("div",{className:"sound-icon"},p.createElement("div",{className:"sound-wave"},p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}),p.createElement("i",{className:"bar"}))),p.createElement("div",{className:"blink"}),p.createElement(m.Z,{key:"close","aria-label":"Close",color:"inherit",onClick:this.stopRecording},p.createElement(d.Z,null,"mic"))):p.createElement(m.Z,{key:"close","aria-label":"Close",color:"inherit",onClick:this.startRecording},p.createElement(d.Z,null," mic_off")))}}]),a}(p.Component)},892:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var t=r(79545),f=r.n(t),t=r(68357),m=r.n(t),t=r(61432),d=r.n(t),t=r(28129),p=r.n(t),b=r(86926),h=r(82186),g=r(48258),R=r(96282),t=r(40962),E=r(78709),v=r(58913),y=r(3089),x=r(55110),N=r(10991),k=r(53369),C=r(66942),L=(0,r(32986).ZP)(function(){return r.e(76966).then(r.bind(r,76966))}),w=(0,t.Z)(function(){return{messageRow:{"&.contact":{"& .bubble":{backgroundColor:"#fff",color:"#1E2129",boxShadow:"0 1px 3px #00000029",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:5,borderBottomRightRadius:5},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:15}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:15}}},"&.me":{paddingLeft:20,"& .avatar":{order:2,margin:"0 0 0 16px"},"& .bubble":{marginLeft:"auto",backgroundColor:"#4c54af1f",color:"#1E2129",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:5,borderBottomRightRadius:5,"& .time":{justifyContent:"flex-end",right:0,marginLeft:6}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:15}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:15}}},"&.contact + .me, &.me + .contact":{},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:15,paddingTop:13}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:15,paddingBottom:13,"& .time":{display:"flex"}}}}}});function a(e){var t=(0,k.$)("chat_projects").t,a=(0,v.I0)(),r=(0,E.useRef)(null),n=(0,E.useRef)(null),o=w(e),e=(0,E.useState)(""),e=d()(e,2),c=e[0],l=e[1],i=(0,x.UO)(),e=(0,E.useState)(null),e=d()(e,2),s=e[0],u=e[1];e=function(){var t=m()(p().mark(function e(t){var r,a,n,o;return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.currentTarget.files,a=[],n=0;case 3:if(!(n<r.length)){e.next=26;break}if(o=null===(o=r[n].type)||void 0===o?void 0:o.split("/"),e.t0=[],e.t1=f()(a),"image"==o[0])return e.next=10,(0,y.y6)(r[n]);e.next=13;break;case 10:e.t2=e.sent,e.next=14;break;case 13:e.t2=r[n];case 14:e.t3=e.t2,e.t4=URL.createObjectURL(r[n]),e.t5=o[0],e.t6=".".concat(o[1]),e.t7=o.join("/"),e.t8={file:e.t3,imgPath:e.t4,fileType:e.t5,extension:e.t6,type:e.t7},e.t9=[e.t8],a=e.t0.concat.call(e.t0,e.t1,e.t9),u(a);case 23:n++,e.next=3;break;case 26:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();return E.createElement("div",{className:"fixed w-full send-message-form"},E.createElement("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),n.current&&n.current.sendDirectToChat(),""===c&&!s||a(C.sU(c,l,i.id,s,u))},className:"w-full my-20 py-16 px-8 chat-form-bg"},E.createElement("div",{className:"multiple-images flex flex-row overflow-x-auto custom-form-fixed-position"},s&&s.map(function(e,r){return E.createElement(L,{item:e,card:{},onRemove:function(){return u(function(e){return e.filter(function(e,t){return t!=r})})},key:e.id})})),E.createElement(b.Z,{className:"flex items-center relative rounded-24",elevation:1},E.createElement(h.Z,{autoFocus:!1,id:"message-input",className:"flex-1",InputProps:{disableUnderline:!0,classes:{root:"flex flex-grow flex-shrink-0 mx-16 ltr:mr-10 rtl:ml-48 my-8",input:""},placeholder:t("TYPE_YOUR_MESSAGE")},InputLabelProps:{shrink:!1,className:o.bootstrapFormLabel},onChange:function(e){l(e.target.value)},value:c}),E.createElement(N.default,{afterRecordComplete:function(e){var t=null===(r=e.type)||void 0===r?void 0:r.split("/"),r=s||[],r=[{file:e,imgPath:URL.createObjectURL(e),fileType:t[0],extension:".".concat(t[1]),type:t.join("/")}].concat(f()(r));u(r)},ref:n,sendDirectToChat:function(e){var t=null===(r=e.type)||void 0===r?void 0:r.split("/"),r=s||[],r=[{file:e,imgPath:URL.createObjectURL(e),fileType:t[0],extension:".".concat(t[1]),type:t.join("/")}].concat(f()(r));a(C.sU(c,l,i.id,r,u))}}),E.createElement("input",{hidden:!0,multiple:!0,type:"file",ref:r,onChange:e}),E.createElement(g.Z,{className:"image mr-48",onClick:function(){return r.current.click()},"aria-label":"Add photo",color:"inherit"},E.createElement(R.Z,null,"photo")),E.createElement(g.Z,{className:"absolute ltr:right-0 rtl:left-0 top-0",type:"submit"},E.createElement(R.Z,{className:"text-24",color:"action"},"send")))))}}}]);