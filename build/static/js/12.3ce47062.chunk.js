(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[12],{3584:function(e,t,a){"use strict";a.r(t);var n=a(132),r=a.n(n),c=a(193),l=a(13),o=a(2),i=a(8),u=a(0),m=a.n(u),s=a(190),p=a(782),b=a(2099),f=a(2101),d=a(2102),h=a(2253),v=a(143),g=a(186),j=a(71),E=a(6),O=a(54),y=a(113),x=a(16),C=a(156),k=a(7),N=a(240),w=a(1866),T=a(11),_=a(1888),S=a(271),A=Object(p.a)((function(e){return{root:{background:"radial-gradient(".concat(Object(N.darken)(e.palette.primary.dark,.5)," 0%, ").concat(e.palette.primary.dark," 80%)"),color:e.palette.primary.contrastText}}}));Object(k.a)({root:{color:S.a[400],"&$checked":{color:S.a[600]}},checked:{}})((function(e){return m.a.createElement(_.a,Object.assign({color:"default"},e))}));var W=function(e){var t=e.form,a=e.handleChangeAfterRemoveError,n=e.error,r=a;return A(),m.a.createElement("form",{name:"registerForm",className:"flex flex-col justify-center w-full"},m.a.createElement(w.a,{error:n.name.length,helperText:!!n.name.length&&n.name[0],className:"mb-8",label:"Company Name",autoFocus:!0,type:"text",name:"name",value:t.name,onChange:r,variant:"outlined",required:!0,fullWidth:!0}),m.a.createElement(w.a,{className:"mb-8",label:"Description",autoFocus:!0,type:"text",name:"desc",value:t.desc,onChange:r,variant:"outlined",required:!0,fullWidth:!0}),m.a.createElement(w.a,{className:"mb-8",label:"Company Email",type:"email",name:"email",value:t.email,onChange:r,variant:"outlined",required:!0,fullWidth:!0}),m.a.createElement(w.a,{className:"mb-8",label:"VAT Number",type:"text",name:"vat_number",value:t.vat_number,onChange:r,variant:"outlined",required:!0,fullWidth:!0}),m.a.createElement(w.a,{className:"mb-8",label:"Website Url",type:"text",name:"url",value:t.url,onChange:r,variant:"outlined",required:!0,fullWidth:!0}),m.a.createElement(w.a,{className:"mb-8",label:"Telephone number",type:"text",name:"phone",value:t.phone,onChange:r,variant:"outlined",required:!0,fullWidth:!0}))},F=a(1867),q=a(3586),z=a(1934),D=a.n(z),L=a(1935),I=a.n(L),J=m.a.createElement(D.a,{fontSize:"small"}),P=m.a.createElement(I.a,{fontSize:"small"});function R(e){var t=e.optionList;return m.a.createElement(q.a,{multiple:!0,id:"company-category",options:t,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return m.a.createElement("div",null,e.mainTitle&&m.a.createElement(j.a,{className:"h2 mb-8 ml-12"},e.mainTitle),m.a.createElement("div",null,m.a.createElement(F.a,{icon:J,checkedIcon:P,style:{marginRight:8},checked:a}),e.title))},renderInput:function(e){return m.a.createElement(w.a,Object.assign({},e,{variant:"outlined",label:"Company Categories"}))}})}var U=a(2374),B=a(12),G=a(15),H=a(1825),V=a(1827),$=a(53),K=Object(p.a)((function(e){return{root:{width:"100%",background:"radial-gradient(".concat(Object(N.darken)(e.palette.primary.dark,.5)," 0%, ").concat(e.palette.primary.dark," 80%)"),color:e.palette.primary.contrastText},button:{marginTop:e.spacing(1),width:"190px"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}}));t.default=Object(O.l)(Object(E.a)((function(e){return{user:e.auth.user.data}}))((function(e){e.user,e.history;var t=Object(s.c)({name:"",desc:"",email:"",vat_number:"",url:"",phone:""}),a=t.form,n=t.handleChange,p=(t.resetForm,t.setForm),k=Object(E.c)((function(e){return e.chatApp.company})),N=Object(E.b)(),w=m.a.useState([]),_=Object(i.a)(w,2),S=_[0],A=_[1],F=m.a.useState([]),q=Object(i.a)(F,2),z=q[0],D=q[1],L=m.a.useState(!1),I=Object(i.a)(L,2),J=I[0],P=I[1],M=Object(O.h)(),Q=K(),X=m.a.useState(0),Y=Object(i.a)(X,2),Z=Y[0],ee=Y[1],te=["Company Details","Company Categories","Company Logo"],ae=m.a.useState("English"),ne=Object(i.a)(ae,2),re=(ne[0],ne[1],m.a.useState(null)),ce=Object(i.a)(re,2),le=ce[0],oe=ce[1],ie=m.a.useState({name:[],slug:[],url:[],email:[],vat_number:[],phone:[]}),ue=Object(i.a)(ie,2),me=ue[0],se=ue[1];Object(u.useEffect)((function(){Object(B.b)(x.Nb,{},(function(e){var t=e;if(Array.isArray(e)){var a=[];t.map((function(e,n){Object(B.b)(Object(x.Ob)(e.code),{},(function(r){Array.isArray(r)&&(r.map((function(t,a){r[a]=Object(o.a)(Object(o.a)({},r[a]),{},{mainTitle:0==a?e.name:void 0,title:r[a].name})})),a=[].concat(Object(l.a)(a),Object(l.a)(r)),D(Object(l.a)(a))),t[n]=Object(o.a)(Object(o.a)({},t[n]),{},{subCategory:r});A(t)}),(function(e){return console.log({listErr:e})}),B.a.GET,Object(G.c)())}))}}),(function(e){return console.log(e)}),B.a.GET,Object(G.c)())}),[]),Object(u.useEffect)((function(){N($.v())}),[]),Object(u.useEffect)((function(){M&&(console.log({routeHistory:M}),"/edit-company"==M.location.pathname&&(P(!0),console.log({company:k}),oe({imagePreviewUrl:k.logo}),p({id:k.id,name:k.name,desc:k.description,email:k.email,vat_number:k.vat_number,url:k.url,phone:k.phone})))}),[M,k]);var pe=function(){ee((function(e){return e+1})),2==Z&&fe()},be=function(){ee((function(e){return e-1}))},fe=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new FormData,e.t0=a.name,e.t1=a.name.split(" ").join("_"),e.t2=a.desc,e.t3=a.url,e.t4=a.vat_number,e.t5=a.email,e.t6=a.phone,!le||!le.fileData){e.next=14;break}return e.next=11,Object(G.b)(le.fileData);case 11:e.t7=e.sent,e.next=15;break;case 14:e.t7=void 0;case 15:for(l in e.t8=e.t7,n={name:e.t0,slug:e.t1,description:e.t2,url:e.t3,vat_number:e.t4,email:e.t5,phone:e.t6,logo:e.t8},c=localStorage.getItem("jwt_access_token"),n)n[l]&&t.append(l,n[l]);(J?y.a.put(Object(x.Sb)(k.id),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(c)}}):y.a.post(x.Rb,t,{headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(c)}})).then((function(e){J?(console.log("routeHistorynextPath",M.location.state.nextPath),M.push(M.location.state.nextPath)):M.push("/apps/companies")})).catch((function(e){var t=e.response.data,a=t.name,n=t.url,r=t.email,c=t.vat_number,l=t.phone;se({name:a||[],url:n||[],email:r||[],vat_number:c||[],phone:l||[]}),ee(0)}));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(e){se({name:[],slug:[],url:[],email:[],vat_number:[],phone:[]}),n(e)};return m.a.createElement("div",{className:Object(T.a)(Q.root,"flex flex-col flex-auto flex-shrink-0 items-center justify-center p-20 md:p-40")},m.a.createElement("div",{className:"flex flex-col items-center justify-center w-full"},m.a.createElement(C.a,{animation:"transition.expandIn"},m.a.createElement(H.a,{className:"w-full max-w-512"},m.a.createElement(V.a,{className:"flex flex-col items-center justify-center"},m.a.createElement(b.a,{activeStep:Z,orientation:"vertical"},te.map((function(e,t){return m.a.createElement(f.a,{key:e},m.a.createElement(d.a,null,e),m.a.createElement(h.a,null,m.a.createElement(j.a,null,function(e,t){switch(e){case 0:return m.a.createElement(W,t);case 1:return m.a.createElement(R,t);case 2:return m.a.createElement(U.a,t);default:return"Unknown step"}}(t,0==t?{form:a,handleChangeAfterRemoveError:de,error:me}:1==t?{typologyList:S,optionList:z}:{setFile:oe,file:le,remove:function(){return oe(null)}})),m.a.createElement("div",{className:Object(T.a)(Q.actionsContainer,"text-center custom-btn-group mt-12")},m.a.createElement("div",null,m.a.createElement(v.a,{variant:"contained",size:"large",className:Object(T.a)(Q.button,"mr-8"),disabled:0===Z,onClick:be},"Back"),m.a.createElement(v.a,{size:"large",variant:"contained",color:"primary",className:Q.button,onClick:pe},Z===te.length-1?"Finish":"Next")))))}))),Z===te.length&&m.a.createElement(g.a,{square:!0,elevation:0,className:Q.resetContainer},m.a.createElement(j.a,null,"All steps completed - you're finished")))))))})))}}]);