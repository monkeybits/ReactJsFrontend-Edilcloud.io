(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[71],{1903:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(37),o=a(49),r=a(782),l=a(11),c=a(0),i=a.n(c),s=a(1876),d=a(6);var u=function(e){var t=Object(d.c)((function(e){return e.fuse.settings.mainThemeDark}));return i.a.createElement("div",{className:e.classes.header},e.header&&i.a.createElement(s.a,{theme:t},e.header))},m=a(8),p=a(1841),f=a(1868);var b=function(e){var t=Object(d.c)((function(e){return e.fuse.settings.mainThemeDark})),a=e.classes;return i.a.createElement(i.a.Fragment,null,e.header&&i.a.createElement(s.a,{theme:t},i.a.createElement("div",{className:Object(l.a)(a.sidebarHeader,e.variant)},e.header)),e.content&&i.a.createElement(o.a,{className:a.sidebarContent,enable:e.innerScroll},e.content))};var v=i.a.forwardRef((function(e,t){var a=Object(c.useState)(!1),n=Object(m.a)(a,2),o=n[0],r=n[1],s=e.classes;Object(c.useImperativeHandle)(t,(function(){return{toggleSidebar:d}}));var d=function(){r(!o)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{lgUp:"permanent"===e.variant},i.a.createElement(p.a,{variant:"temporary",anchor:e.position,open:o,onClose:function(e){return d()},classes:{root:Object(l.a)(s.sidebarWrapper,e.variant),paper:Object(l.a)(s.sidebar,e.variant,"left"===e.position?s.leftSidebar:s.rightSidebar)},ModalProps:{keepMounted:!0},container:e.rootRef.current,BackdropProps:{classes:{root:s.backdrop}},style:{position:"absolute"}},i.a.createElement(b,e))),"permanent"===e.variant&&i.a.createElement(f.a,{mdDown:!0},i.a.createElement(p.a,{variant:"permanent",className:Object(l.a)(s.sidebarWrapper,e.variant),open:o,classes:{paper:Object(l.a)(s.sidebar,e.variant,"left"===e.position?s.leftSidebar:s.rightSidebar)}},i.a.createElement(b,e))))})),O=Object(r.a)((function(e){return{root:{display:"flex",flexDirection:"row",minHeight:"100%",position:"relative",flex:"1 0 auto",height:"auto",backgroundColor:e.palette.background.default},innerScroll:{flex:"1 1 auto",height:"100%"},topBg:{position:"absolute",left:0,right:0,top:0,height:200,background:"linear-gradient(to right, ".concat(e.palette.primary.dark," 0%, ").concat(e.palette.primary.main," 100%)"),backgroundSize:"cover",pointerEvents:"none"},contentWrapper:Object(n.a)({display:"flex",flexDirection:"column",padding:"0 3.2rem",flex:"1 1 100%",zIndex:2,maxWidth:"100%",minWidth:0,minHeight:0},e.breakpoints.down("xs"),{padding:"0 1.6rem"}),header:{height:136,minHeight:136,maxHeight:136,display:"flex",color:e.palette.primary.contrastText},headerSidebarToggleButton:{color:e.palette.primary.contrastText},contentCard:{display:"flex",flex:"1 1 100%",flexDirection:"column",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[1],minHeight:0,borderRadius:"8px 8px 0 0"},toolbar:{height:64,minHeight:64,display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(e.palette.divider)},content:{flex:"1 1 auto",height:"100%",overflow:"auto","-webkit-overflow-scrolling":"touch"},sidebarWrapper:{position:"absolute",backgroundColor:"transparent",zIndex:5,overflow:"hidden","&.permanent":Object(n.a)({},e.breakpoints.up("lg"),{zIndex:1,position:"relative"})},sidebar:{position:"absolute","&.permanent":Object(n.a)({},e.breakpoints.up("lg"),{backgroundColor:"transparent",position:"relative",border:"none",overflow:"hidden"}),width:240,height:"100%"},leftSidebar:{},rightSidebar:{},sidebarHeader:{height:200,minHeight:200,color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark,"&.permanent":Object(n.a)({},e.breakpoints.up("lg"),{backgroundColor:"transparent"})},sidebarContent:Object(n.a)({display:"flex",flex:"1 1 auto",flexDirection:"column",backgroundColor:e.palette.background.default,color:e.palette.text.primary},e.breakpoints.up("lg"),{overflow:"auto","-webkit-overflow-scrolling":"touch"}),backdrop:{position:"absolute"}}})),E=i.a.forwardRef((function(e,t){var a=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useRef)(null),s=O(e),d=e.rightSidebarHeader||e.rightSidebarContent,m=e.leftSidebarHeader||e.leftSidebarContent;return i.a.useImperativeHandle(t,(function(){return{rootRef:r,toggleLeftSidebar:function(){a.current.toggleSidebar()},toggleRightSidebar:function(){n.current.toggleSidebar()}}})),i.a.createElement("div",{className:Object(l.a)(s.root,e.innerScroll&&s.innerScroll),ref:r},i.a.createElement("div",{className:s.topBg}),i.a.createElement("div",{className:"flex container w-full"},m&&i.a.createElement(v,{position:"left",header:e.leftSidebarHeader,content:e.leftSidebarContent,variant:e.leftSidebarVariant||"permanent",innerScroll:e.innerScroll,classes:s,ref:a,rootRef:r}),i.a.createElement("div",{className:Object(l.a)(s.contentWrapper,m&&(void 0===e.leftSidebarVariant||"permanent"===e.leftSidebarVariant)&&"lg:ltr:pl-0 lg:rtl:pr-0",d&&(void 0===e.rightSidebarVariant||"permanent"===e.rightSidebarVariant)&&"lg:pr-0")},i.a.createElement(u,{header:e.header,classes:s}),i.a.createElement("div",{className:Object(l.a)(s.contentCard,e.innerScroll&&"inner-scroll")},e.contentToolbar&&i.a.createElement("div",{className:s.toolbar},e.contentToolbar),e.content&&i.a.createElement(o.a,{className:s.content,enable:e.innerScroll,scrollToTopOnRouteChange:e.innerScroll},e.content))),d&&i.a.createElement(v,{position:"right",header:e.rightSidebarHeader,content:e.rightSidebarContent,variant:e.rightSidebarVariant||"permanent",innerScroll:e.innerScroll,classes:s,ref:n,rootRef:r})))}));E.defaultProps={};var g=i.a.memo(E)},1912:function(e,t,a){"use strict";var n=a(235);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),r=(0,n(a(329)).default)(o.default.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");t.default=r},1940:function(e,t,a){"use strict";a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"o",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"g",(function(){return b})),a.d(t,"h",(function(){return v})),a.d(t,"p",(function(){return O})),a.d(t,"l",(function(){return E})),a.d(t,"b",(function(){return g})),a.d(t,"k",(function(){return h})),a.d(t,"m",(function(){return j})),a.d(t,"a",(function(){return y})),a.d(t,"c",(function(){return x})),a.d(t,"n",(function(){return T})),a.d(t,"C",(function(){return D})),a.d(t,"A",(function(){return N})),a.d(t,"v",(function(){return C})),a.d(t,"r",(function(){return S})),a.d(t,"w",(function(){return A})),a.d(t,"F",(function(){return k})),a.d(t,"y",(function(){return w})),a.d(t,"t",(function(){return P})),a.d(t,"z",(function(){return _})),a.d(t,"u",(function(){return L})),a.d(t,"s",(function(){return I})),a.d(t,"q",(function(){return M})),a.d(t,"G",(function(){return R})),a.d(t,"B",(function(){return G})),a.d(t,"D",(function(){return F})),a.d(t,"E",(function(){return Y})),a.d(t,"i",(function(){return z})),a.d(t,"x",(function(){return H}));var n=a(2),o=a(231),r=a(26),l=a.n(r),c=a(16),i=a(12),s=a(15),d="[CONTACTS APP] GET CONTACTS",u="[CONTACTS APP] FILTER BY",m="[CONTACTS APP] ADD FILTER KEY",p="[CONTACTS APP] RESET CONTACTS",f="[CONTACTS APP] GET WAITING CONTACTS",b="[CONTACTS APP] GET DEACTIVATED CONTACTS",v="[CONTACTS APP] GET REFUSED CONTACTS",O="[CONTACTS APP] SET SEARCH TEXT",E="[CONTACTS APP] OPEN NEW CONTACT DIALOG",g="[CONTACTS APP] CLOSE NEW CONTACT DIALOG",h="[CONTACTS APP] OPEN EDIT CONTACT DIALOG",j="[CONTACTS APP] OPEN VIEW CONTACT DIALOG",y="[CONTACTS APP] CLOSE EDIT CONTACT DIALOG",x="[CONTACTS APP] CLOSE VIEW CONTACT DIALOG",T="[CONTACTS APP] REMOVE CONTACT";function D(e){return function(e,t){e({type:p})}}function N(e){return function(t,a){t({type:T,payload:e})}}function C(e){return function(t,a){t({type:u,filterKey:e})}}function S(e){return function(t,a){t({type:m,filterKey:e})}}function A(e){return function(t,a){var o;t((o=e,function(e,t){return Object(i.b)(Object(c.jb)(o),{},(function(t){var a=[];return t.results.length&&(a=t.results.map((function(e){var t=e.profile,a=t.first_name,o=t.last_name,r=t.photo,l=t.company,c=t.position,i=t.email,s=t.phone;return Object(n.a)(Object(n.a)({},e),{},{name:a,lastName:o,avatar:r||"assets/images/avatars/profile.jpg",nickname:a,company:null===l||void 0===l?void 0:l.name,jobTitle:c,email:i,phone:s,address:""})}))),e({type:d,payload:a,routeParams:o})}),(function(e){console.log(e)}),i.a.GET,Object(s.c)())})),t(function(e){return function(t,a){return Object(i.b)(Object(c.lb)(e),{},(function(a){var o=[];return a.results.length&&(o=a.results.map((function(e){var t=e.profile,a=t.first_name,o=t.last_name,r=t.photo,l=t.company,c=t.position,i=t.email,s=t.phone;return Object(n.a)(Object(n.a)({},e),{},{name:a,lastName:o,avatar:r||"assets/images/avatars/profile.jpg",nickname:a,company:null===l||void 0===l?void 0:l.name,jobTitle:c,email:i,phone:s,address:""})}))),t({type:f,payload:o,routeParams:e})}),(function(e){console.log(e)}),i.a.GET,Object(s.c)())}}(e)),t(function(e){return function(t,a){return Object(i.b)(Object(c.kb)(e),{},(function(a){var o=[];return a.results.length&&(o=a.results.map((function(e){var t=e.profile,a=t.first_name,o=t.last_name,r=t.photo,l=t.company,c=t.position,i=t.email,s=t.phone;return Object(n.a)(Object(n.a)({},e),{},{name:a,lastName:o,avatar:r||"assets/images/avatars/profile.jpg",nickname:a,company:null===l||void 0===l?void 0:l.name,jobTitle:c,email:i,phone:s,address:""})}))),t({type:v,payload:o,routeParams:e})}),(function(e){console.log(e)}),i.a.GET,Object(s.c)())}}(e))}}function k(e){return{type:O,searchText:e.target.value}}function w(){return{type:E}}function P(){return{type:g}}function _(e){return{type:j,data:e}}function L(){return{type:x}}function I(e,t,a){return function(n){Object(i.b)(Object(c.s)(e,a),t,(function(t){n(A(e))}),(function(e){return console.log(e)}),i.a.POST,Object(s.c)())}}function M(e,t){return function(a,n){var o=n().contactsApp.contacts.routeParams,r=new FormData;for(var l in e)(e[l]||"can_access_chat"==l||"can_access_files"==l)&&r.append(l,e[l]);Object(i.b)(t?Object(c.i)(e.id):c.l,r,(function(e){a(A(o))}),(function(e){return console.log(e)}),i.a.POST,Object(s.c)())}}function R(e,t){return function(a,n){var o=n().contactsApp.contacts.routeParams,r=new FormData;for(var l in e)(e[l]||"can_access_chat"==l||"can_access_files"==l)&&r.append(l,e[l]);Object(i.b)(Object(c.Pb)(t),r,(function(e){a(A(o))}),(function(e){return console.log(e)}),i.a.PUT,Object(s.c)())}}function G(e){return function(t,a){var n=a().contactsApp.contacts.routeParams;return l.a.post("/api/contacts-app/remove-contacts",{contactIds:e}).then((function(e){return Promise.all([t({type:"[CONTACTS APP] REMOVE CONTACTS"})]).then((function(){return t(A(n))}))}))}}function F(e){return function(t,a){var n=a().contactsApp.contacts.routeParams;return l.a.post("/api/contacts-app/set-contacts-starred",{contactIds:e}).then((function(e){return Promise.all([t({type:"[CONTACTS APP] SET CONTACTS STARRED "}),t(Object(o.b)())]).then((function(){return t(A(n))}))}))}}function Y(e){return function(t,a){var n=a().contactsApp.contacts.routeParams;return l.a.post("/api/contacts-app/set-contacts-unstarred",{contactIds:e}).then((function(e){return Promise.all([t({type:"[CONTACTS APP] SET CONTACTS STARRED "}),t(Object(o.b)())]).then((function(){return t(A(n))}))}))}}var z="[CONTACTS APP] GET USER DATA";function H(){var e=l.a.get("/api/contacts-app/user");return function(t){return e.then((function(e){return t({type:z,payload:e.data})}))}}},1993:function(e,t,a){"use strict";var n=a(1813),o=a(0),r=a.n(o);t.a=function(e){return r.a.createElement(n.a,{open:Boolean(e.state),anchorEl:e.state,onClose:e.onClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(r.a.Fragment,null,e.children))}},2022:function(e,t,a){"use strict";var n=a(235);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),r=(0,n(a(329)).default)(o.default.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"Restore");t.default=r},2077:function(e,t,a){"use strict";var n=a(91),o=a(31);t.a=function e(t){Object(n.a)(this,e);var a=t||{};this.id=a.id||o.a.generateGUID(),this.name=a.name||"",this.class=a.class||"bg-blue text-white"}},2122:function(e,t,a){"use strict";a(2),a(8),a(285),a(1867),a(170),a(936),a(1861),a(0),a(1993),a(143)},2236:function(e,t,a){"use strict";var n=a(235);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),r=(0,n(a(329)).default)(o.default.createElement("path",{d:"M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"}),"PlaylistAddOutlined");t.default=r},2237:function(e,t,a){"use strict";var n=a(1),o=a(4),r=a(0),l=(a(116),a(3),a(5)),c=a(7),i=r.forwardRef((function(e,t){var a=e.children,c=e.classes,i=e.className,s=e.component,d=void 0===s?"div":s,u=e.onChange,m=e.showLabels,p=void 0!==m&&m,f=e.value,b=Object(o.a)(e,["children","classes","className","component","onChange","showLabels","value"]);return r.createElement(d,Object(n.a)({className:Object(l.a)(c.root,i),ref:t},b),r.Children.map(a,(function(e,t){if(!r.isValidElement(e))return null;var a=void 0===e.props.value?t:e.props.value;return r.cloneElement(e,{selected:a===f,showLabel:void 0!==e.props.showLabel?e.props.showLabel:p,value:a,onChange:u})})))}));t.a=Object(c.a)((function(e){return{root:{display:"flex",justifyContent:"center",height:56,backgroundColor:e.palette.background.paper}}}),{name:"MuiBottomNavigation"})(i)},2238:function(e,t,a){"use strict";var n=a(1),o=a(4),r=a(0),l=(a(3),a(5)),c=a(7),i=a(234),s=r.forwardRef((function(e,t){var a=e.classes,c=e.className,s=e.icon,d=e.label,u=e.onChange,m=e.onClick,p=e.selected,f=e.showLabel,b=e.value,v=Object(o.a)(e,["classes","className","icon","label","onChange","onClick","selected","showLabel","value"]);return r.createElement(i.a,Object(n.a)({ref:t,className:Object(l.a)(a.root,c,p?a.selected:!f&&a.iconOnly),focusRipple:!0,onClick:function(e){u&&u(e,b),m&&m(e)}},v),r.createElement("span",{className:a.wrapper},s,r.createElement("span",{className:Object(l.a)(a.label,p?a.selected:!f&&a.iconOnly)},d)))}));t.a=Object(c.a)((function(e){return{root:{transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:e.palette.text.secondary,flex:"1","&$iconOnly":{paddingTop:16},"&$selected":{paddingTop:6,color:e.palette.primary.main}},selected:{},iconOnly:{},wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column"},label:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s","&$iconOnly":{opacity:0,transitionDelay:"0s"},"&$selected":{fontSize:e.typography.pxToRem(14)}}}}),{name:"MuiBottomNavigationAction"})(s)},2291:function(e,t,a){"use strict";var n=a(2),o=a(167),r=a(132),l=a.n(r),c=a(13),i=a(193),s=a(8),d=(a(10),a(143)),u=a(1860),m=a(838),p=a(1879),f=a(170),b=a(71),v=a(16),O=a(12),E=a(15),g=a(0),h=a.n(g),j=a(610),y=a(1861),x=a(186),T=a(73),D=a(105);var N=function(e){var t=Object(g.useState)(null),a=Object(s.a)(t,2),n=a[0],o=a[1];function r(){o(null)}var l=function(t){return h.a.createElement("div",{className:"flex w-full sm:w-1/2 mb-16 px-16",key:e.item.id},h.a.createElement("div",{className:"flex items-center justify-center min-w-128 w-128 ht-11"},h.a.createElement(x.a,{className:"rounded-4 overflow-hidden",elevation:1},t)))};switch(e.item.type?e.item.type.split("/")[0]:""){case"image":return h.a.createElement("div",{className:"flex w-full sm:w-1/2 mb-16 px-16",key:e.item.id,onClick:e.openImage},h.a.createElement("div",{className:"flex items-center justify-center min-w-128 w-128 h-128"},h.a.createElement(x.a,{className:"rounded-4 overflow-hidden",elevation:1},h.a.createElement("img",{className:"block h-128 w-128 object-cover",src:e.item.media_url,alt:"attachment"}))));case"audio":return h.a.createElement("audio",{controls:!0,src:e.item.media_url});case"video":return l(h.a.createElement(T.a,{icon:D.h,style:{color:"red",fontSize:"6.4rem"}}));case"application":return".xlsx"==e.item.extension||".xls"==e.item.extension?l(h.a.createElement(T.a,{icon:D.e,style:{color:"green",fontSize:"6.4rem"}})):l(h.a.createElement(T.a,{icon:D.c,style:{color:"red",fontSize:"6.4rem"}}));case"link":return h.a.createElement("div",{className:"flex w-full sm:w-1/2 mb-16 px-16",key:e.item.id},h.a.createElement(x.a,{className:"min-w-128 w-128 h-128 flex items-center justify-center rounded-4 overflow-hidden",elevation:1},h.a.createElement(b.a,{className:"font-600"},"LINK")),h.a.createElement("div",{className:"flex flex-auto flex-col justify-center items-start min-w-0 px-16"},h.a.createElement(b.a,{className:"text-16 font-600 truncate w-full"},e.item.url),h.a.createElement(b.a,{className:"truncate w-full mb-12",color:"textSecondary"},e.item.time),h.a.createElement(d.a,{"aria-owns":n?"actions-menu":null,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},variant:"outlined",size:"small"},"Actions",h.a.createElement(f.a,{className:"text-20"},"arrow_drop_down")),h.a.createElement(j.a,{id:"simple-menu",anchorEl:n,open:Boolean(n),onClose:r},h.a.createElement(y.a,{onClick:function(){r(),e.removeAttachment(e.item.id)}},"Remove Attachment"))));default:return h.a.createElement(T.a,{icon:D.c,style:{color:"red",fontSize:"6.4rem"}})}},C=a(291);t.a=function(e){var t=e.taskId,a=e.attachments,r=Object(g.useState)(null),j=Object(s.a)(r,2),y=j[0],x=j[1],T=Object(g.useState)(a),D=Object(s.a)(T,2),S=D[0],A=D[1],k=Object(g.useRef)(null),w=h.a.useState(0),P=Object(s.a)(w,2),_=P[0],L=P[1],I=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n,o,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.currentTarget.files,n=[],o=0;case 3:if(!(o<a.length)){e.next=24;break}if(i=null===(r=a[o].type)||void 0===r?void 0:r.split("/")[0],e.t0=[],e.t1=Object(c.a)(n),"image"!=i){e.next=13;break}return e.next=10,Object(E.b)(a[o]);case 10:e.t2=e.sent,e.next=14;break;case 13:e.t2=a[o];case 14:e.t3=e.t2,e.t4=URL.createObjectURL(a[o]),e.t5=i,e.t6={file:e.t3,imgPath:e.t4,fileType:e.t5},e.t7=[e.t6],n=e.t0.concat.call(e.t0,e.t1,e.t7),x(n);case 21:o++,e.next=3;break;case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"mb-24 image-center"},h.a.createElement("input",{multiple:!0,type:"file",id:"file",ref:k,onChange:I,hidden:!0}),y&&h.a.createElement(C.a,{images:y,hideModify:!0}),h.a.createElement("div",{className:"flex"},h.a.createElement(d.a,{className:"add-file-btn mr-10",onClick:function(e){k.current.click()}},"add file"),h.a.createElement(d.a,{className:"upload-btn",onClick:function(e){var a=new FormData;if(L(0),y){var r,l=y.map((function(e){return e.file})),c=0,i=Object(o.a)(l);try{for(i.s();!(r=i.n()).done;){var s=r.value;a.append("files["+c+"]",s,s.name),c+=1}}catch(d){i.e(d)}finally{i.f()}}e.preventDefault(),Object(O.b)(Object(v.e)(t),a,(function(e){A(e.media_set),L(0)}),(function(e){L(0),console.log(e)}),O.a.POST,Object(n.a)(Object(n.a)({},Object(E.c)()),{},{onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);L(t)}})),x(null)}},"upload"," ",!!_&&h.a.createElement(u.a,{position:"relative",display:"inline-flex"},h.a.createElement(m.a,{color:"secondary",variant:"static",value:_}),h.a.createElement(u.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},h.a.createElement(b.a,{variant:"caption",component:"div",color:"textSecondary"},_,"%")))))),h.a.createElement(p.a,null),S&&h.a.createElement("div",{className:"mb-24"},h.a.createElement("div",{className:"flex items-center mt-16 mb-12"},h.a.createElement(f.a,{className:"text-20",color:"inherit"},"attachment"),h.a.createElement(b.a,{className:"font-600 text-16 mx-8"},"Attachments")),h.a.createElement("div",{className:"flex flex-col sm:flex-row flex-wrap -mx-16"},S.map((function(e){return h.a.createElement(N,{item:e,card:{},key:e.id})})))))}},3569:function(e,t,a){"use strict";a.r(t);var n=a(1903),o=a(331),r=a(0),l=a.n(r),c=a(6),i=a(54),s=a(190),d=a(2),u=a(26),m=a.n(u),p=a(16),f=a(12),b=a(15),v=a(58),O=a.n(v),E=a(141),g="[TODO APP] GET TODOS",h="[TODO APP] UPDATE TODO";function j(e,t){return e.id>t.id?1:e.id<t.id?-1:0}function y(e){return function(e){Object(f.b)(p.Y,{},(function(t){e({type:g,payload:t.sort(j)})}),(function(e){return console.log(e)}),f.a.GET,Object(b.c)())}}function x(e,t,a,n,o,r){return console.log({todo:e}),function(o){var l="new"==a?{name:e.name,note:e.description,progress:e.progress,date_start:O()(e.startDate).format("YYYY-MM-DD"),date_end:O()(e.endDate).format("YYYY-MM-DD"),assigned_company:e.company[0]?e.company[0].data.profile.company.id:void 0,project:t,date_completed:null,alert:!1,starred:!1}:{title:e.title,description:e.notes,datetime_start:O()(e.startDate).format("YYYY-MM-DD"),datetime_end:O()(e.endDate).format("YYYY-MM-DD"),profile:e.profile[0]?e.profile[0].data.profile.id:void 0};Object(f.b)("new"==a?Object(p.Q)(e.id):Object(p.d)(e.id),l,(function(e){r(!1),o(y(0)),n()}),(function(e){return console.log(e)}),f.a.PUT,Object(b.c)())}}var T="[TODO APP] GET FOLDERS";var D="[TODO APP] GET LABELS";var N="[TODO APP] GET FILTERS";var C=a(77),S=a(13),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(S.a)(t.payload);default:return e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(S.a)(t.payload);default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(S.a)(t.payload);default:return e}},P=a(37),_=a(10),L={entities:[],searchText:"",orderBy:"",orderDescending:!1,routeParams:{},todoDialog:{type:"new",props:{open:!1},data:null},taskContentDialog:{type:"new",props:{open:!1},data:null}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return console.log({payload:t.payload}),Object(d.a)(Object(d.a)({},e),{},{entities:Object(d.a)({},t.payload),searchText:"",routeParams:t.routeParams});case"[TODO APP] UPDATE TODOS":return Object(d.a)(Object(d.a)({},e),{},{entities:t.payload});case"[TODO APP] OPEN NEW TODO DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"new",props:{open:!0},data:t.data?t.data:null}});case"[TODO APP] OPEN TASK CONTENT DIALOG":return Object(d.a)(Object(d.a)({},e),{},{taskContentDialog:{type:"new",props:{open:!0},data:t.data}});case"[TODO APP] CLOSE TASK CONTENT DIALOG":return Object(d.a)(Object(d.a)({},e),{},{taskContentDialog:{type:"new",props:{open:!1},data:null}});case"[TODO APP] OPEN TIMELINE DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"new",props:{openTimelineDialog:!0},data:t.todo}});case"[TODO APP] CLOSE NEW TODO DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"new",props:{open:!1},data:null}});case"[TODO APP] CLOSE TIMELINE DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"new",props:{openTimelineDialog:!1},data:null}});case"[TODO APP] OPEN EDIT TODO DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"edit",props:{open:!0},data:t.data}});case"[TODO APP] CLOSE EDIT TODO DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"edit",props:{open:!1},data:null}});case"[TODO APP] OPEN ACTIVITY TODO DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"activity",props:{open:!0},data:t.data}});case"[TODO APP] CLOSE ACTIVITY TODO DIALOG":return Object(d.a)(Object(d.a)({},e),{},{todoDialog:{type:"activity",props:{open:!1},data:null}});case h:var a=t.payload;return Object(d.a)(Object(d.a)({},e),{},{entities:Object(d.a)(Object(d.a)({},e.entities),{},Object(P.a)({},a.id,Object(d.a)({},a)))});case"[TODO APP] SET SEARCH TEXT":return Object(d.a)(Object(d.a)({},e),{},{searchText:t.searchText});case"[TODO APP] TOGGLE ORDER DESCENDING":return Object(d.a)(Object(d.a)({},e),{},{orderDescending:!e.orderDescending});case"[TODO APP] CHANGE ORDER":return Object(d.a)(Object(d.a)({},e),{},{orderBy:t.orderBy});default:return e}},M=Object(C.d)({todos:I,folders:k,labels:w,filters:A}),R=a(1868),G=a(170),F=a(187),Y=a(570),z=a(186),H=a(1876);var W=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.todoApp.todos.searchText})),n=Object(c.c)((function(e){return e.fuse.settings.mainTheme}));return l.a.createElement(H.a,{theme:n},l.a.createElement("div",{className:"flex flex-1"},l.a.createElement(z.a,{className:"flex items-center w-full h-48 sm:h-56 p-16 ltr:pl-4 lg:ltr:pl-16 rtl:pr-4 lg:rtl:pr-16 rounded-8",elevation:1},l.a.createElement(R.a,{lgUp:!0},l.a.createElement(F.a,{onClick:function(t){return e.pageLayout.current.toggleLeftSidebar()},"aria-label":"open left sidebar"},l.a.createElement(G.a,null,"menu"))),l.a.createElement(G.a,{color:"action"},"search"),l.a.createElement(Y.a,{placeholder:"Search",className:"px-16",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t({type:"[TODO APP] SET SEARCH TEXT",searchText:e.target.value.toLowerCase()})}}))))},B=a(8),U=a(156),V=a(131),K=a(31),q=a(71),$=a(782),X=a(11),J=Object($.a)((function(e){return{root:{display:"flex",alignItems:"center",height:21,borderRadius:2,padding:"0 6px",fontSize:11,backgroundColor:"rgba(0,0,0,.08);"},color:{width:8,height:8,marginRight:4,borderRadius:"0%"}}}));var Q=function(e){var t=J();return l.a.createElement("div",{className:Object(X.a)(t.root,e.className)},l.a.createElement("div",{className:t.color,style:{backgroundColor:e.color}}),l.a.createElement("div",null,e.title))},Z=a(7),ee=a(3415),te=a(1820),ae=a(892),ne=a(1867),oe=a(893),re=a(285),le=a(936),ce=(a(2122),a(1864)),ie=a(143),se=Object($.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}}}}));function de(e){var t=e.workers,a=se();return l.a.createElement("div",{className:a.root},t.map((function(e){var t;return l.a.createElement(re.a,{alt:"Remy Sharp",src:e.photo},!!(null===(t=e.first_name)||void 0===t?void 0:t.length)&&Object(S.a)(e.first_name)[0])})))}var ue=a(1861),me=a(1940),pe=a(1993),fe=Object($.a)((function(e){return{todoItem:{"&.completed":{background:"rgba(0,0,0,0.03)","& .todo-title, & .todo-notes":{textDecoration:"line-through"}}},nested:{paddingLeft:e.spacing(4)}}}));var be=function(e){var t,a,n=Object(c.b)(),o=Object(c.c)((function(e){return e.todoApp.labels})),s=l.a.useState(!1),u=Object(B.a)(s,2),m=(u[0],u[1],l.a.useState("to-do"!=e.todo.status)),v=Object(B.a)(m,2),E=v[0],g=v[1],h=Object(r.useState)([]),j=Object(B.a)(h,2),y=(j[0],j[1],Object(i.j)(),fe(e)),x=Object(r.useState)(null),T=Object(B.a)(x,2),D=T[0],N=T[1],C=Object(r.useState)([]),A=Object(B.a)(C,2),k=A[0],w=A[1],P=Object(r.useState)([]),L=Object(B.a)(P,2),I=L[0],M=L[1],R=Object(r.useState)(!1),Y=Object(B.a)(R,2),z=(Y[0],Y[1]);Object(r.useEffect)((function(){w(e.todo.team_workers)}),[e.todo.team_workers]);var H=function(t){var a,n=[],o=[];Array.isArray(t)&&(n=t.filter((function(e){return e.is_exists}))),console.log({ids:n}),Array.isArray(e.todo.workers)&&(o=e.todo.workers),n=[].concat(Object(S.a)(n),Object(S.a)(o)),console.log({ids:n});var r={id:e.todo.id,title:e.todo.title,description:e.todo.description,datetime_start:e.todo.datetime_start,datetime_end:e.todo.datetime_end,workers:(null===(a=n)||void 0===a?void 0:a.length)?n.map((function(e){return e.id})):null};Object(f.b)(Object(p.L)(e.todo.id),r,(function(e){}),(function(e){console.log(e)}),f.a.PUT,Object(b.c)())},W=function(e){e.preventDefault(),e.stopPropagation()},U=function(){Object(f.b)(p.pb,{},(function(e){var t=e.results.filter((function(e){return"Worker"==e.role}));console.log(t),M(t)}),(function(e){console.log(e)}),f.a.GET,Object(b.c)())};return l.a.createElement(l.a.Fragment,null,l.a.createElement(oe.a,{className:Object(X.a)(y.todoItem,{completed:E},"border-solid border-b-1 py-8 px-0 sm:px-8"),checked:E,style:{borderLeft:"4px solid",borderLeftColor:null===(t=e.task.assigned_company)||void 0===t?void 0:t.color_project},onClick:function(t){t.preventDefault(),n({type:"[TODO APP] OPEN TIMELINE DIALOG",todo:{todo:e.todo,task:e.task}})},dense:!0,button:!0},l.a.createElement("div",{className:"flex flex-1 flex-col mb-8 relative overflow-hidden"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement(ne.a,{tabIndex:-1,disableRipple:!0,checked:E,onChange:function(t){t.stopPropagation(),function(t){var a,n={title:e.todo.title,description:e.todo.description,datetime_start:e.todo.datetime_start,datetime_end:e.todo.datetime_end,workers:(null===(a=e.todo.workers)||void 0===a?void 0:a.length)?e.todo.workers.map((function(e){return e.id})):void 0,status:t?"completed":"to-do"};Object(f.b)(Object(p.L)(e.todo.id),n,(function(e){}),(function(e){g(!t),console.log(e)}),f.a.PUT,Object(b.c)()),g(t)}(t.target.checked)},onClick:function(e){return e.stopPropagation()}}),l.a.createElement(q.a,{variant:"subtitle1",className:"todo-title",color:E?"textSecondary":"inherit"},e.todo.title),l.a.createElement("div",{className:"ml-auto"},l.a.createElement(ce.a,{title:"There is a issue with some tree are not clean on site",placement:"top"},l.a.createElement(F.a,{onClick:function(e){e.stopPropagation(),e.preventDefault()}},l.a.createElement(G.a,null,"info_outlined"))))),l.a.createElement("div",{className:"flex items-center ml-44 mb-8"},l.a.createElement("div",{className:"custom-member-menu flex items-center",onClick:function(e){W(e),N(e.currentTarget),k.length||U()}},l.a.createElement(G.a,null,"person"),"Assign People"),l.a.createElement(de,{workers:e.todo.workers})),l.a.createElement(pe.a,{state:D,onClose:function(t){W(t),N(null),k.length||e.getDetailOfTask()}},l.a.createElement(l.a.Fragment,null,!!(null===k||void 0===k?void 0:k.length)&&l.a.createElement(ie.a,{onClick:function(e){e.stopPropagation(),z(e.target.checked);var t=Object(S.a)(k);t=t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{is_exists:!0})})),w(t),H(t)}},"Select All "),(null===k||void 0===k?void 0:k.length)?k.map((function(e,t){return l.a.createElement(ue.a,{onClick:W,className:"px-8",key:e.id},l.a.createElement(ne.a,{onClick:function(e){return e.stopPropagation()},name:e.first_name,checked:!!e.is_exists,onChange:function(e){var a=Object(S.a)(k);a[t]=Object(d.a)(Object(d.a)({},a[t]),{},{is_exists:e.target.checked}),w(a),H(a)}}),l.a.createElement(re.a,{className:"w-32 h-32",src:e.avatar}),l.a.createElement(le.a,{className:"mx-8"},e.first_name," ",e.last_name))})):l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{variant:"subtitle1",className:"todo-title p-8"},I.length?"You have no workers in your project, add from below list":"You have no workers in your company"),I.map((function(t,a){return t.is_exists?null:l.a.createElement(ue.a,{onClick:W,className:"px-8",key:t.id},l.a.createElement(re.a,{className:"w-32 h-32",src:t.avatar}),l.a.createElement(le.a,{className:"mx-8"},t.first_name," ",t.last_name),l.a.createElement(ie.a,{onClick:function(t){return function(t,a){var o,r,l;t.preventDefault();var c=Object(S.a)(I),i=c[a];c[a]=Object(d.a)(Object(d.a)({},i),{},{is_exists:!0}),M(c),n(me.s(e.task.project.id,{profile:i.id,role:null===(o=i.role)||void 0===o||null===(r=o.split(""))||void 0===r||null===(l=r[0])||void 0===l?void 0:l.toLocaleLowerCase()},!1))}(t,a)}},"Add"))}))))),l.a.createElement("div",{className:"flex items-center mb-8 ml-32"},l.a.createElement("div",{className:"flex items-center flex-wrap"},100==e.todo.progress?l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded-sm bg-green text-white")},l.a.createElement(G.a,{className:"text-16 mt-4"},"check_circle")," ",l.a.createElement("span",{className:"mx-4"},"Completed")):O()().diff(O()(e.todo.datetime_start))>0?O()().diff(O()(e.todo.datetime_end))>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded font-size-12")},"Start: ",O()(e.todo.datetime_start).format("MMM Do YY")),l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded bg-red text-white font-size-12 ml-12")},"Ends: ",O()(e.todo.datetime_end).format("MMM Do YY"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 bg-green rounded text-white font-size-12")},"Start: ",O()(e.todo.datetime_start).format("MMM Do YY")),l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 bg-custom-light-grey rounded font-size-12 ml-12")},"Ends: ",O()(e.todo.datetime_end).format("MMM Do YY"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded font-size-12")},"Start: ",O()(e.todo.datetime_start).format("MMM Do YY")),l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 bg-custom-light-grey rounded font-size-12 ml-12")},"Ends: ",O()(e.todo.datetime_end).format("MMM Do YY"))))),l.a.createElement("div",{className:Object(X.a)(y.labels,"flex -mx-2")},null===(a=e.todo.labels)||void 0===a?void 0:a.map((function(e){return l.a.createElement(Q,{className:"mx-2 mt-4",title:_.a.find(o,{id:e}).title,color:_.a.find(o,{id:e}).color,key:e})}))))))},ve=a(1825),Oe=a(838),Ee=a(1860),ge=a(2236),he=a.n(ge),je=Object($.a)((function(e){return{card:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut}}})),ye="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",xe=[{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80},{value:90},{value:100}],Te=Object(Z.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:ye,marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:ye}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(ee.a);var De=function(e){var t,a,n,o,s=Object(c.b)(),d=(Object(c.c)((function(e){return e.todoApp.labels})),Object(c.c)((function(e){return e.todoApp.todos.todoDialog}))),u=Object(c.c)((function(e){var t=e.chatApp;return null===t||void 0===t?void 0:t.company})),m=e.todo.project,v=l.a.useState(!1),E=Object(B.a)(v,2),g=E[0],h=E[1],j=l.a.useState(!1),y=Object(B.a)(j,2),T=y[0],D=y[1],N=l.a.useState(null),C=Object(B.a)(N,2),S=C[0],A=C[1],k=Object(r.useState)([]),w=Object(B.a)(k,2),P=w[0],_=w[1],L=Object(b.a)(),I=function(){var e;return null===L||void 0===L||null===(e=L.extra)||void 0===e?void 0:e.profile.role},M=je(e);Object(i.j)(),Object(r.useEffect)((function(){console.log({activities:e.todo.activities}),_(e.todo.activities)}),[e.todo.activities]),Object(r.useEffect)((function(){"activity"===d.type&&d.props.open&&d.data.id==e.todo.id&&A(d.data.id),"activity"===d.type&&0==d.props.open&&e.todo.id==S&&(R(),A(null))}),[d.props.open]),Object(r.useEffect)((function(){1==d.props.openTimelineDialog&&d.data.task.id==e.todo.id&&A(d.data.task.id),0==d.props.openTimelineDialog&&e.todo.id==S&&(R(),A(null))}),[d.props.openTimelineDialog]);var R=function(){Object(f.b)(Object(p.X)(e.todo.id),{},(function(e){_(e)}),(function(e){return console.log(e)}),f.a.GET,Object(b.c)())};return l.a.createElement(l.a.Fragment,null,l.a.createElement(ve.a,{className:Object(X.a)(M.card,"w-full mt-10 rounded-4 cursor-pointer border-1 shadow-none"),onClick:function(){return"o"==I()||"d"==I()?s({type:"[TODO APP] OPEN TASK CONTENT DIALOG",data:e.todo}):""}},l.a.createElement("div",{className:"p-16 flex items-center justify-content-between"},l.a.createElement("div",{className:"flex-fill mr-12"},l.a.createElement("div",{className:"flex items-center mb-6"},e.todo.assigned_company&&l.a.createElement(Q,{title:null===(t=e.todo.assigned_company)||void 0===t?void 0:t.name,color:null===(a=e.todo.assigned_company)||void 0===a?void 0:a.color_project})),l.a.createElement(q.a,{className:"MuiTypography-root todo-title truncate MuiTypography-subtitle1 MuiTypography-colorInherit font-semibold mb-6"}," ",e.todo.name," "),l.a.createElement(q.a,{className:"MuiTypography-root todo-notes truncate mb-8 MuiTypography-body1 MuiTypography-colorTextSecondary font-medium font-size-12 mb-6"},null===m||void 0===m?void 0:m.name),l.a.createElement("div",{className:"flex items-center flex-wrap"},100==e.todo.progress?l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 mx-4 rounded bg-green text-white")},l.a.createElement(G.a,{className:"text-16 mt-4"},"check_circle")," ",l.a.createElement("span",{className:"mx-4"},"Completed")):O()().diff(O()(e.todo.date_start))>0?O()().diff(O()(e.todo.date_end))>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded font-size-12")},"Start: ",O()(e.todo.date_start).format("MMM Do YY")),l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded bg-red text-white font-size-12 ml-12")},"Ends: ",O()(e.todo.date_end).format("MMM Do YY"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 bg-green rounded text-white font-size-12")},"Start: ",O()(e.todo.date_start).format("MMM Do YY")),l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 bg-custom-light-grey rounded font-size-12 ml-12")},"Ends: ",O()(e.todo.date_end).format("MMM Do YY"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 rounded font-size-12")},"Start: ",O()(e.todo.date_start).format("MMM Do YY")),l.a.createElement("div",{className:Object(X.a)("flex items-center px-8 py-4 bg-custom-light-grey rounded font-size-12 ml-12")},"Ends: ",O()(e.todo.date_end).format("MMM Do YY"))))),l.a.createElement("div",{className:"custom-progress-chart"},l.a.createElement("div",{className:"flex justify-end relative"},l.a.createElement(Ee.a,{onClick:function(t){var a;t.preventDefault(),t.stopPropagation(),(null===(a=e.todo.assigned_company)||void 0===a?void 0:a.id)==u.id&&D((function(e){return!e}))},position:"relative",display:"inline-flex"},l.a.createElement(Oe.a,{color:"secondary",variant:"static",value:e.todo.progress}),l.a.createElement(Ee.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},l.a.createElement(q.a,{variant:"caption",component:"div",color:"textSecondary"},e.todo.progress,"%"))),T&&l.a.createElement("div",{className:"custom-ios-slider-dropdown page-dashboard zoom-125"},l.a.createElement("small",{className:"block mb-24"},"Set Task Progress"),l.a.createElement("div",null,l.a.createElement(Te,{"aria-label":"ios slider",defaultValue:e.todo.progress,marks:xe,onChangeCommitted:function(t,a){t.stopPropagation(),t.preventDefault(),s(x({id:e.todo.id,name:e.todo.name,company:e.todo.assigned_company,progress:a},m.id,"new",(function(){}),0,(function(){D((function(e){return!e}))})))},onClick:function(e){e.stopPropagation(),e.preventDefault()},valueLabelDisplay:"on"})))),(null===(n=e.todo.assigned_company)||void 0===n?void 0:n.id)==u.id&&l.a.createElement("div",{className:"flex items-center mt-8"},l.a.createElement("div",null,l.a.createElement(ce.a,{title:"There is a issue with some tree are not clean on site",placement:"top"},l.a.createElement(F.a,{onClick:function(e){e.stopPropagation(),e.preventDefault()}},l.a.createElement(G.a,null,"info_outlined")))),l.a.createElement("div",{className:"custom-outlined-btn"},l.a.createElement(ie.a,{variant:"outlined",color:"primary",className:M.button,startIcon:l.a.createElement(he.a,null),onClick:function(t){var a;t.preventDefault(),t.stopPropagation(),e.todo.assigned_company&&s((a=e.todo,function(e){return e({type:"[TODO APP] OPEN ACTIVITY TODO DIALOG",data:a})}))}},"Add"))))),l.a.createElement("div",{className:"flex h-48 px-16 border-t-1 todo-bg-footer",onClick:function(t){var a;g?(t.preventDefault(),t.stopPropagation(),h(!g)):(t.preventDefault(),t.stopPropagation(),(null===(a=e.todo.assigned_company)||void 0===a?void 0:a.id)==u.id&&h(!0))}},l.a.createElement("div",{className:"flex items-center"},(null===(o=e.todo.assigned_company)||void 0===o?void 0:o.id)==u.id&&l.a.createElement("div",{className:"flex items-center"},l.a.createElement("span",{className:"mx-4"},"Task Activities"),l.a.createElement("span",{className:"mx-4"}," (0/",null===P||void 0===P?void 0:P.length,")"),g?l.a.createElement(G.a,null,"expand_more "):l.a.createElement(G.a,null,"chevron_right "))))),l.a.createElement(te.a,{in:g,timeout:"auto",unmountOnExit:!0},l.a.createElement(ae.a,{className:"p-0"},l.a.createElement(V.a,{enter:{animation:"transition.slideUpBigIn"}},P&&!!P.length&&P.map((function(t){return l.a.createElement(be,{getDetailOfTask:R,task:e.todo,todo:t,key:t.id})}))))))};var Ne=function(e){var t=Object(c.c)((function(e){return e.todoApp.todos.entities})),a=Object(c.c)((function(e){return e.todoApp.todos.searchText})),n=Object(c.c)((function(e){return e.todoApp.todos.orderBy})),o=Object(c.c)((function(e){return e.todoApp.todos.orderDescending})),i=Object(r.useState)(null),s=Object(B.a)(i,2),d=s[0],u=s[1];return Object(r.useEffect)((function(){t&&u(_.a.orderBy(function(e,t){var a=Object.keys(e).map((function(t){return e[t]}));return 0===t.length?a:K.a.filterArrayByString(a,t)}(t,a),[n],[o?"desc":"asc"]))}),[t,a,n,o]),d?0===d.length?l.a.createElement(U.a,{delay:100},l.a.createElement("div",{className:"flex flex-1 items-center justify-center h-full"},l.a.createElement(q.a,{color:"textSecondary",variant:"h5"},"There are no todos!"))):l.a.createElement(V.a,{enter:{animation:"transition.slideUpBigIn"}},d.map((function(e,t){return l.a.createElement(De,{todo:e,key:e.id,index:t})}))):null},Ce=a(133),Se=a(1878),Ae=Object($.a)((function(e){return{listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:24,paddingRight:12,"&.active":{backgroundColor:e.palette.secondary.main,color:"".concat(e.palette.secondary.contrastText,"!important"),pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{fontSize:16,width:16,height:16,marginRight:16}},listSubheader:{paddingLeft:24}}}));var ke=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.todoApp.labels})),n=Object(c.c)((function(e){return e.todoApp.folders})),o=Object(c.c)((function(e){return e.todoApp.filters})),r=Ae(e);return l.a.createElement(U.a,{animation:"transition.slideUpIn",delay:400},l.a.createElement("div",{className:"flex-auto border-l-1 border-solid"},l.a.createElement("div",{className:"p-24"},l.a.createElement(ie.a,{onClick:function(){t({type:"[TODO APP] OPEN NEW TODO DIALOG"})},variant:"contained",color:"primary",className:"w-full"},"ADD TASK")),l.a.createElement("div",{className:r.listWrapper},l.a.createElement(ae.a,null,n.length>0&&n.map((function(e){return l.a.createElement(oe.a,{button:!0,component:Ce.a,to:"/apps/todo/".concat(e.handle),key:e.id,activeClassName:"active",className:r.listItem},l.a.createElement(G.a,{className:"list-item-icon",color:"action"},e.icon),l.a.createElement(le.a,{primary:e.title,disableTypography:!0}))}))),l.a.createElement(ae.a,null,l.a.createElement(Se.a,{className:r.listSubheader,disableSticky:!0},"FILTERS"),o.length>0&&o.map((function(e){return l.a.createElement(oe.a,{button:!0,component:Ce.a,to:"/apps/todo/filter/".concat(e.handle),activeClassName:"active",className:r.listItem,key:e.id},l.a.createElement(G.a,{className:"list-item-icon",color:"action"},e.icon),l.a.createElement(le.a,{primary:e.title,disableTypography:!0}))}))),l.a.createElement(ae.a,null,l.a.createElement(Se.a,{className:r.listSubheader,disableSticky:!0},"LABELS"),a.length>0&&a.map((function(e){return l.a.createElement(oe.a,{button:!0,component:Ce.a,to:"/apps/todo/label/".concat(e.handle),key:e.id,className:r.listItem},l.a.createElement(G.a,{className:"list-item-icon",style:{color:"#388E3C"},color:"action"},"label"),l.a.createElement(le.a,{primary:e.title,disableTypography:!0}))}))))))},we=a(1866),Pe={creapond:"johndoe@creapond.com",withinpixels:"johndoe@withinpixels.com"};var _e=function(){var e=Object(r.useState)("creapond"),t=Object(B.a)(e,2),a=t[0],n=t[1];return l.a.createElement("div",{className:"flex flex-col justify-center h-full p-24"},l.a.createElement("div",{className:"flex items-center flex-1"},l.a.createElement(U.a,{animation:"transition.expandIn",delay:300},l.a.createElement(G.a,{className:"text-32"},"check_box")),l.a.createElement(U.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement("span",{className:"text-24 mx-16"},"To-Do"))),l.a.createElement(U.a,{animation:"transition.slideUpIn",delay:300},l.a.createElement(we.a,{id:"account-selection",select:!0,label:a,value:a,onChange:function(e){n(e.target.value)},placeholder:"Select Account",margin:"normal"},Object.keys(Pe).map((function(e,t){return l.a.createElement(ue.a,{key:e,value:e},Pe[e])})))))},Le=a(571),Ie=a(943);var Me=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.todoApp.todos.orderBy})),n=Object(c.c)((function(e){return e.todoApp.todos.orderDescending}));return l.a.createElement("div",{className:"flex justify-between w-full"},l.a.createElement("div",{className:"flex"}),l.a.createElement("div",{className:"flex items-center"},l.a.createElement(Le.a,{className:""},l.a.createElement(Ie.a,{value:a,onChange:function(e){t(function(e){return{type:"[TODO APP] CHANGE ORDER",orderBy:e}}(e.target.value))},displayEmpty:!0,name:"filter",className:""},l.a.createElement(ue.a,{value:""},l.a.createElement("em",null,"Order by")),l.a.createElement(ue.a,{value:"startDate"},"Start Date"),l.a.createElement(ue.a,{value:"dueDate"},"Due Date"),l.a.createElement(ue.a,{value:"title"},"Title"))),l.a.createElement(F.a,{onClick:function(e){return t({type:"[TODO APP] TOGGLE ORDER DESCENDING"})}},l.a.createElement(G.a,{style:{transform:n?"scaleY(-1)":"scaleY(1)"}},"sort"))))},Re=a(191),Ge=a(1805),Fe=a(1823),Ye=a(600),ze=a(132),He=a.n(ze),We=a(167),Be=a(193),Ue=a(1819),Ve=a(243),Ke=a(291),qe=a(567),$e=a(217);var Xe=function(e){var t=e.isTask,a=e.taskId,n=(Object(c.b)(),l.a.useState()),o=Object(B.a)(n,2)[1],i=l.a.useCallback((function(){return o({})}),[]),s=Object(c.c)((function(e){return e.auth.user.data.company})),u=Object(r.useState)({}),m=Object(B.a)(u,2),v=m[0],O=m[1],E=Object(r.useState)({posts:[]}),g=Object(B.a)(E,2),h=g[0],j=g[1],y=Object(r.useState)({}),x=Object(B.a)(y,2),T=x[0],D=x[1],N=Object(r.useState)(""),C=Object(B.a)(N,2),A=C[0],k=C[1],w=Object(r.useState)(null),_=Object(B.a)(w,2),L=_[0],I=_[1],M=Object(r.useState)(!1),R=Object(B.a)(M,2),z=(R[0],R[1],Object(r.useState)({fileData:void 0,imagePreviewUrl:void 0})),H=Object(B.a)(z,2),W=(H[0],H[1]),U=Object(r.useRef)(null),V=Object(c.c)((function(e){return e.todoApp.todos.todoDialog}));Object(r.useEffect)((function(){s&&O(Object(d.a)({},s))}),[s]),Object(r.useEffect)((function(){var e,t;(null===(e=V.data)||void 0===e||null===(t=e.todo)||void 0===t?void 0:t.id)&&q()}),[V.data]),Object(r.useEffect)((function(){t&&(J(),q())}),[t]);var q=function(){var e;Object(f.b)(t?Object(p.gb)(a):Object(p.hb)(null===(e=V.data.todo)||void 0===e?void 0:e.id),{},(function(e){return j({posts:e.results})}),(function(e){return console.log(e)}),f.a.GET,Object(b.c)())},$=function(){var e=Object(Be.a)(He.a.mark((function e(){var n,o,r,l,c,s,u,m,O,E,g,h,j;return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new FormData,r=$e(),l={text:A,unique_code:r},c=[],L&&(c=L.map((function(e){return{extension:e.extension,media_url:e.imgPath,name:e.file.name,type:e.type}}))),L){s=L.map((function(e){return e.file})),u=0,m=Object(We.a)(s);try{for(m.s();!(O=m.n()).done;)E=O.value,o.append("media["+u+"]",E,E.name),u+=1}catch(y){m.e(y)}finally{m.f()}}for(g in l)l[g]&&o.append(g,l[g]);h={formData:o,text:A,author:v,media_set:c,unique_code:r},console.log({media_set:c}),j=Object(d.a)(Object(d.a)({},T),{},Object(P.a)({},r,h)),D(j),Object(f.b)(t?Object(p.p)(a):Object(p.o)(null===(n=V.data.todo)||void 0===n?void 0:n.id),o,(function(e){console.log({res:e}),delete j[e.unique_code],D(j),q()}),(function(e){j[r]=Object(d.a)(Object(d.a)({},j[r]),{},{retryOption:!0}),console.log({myError:e,tempOfflinePosts:j}),D(j),i()}),f.a.POST,Object(b.c)()),document.getElementById("addPost").value="",I(null);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(Be.a)(He.a.mark((function e(t){var a,n,o,r,l,c,i,s;return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTarget.files,o=t.currentTarget.files[0],console.log("File size ".concat(o.size/1024/1024," MB")),console.log("File Index 0",o),"image"!=(null===(a=o.type)||void 0===a?void 0:a.split("/")[0])){e.next=15;break}return e.next=7,Object(Ve.a)(o,{maxSizeMB:.1,maxWidthOrHeight:1024,useWebWorker:!0});case 7:r=e.sent,console.log("without compressedFile(blob)",r),console.log("compressedFile into the file",new File([r],r.name)),console.log("compressedFile instanceof Blob",r instanceof Blob),console.log("compressedFile size ".concat(r.size/1024/1024," MB")),W({fileData:new File([r],r.name)}),e.next=16;break;case 15:W({fileData:o});case 16:l=[],c=0;case 18:if(!(c<n.length)){e.next=42;break}if(s=null===(i=n[c].type)||void 0===i?void 0:i.split("/"),console.log({fileType:s}),e.t0=[],e.t1=Object(S.a)(l),"image"!=s[0]){e.next=29;break}return e.next=26,Object(b.b)(n[c]);case 26:e.t2=e.sent,e.next=30;break;case 29:e.t2=n[c];case 30:e.t3=e.t2,e.t4=URL.createObjectURL(n[c]),e.t5=s[0],e.t6="."+s[1],e.t7=s.join("/"),e.t8={file:e.t3,imgPath:e.t4,fileType:e.t5,extension:e.t6,type:e.t7},e.t9=[e.t8],l=e.t0.concat.call(e.t0,e.t1,e.t9),I(l);case 39:c++,e.next=18;break;case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){Object(f.b)(Object(p.ob)(a),{},(function(e){return j((function(t){return{sharedPosts:e.results}}))}),(function(e){return console.log(e)}),f.a.GET,Object(b.c)())};return h?l.a.createElement("div",{className:"md:flex max-w-2xl"},l.a.createElement("div",{className:"flex flex-col flex-1 ml-8"},l.a.createElement("div",null,l.a.createElement(ve.a,{className:"w-full overflow-hidden post-form mb-20 post-card-clx"},l.a.createElement(Y.a,{id:"addPost",className:"p-16 w-full write-post",classes:{root:"text-14"},placeholder:"Write something..",multiline:!0,rows:"6",margin:"none",disableUnderline:!0,onChange:function(e){return k(e.target.value)}}),L&&l.a.createElement(Ke.a,{images:L,replaceUrl:function(e,t){L[t]=Object(d.a)(Object(d.a)({},L[t]),{},{imgPath:e,file:K.a.dataURItoFile(e)}),I(L)}}),l.a.createElement(Ue.a,{className:"card-footer flex flex-row border-t-1",position:"static",color:"default",elevation:0},l.a.createElement("div",{className:"add-photo-image bg-white p-10 rounded"},l.a.createElement(F.a,{onClick:function(){return U.current.click()},"aria-label":"Add photo"},l.a.createElement(G.a,null,"photo")),l.a.createElement("input",{hidden:!0,multiple:!0,type:"file",accept:"image/*, video/*",ref:U,onChange:X}),"Add Photos"))),l.a.createElement("div",{className:"flex justify-end mb-20"},l.a.createElement(ie.a,{onClick:$,variant:"contained",color:"primary",size:"medium","aria-label":"post",disabled:!A.length},"POST"))),l.a.createElement(qe.a,{isOffline:!0,tempAuthor:v,isTask:t,taskId:a,posts:Object.values(T),callRetryAfterSuccess:function(e,t){var a=Object(d.a)({},T);a[e]=Object(d.a)(Object(d.a)(Object(d.a)({},a[e]),t),{},{retryOption:!1,successAfterRetry:!0}),D(a),i()}}),l.a.createElement(qe.a,{tempAuthor:v,posts:h.posts}),l.a.createElement(qe.a,{tempAuthor:v,posts:h.sharedPosts}))):null},Je=a(441),Qe=a.n(Je),Ze=a(2237),et=a(2238),tt=a(1989),at=a.n(tt),nt={id:"",title:"",notes:"",startDate:new Date,dueDate:new Date,completed:!1,starred:!1,important:!1,deleted:!1,labels:[]};Object(Z.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)"}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(ee.a);function ot(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.todoApp.todos.todoDialog})),n=(Object(c.c)((function(e){return e.contactsApp.contacts.approvedCompanies})),Object(r.useState)(null)),o=Object(B.a)(n,2),u=(o[0],o[1],Object(s.c)(Object(d.a)({},nt))),m=u.form,v=u.handleChange,g=u.setForm,h=u.resetForm,j=(O()(m.startDate).format(O.a.HTML5_FMT.DATETIME_LOCAL_SECONDS),O()(m.dueDate).format(O.a.HTML5_FMT.DATETIME_LOCAL_SECONDS),Object(r.useState)([])),x=Object(B.a)(j,2),T=(x[0],x[1],Object(r.useState)([])),D=Object(B.a)(T,2),N=D[0],C=D[1],S=Object(r.useState)([]),A=Object(B.a)(S,2),k=A[0],w=A[1],P=Object(r.useState)("to-do"),_=Object(B.a)(P,2),L=_[0],I=_[1],M=Object(r.useState)(!1),R=Object(B.a)(M,2),F=R[0],Y=R[1],z=Object(i.j)(),H=Object(r.useState)({startDate:new Date,endDate:void 0}),W=Object(B.a)(H,2),U=W[0],V=W[1];Object(r.useEffect)((function(){if(a.props.openTimelineDialog)return g(Object(d.a)(Object(d.a)({},a.data.todo),{},{notes:a.data.todo.description})),K(),V({startDate:new Date(a.data.todo.datetime_start),endDate:new Date(a.data.todo.datetime_end)}),I(a.data.todo.status),w(a.data.todo.workers.map((function(e){return{data:e,value:q(e),label:l.a.createElement("span",{className:"flex items-center pl-12"},q(e))}}))),function(){h()}}),[]);var K=function(e){Object(f.b)(Object(p.bb)(a.data.task.project.id,a.data.task.assigned_company.id,e),{},(function(e){return C(e)}),(function(e){return console.log(e)}),f.a.GET,Object(b.c)())},q=function(e){return e.first_name+" "+e.last_name},$=function(e){return e.profile.first_name+" "+e.profile.last_name};return l.a.createElement("div",{className:"pl-10"},l.a.createElement(Le.a,{className:"mt-8 mb-16",required:!0,fullWidth:!0},l.a.createElement(we.a,{label:"Task Title",autoFocus:!0,name:"title",value:m.title,onChange:v,required:!0,variant:"outlined"})),l.a.createElement(Ye.a,{placeholder:"Select Profile",variant:"fixed",isMulti:!0,textFieldProps:{label:"Profile",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){w(e)},value:k,options:N.map((function(e){return{data:e,value:$(e),label:l.a.createElement("span",{className:"flex items-center"},$(e))}})),className:"select-dropdown mb-12"}),l.a.createElement(Le.a,{className:"mt-8 mb-16",required:!0,fullWidth:!0},l.a.createElement(we.a,{label:"Notes",name:"notes",multiline:!0,rows:"6",value:m.notes,onChange:v,variant:"outlined"})),l.a.createElement("div",{className:"flex -mx-4"},l.a.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},l.a.createElement("label",null,"Start Date"),l.a.createElement(at.a,{dateFormat:"dd/MM/yyyy",selected:U.startDate,onChange:function(e){V(Object(d.a)(Object(d.a)({},U),{},{startDate:e}))}}),l.a.createElement(G.a,{className:"icon"},"calendar_today")),l.a.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},l.a.createElement("label",null,"End Date"),l.a.createElement(at.a,{dateFormat:"dd/MM/yyyy",selected:U.endDate,minDate:U.startDate,onChange:function(e){V(Object(d.a)(Object(d.a)({},U),{},{endDate:e}))}}),l.a.createElement(G.a,{className:"icon"},"calendar_today"))),l.a.createElement(Le.a,{className:"mt-8 mb-16",variant:"outlined",required:!0,fullWidth:!0},l.a.createElement(Ie.a,{native:!0,value:L,onChange:function(e){return I(e.target.value)}},l.a.createElement("option",{value:"to-do"},"to-do"),l.a.createElement("option",{value:"completed"},"completed"))),l.a.createElement("div",{className:"flex justify-end"},l.a.createElement(ie.a,{variant:"contained",color:"primary",onClick:function(){Y(!0),t(function(e,t,a,n){return function(t){var o;console.log(e,e.profile);var r={title:e.title,description:e.notes,datetime_start:O()(e.startDate).format("YYYY-MM-DD"),datetime_end:O()(e.endDate).format("YYYY-MM-DD"),status:e.progress,workers:(null===(o=e.profile)||void 0===o?void 0:o.length)?e.profile.map((function(e){return e.data.profile?e.data.profile.id:e.data.id})):void 0};Object(f.b)(Object(p.L)(e.id),r,(function(e){n&&(t(y(0)),t({type:"[TODO APP] CLOSE TIMELINE DIALOG"})),console.log(e),a(!1),E.b.success("Updated")}),(function(e){return console.log(e)}),f.a.PUT,Object(b.c)())}}(Object(d.a)(Object(d.a)({},m),{},{id:a.data.todo.id,profile:k,progress:L},U),z.id,Y,a.data.isGantt))}},"Save ",F&&l.a.createElement(Oe.a,{size:15,color:"secondary"}))))}function rt(e){var t=e.children,a=e.value,n=e.index,o=Object(Re.a)(e,["children","value","index"]);return l.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"wrapped-tabpanel-".concat(n),"aria-labelledby":"wrapped-tab-".concat(n)},o),a===n&&l.a.createElement(Ee.a,{p:3},l.a.createElement(q.a,null,t)))}function lt(e){return{id:"wrapped-tab-".concat(e),"aria-controls":"wrapped-tabpanel-".concat(e)}}var ct={id:"",title:"",notes:"",startDate:new Date,dueDate:new Date,completed:!1,starred:!1,important:!1,deleted:!1,labels:[]};var it=function(e){var t,a,n,o,u,m,v,E,g=Object(c.b)(),h=Object(c.c)((function(e){return e.todoApp.todos.todoDialog})),j=l.a.useState(0),y=Object(B.a)(j,2),x=y[0],T=y[1],D=(Object(c.c)((function(e){return e.todoApp.labels})),Object(c.c)((function(e){return e.contactsApp.contacts.approvedCompanies})),Object(r.useState)(null)),N=Object(B.a)(D,2),C=(N[0],N[1],Object(s.c)(Object(d.a)({},ct))),S=C.form,A=(C.handleChange,C.setForm),k=C.resetForm,w=(O()(S.startDate).format(O.a.HTML5_FMT.DATETIME_LOCAL_SECONDS),O()(S.dueDate).format(O.a.HTML5_FMT.DATETIME_LOCAL_SECONDS),Object(r.useState)([])),P=Object(B.a)(w,2),_=(P[0],P[1]),L=Object(r.useState)([]),I=Object(B.a)(L,2),M=(I[0],I[1]),R=Object(r.useState)([]),G=Object(B.a)(R,2),Y=(G[0],G[1],Object(r.useState)(0)),z=Object(B.a)(Y,2),H=(z[0],z[1],Object(i.j)()),W=Object(r.useState)({startDate:new Date,endDate:void 0}),U=Object(B.a)(W,2),V=(U[0],U[1]),$=Object(r.useCallback)((function(){var e;"edit"===h.type&&h.data&&A(Object(d.a)({},h.data)),"activity"===h.type&&(null===(e=h.data)||void 0===e?void 0:e.assigned_company)&&(J(),V({startDate:new Date(h.data.date_start),endDate:new Date(h.data.date_end)})),"new"===h.type&&(_([]),V({startDate:new Date,endDate:void 0}),A(Object(d.a)(Object(d.a)(Object(d.a)({},ct),h.data),{},{id:K.a.generateGUID()})))}),[h.data,h.type,A]);function X(){return g({type:"[TODO APP] CLOSE TIMELINE DIALOG"})}Object(r.useEffect)((function(){if(h.props.openTimelineDialog)return $(),function(){k()}}),[h.props.openTimelineDialog,$]);var J=function(e){var t;console.log(H.id,h.data.assigned_company.id,e),Object(f.b)(Object(p.bb)(H.id,null===(t=h.data.assigned_company)||void 0===t?void 0:t.id,e),{},(function(e){return M(e)}),(function(e){return console.log(e)}),f.a.GET,Object(b.c)())};return l.a.createElement(Ge.a,Object.assign({open:h.props.openTimelineDialog},h.props,{onClose:X,fullWidth:!0,maxWidth:"sm",className:"rs-dialog-sm-full custom-modal-new timeline-modal"}),l.a.createElement("div",{className:"custom-tab-header flex justify-start relative"},l.a.createElement(Ze.a,{value:x,onChange:function(e,t){T(t)},showLabels:!0},l.a.createElement(et.a,Object.assign({label:"Timeline",wrapped:!0},lt(0))),l.a.createElement(et.a,Object.assign({label:"Activity"},lt(1)))),l.a.createElement("div",{className:"absolute right-m-12"},l.a.createElement(F.a,{onClick:X,edge:"start",color:"inherit","aria-label":"close",className:"close-icon"},l.a.createElement(Qe.a,null)))),l.a.createElement("div",{className:"mt-24 mx-24 sm:mx-32 todo-bg-footer p-12 px-20 rounded"},(null===(t=h.data)||void 0===t||null===(a=t.task)||void 0===a?void 0:a.project)&&l.a.createElement(q.a,{variant:"h6",color:"inherit",className:"font-size-18"},l.a.createElement("div",null,null===(n=h.data)||void 0===n||null===(o=n.task)||void 0===o?void 0:o.project.name)),l.a.createElement("div",{className:"flex items-center font-size-12"},l.a.createElement("div",{className:"my-4"},null===(u=h.data)||void 0===u||null===(m=u.task)||void 0===m?void 0:m.name)," ",l.a.createElement("span",{className:"mx-12"}," > "),l.a.createElement("div",null,null===(v=h.data)||void 0===v||null===(E=v.todo)||void 0===E?void 0:E.title))),l.a.createElement(Fe.a,{id:"dialog-content",classes:{root:"p-0"}},l.a.createElement(rt,{value:x,index:0},l.a.createElement(Xe,null)),l.a.createElement(rt,{value:x,index:1},l.a.createElement(ot,null))))},st=a(1822),dt=a(1824),ut=a(575),mt=a(1865),pt=(a(2077),a(2291)),ft=a(2022),bt=a.n(ft),vt=a(1912),Ot=a.n(vt),Et=a(1988),gt=a.n(Et);function ht(e){var t=e.children,a=e.value,n=e.index,o=Object(Re.a)(e,["children","value","index"]);return l.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"wrapped-tabpanel-".concat(n),"aria-labelledby":"wrapped-tab-".concat(n)},o),a===n&&l.a.createElement(Ee.a,{p:3},l.a.createElement(q.a,null,t)))}function jt(e){return{id:"wrapped-tab-".concat(e),"aria-controls":"wrapped-tabpanel-".concat(e)}}Object($.a)((function(e){return{root:{flexGrow:1,minHeight:"100%",backgroundColor:e.palette.background.paper}}}));var yt=[{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80},{value:90},{value:100}],xt=Object(Z.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",marginTop:-14,marginLeft:-14,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)"}}},active:{},valueLabel:{left:"calc(-50% + 12px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(ee.a);var Tt=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.todoApp.todos.taskContentDialog})),n=Object(c.c)((function(e){var t;return null===(t=e.todoApp.todos.taskContentDialog)||void 0===t?void 0:t.data})),o=Object(c.c)((function(e){return e.contactsApp.contacts.approvedCompanies})),u=Object(r.useState)([]),m=Object(B.a)(u,2),p=m[0],f=m[1],v=Object(r.useState)([]),E=Object(B.a)(v,2),g=E[0],h=(E[1],Object(r.useState)([])),j=Object(B.a)(h,2),y=j[0],T=j[1],D=Object(r.useState)(0),N=Object(B.a)(D,2),C=N[0],A=N[1],k=Object(r.useState)(!1),w=Object(B.a)(k,2),P=w[0],_=w[1],L=Object(i.j)(),I=Object(c.c)((function(e){var t=e.chatApp;return null===t||void 0===t?void 0:t.company})),M=null===n||void 0===n?void 0:n.project,R=Object(r.useState)({startDate:new Date,endDate:void 0}),Y=Object(B.a)(R,2),z=Y[0],H=Y[1],W=l.a.useState(0),U=Object(B.a)(W,2),V=U[0],K=U[1],q=function(e){return e.first_name+" "+e.last_name};Object(r.useEffect)((function(){if(o&&o.length&&n){var e=Object(S.a)(o).filter((function(e){var t,a,o;return(null===(t=e.profile)||void 0===t||null===(a=t.company)||void 0===a?void 0:a.id)==(null===n||void 0===n||null===(o=n.assigned_company)||void 0===o?void 0:o.id)})).map((function(e){var t,a,n;return{data:e,value:null===(t=e.profile)||void 0===t||null===(a=t.company)||void 0===a?void 0:a.name,label:l.a.createElement("span",{className:"flex items-center"},l.a.createElement(G.a,{className:"list-item-icon mr-4",style:{color:null===(n=e.profile.company)||void 0===n?void 0:n.color_project},color:"action"},"label")," ",e.profile.company.name)}}));T(e)}n&&(console.log({taskContentData:n,date_start:n.date_start}),n.isGantt&&1==n.parent?(H({startDate:new Date(n.datetime_start),endDate:new Date(n.datetime_end)}),A(n.progress),f(n.workers.map((function(e){return{data:e,value:q(e),label:l.a.createElement("span",{className:"flex items-center"},q(e))}}))),ae()):(H({startDate:new Date(n.date_start),endDate:new Date(n.date_end)}),A(n.progress)))}),[o,n]);var $=Object(b.a)(),X=function(){var e;return null===$||void 0===$||null===(e=$.extra)||void 0===e?void 0:e.profile.role},J=Object(s.c)({name:1==(null===n||void 0===n?void 0:n.parent)?null===n||void 0===n?void 0:n.title:null===n||void 0===n?void 0:n.name,description:1==(null===n||void 0===n?void 0:n.parent)?null===n||void 0===n?void 0:n.description:null===n||void 0===n?void 0:n.note}),Q=J.form,Z=J.handleChange,ee=(J.setForm,J.setInForm);Q&&Q.due&&O()(Q.due).format(O.a.HTML5_FMT.DATE),Object(r.useCallback)((function(e,t){ee("checklists[".concat(t,"]"),e)}),[ee]);var te=function(){var e;return(null===n||void 0===n||null===(e=n.assigned_company)||void 0===e?void 0:e.id)!=I.id||"w"==X()||"m"==X()};console.log({getIsDisabled:te(),projectDetail:M,companyDetail:I.id,getRole:X()});var ae=function(e){console.log(L.id,n,e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(st.a,{component:"div",className:"p-0"},l.a.createElement(Ue.a,{position:"static",elevation:1},l.a.createElement(mt.a,{className:"flex w-full overflow-x-auto px-8 sm:px-16"},l.a.createElement("div",{className:"flex flex-1"},l.a.createElement("div",{className:"my-12"},(null===n||void 0===n?void 0:n.project)&&l.a.createElement("div",{className:"font-extrabold"},null===n||void 0===n?void 0:n.project.name),l.a.createElement("div",{className:"text-base opacity-75"},null===n||void 0===n?void 0:n.name))),l.a.createElement(F.a,{color:"inherit",onClick:function(e){return t({type:"[TODO APP] CLOSE TASK CONTENT DIALOG"})}},l.a.createElement(G.a,null,"close"))))),l.a.createElement(Fe.a,{id:"dialog-content",className:"p-0 sm:p-10"},l.a.createElement(ht,{value:V,index:0,class:"write-post-img-full"},l.a.createElement(Xe,{taskId:null===n||void 0===n?void 0:n.id,isTask:!0})),l.a.createElement(ht,{value:V,index:1},l.a.createElement(pt.a,{taskId:null===n||void 0===n?void 0:n.id,attachments:null===n||void 0===n?void 0:n.media_set})),l.a.createElement(ht,{value:V,index:2},l.a.createElement("div",{className:"flex items-center mb-24"},l.a.createElement(we.a,{label:"Title",disabled:te(),type:"text",name:"name",variant:"outlined",value:Q.name,onChange:Z,fullWidth:!0,required:!0,InputProps:{endAdornment:l.a.createElement(ut.a,{position:"end"},l.a.createElement(G.a,{className:"text-20",color:"action"},"remove_red_eye"))}})),(null===n||void 0===n?void 0:n.isGantt)&&1==(null===n||void 0===n?void 0:n.parent)?l.a.createElement("div",{className:"mt-8 mb-16 select-dropdown"},l.a.createElement(Ye.a,{isDisabled:te(),placeholder:"Select Profile",variant:"fixed",isMulti:!0,textFieldProps:{label:"Profile",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){f(e.splice(e.length-1))},value:p,options:g.map((function(e){return{data:e,value:q(e),label:l.a.createElement("span",{className:"flex items-center"},q(e))}}))})):o&&!!o.length&&l.a.createElement("div",{className:"mt-8 mb-16 select-dropdown"},l.a.createElement(Ye.a,{className:"",placeholder:"Select Company",isDisabled:te(),variant:"fixed",isMulti:!0,textFieldProps:{label:"Company",InputLabelProps:{shrink:!0},variant:"outlined"},onChange:function(e){T(e.splice(e.length-1))},value:y,options:o.map((function(e){var t,a,n;return{data:e,value:null===(t=e.profile)||void 0===t||null===(a=t.company)||void 0===a?void 0:a.name,label:l.a.createElement("span",{className:"flex items-center"},l.a.createElement(G.a,{className:"list-item-icon mr-4",style:{color:null===(n=e.profile.company)||void 0===n?void 0:n.color_project},color:"action"},"label")," ",e.profile.company.name)}}))})),l.a.createElement("div",{className:"w-full mb-24"},l.a.createElement(we.a,{label:"Description",name:"description",value:Q.description,disabled:te(),onChange:Z,multiline:!0,rows:"4",variant:"outlined",fullWidth:!0})),l.a.createElement("div",{className:"flex -mx-4"},l.a.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},l.a.createElement("label",null,"Start Date"),l.a.createElement(at.a,{disabled:te(),dateFormat:"dd/MM/yyyy",selected:z.startDate,onChange:function(e){H(Object(d.a)(Object(d.a)({},z),{},{startDate:e}))}}),l.a.createElement(G.a,{className:"icon"},"calendar_today")),l.a.createElement("div",{className:"mt-8 mb-16 mx-4 relative static-form-label flex-1"},l.a.createElement("label",null,"End Date"),l.a.createElement(at.a,{dateFormat:"dd/MM/yyyy",selected:z.endDate,disabled:te(),minDate:z.startDate,onChange:function(e){H(Object(d.a)(Object(d.a)({},z),{},{endDate:e}))}}),l.a.createElement(G.a,{className:"icon"},"calendar_today"))),(null===n||void 0===n?void 0:n.isGantt)&&1==(null===n||void 0===n?void 0:n.parent)?null:l.a.createElement("div",{className:"mt-24 mx-12 zoom-125"},l.a.createElement(xt,{"aria-label":"ios slider",disabled:te(),defaultValue:0,marks:yt,onChange:function(e,t){return A(t)},value:C,valueLabelDisplay:"on"})),l.a.createElement(ie.a,{className:"mt-16 float-right","aria-label":"save",variant:"contained",color:"secondary",type:"submit",size:"small",disabled:!(Q.name&&Q.name.length>0&&z.startDate&&z.endDate)||te(),onClick:te()?function(){return""}:function(){_(!0),t(x(Object(d.a)(Object(d.a)({},Q),{},{id:n.id,company:y,profile:p,progress:C},z),n.project.id,a.type,(function(){t({type:"[TODO APP] CLOSE TASK CONTENT DIALOG"})}),n.isGantt,_))}},"Save ",P&&l.a.createElement(Oe.a,{size:15,color:"secondary"})))),l.a.createElement(dt.a,null,l.a.createElement(Ze.a,{value:V,onChange:function(e,t){K(t)},showLabels:!0,className:"flex justify-around w-full"},l.a.createElement(et.a,Object.assign({icon:l.a.createElement(bt.a,null),label:"Post Tabs",wrapped:!0},jt(0))),l.a.createElement(et.a,Object.assign({icon:l.a.createElement(Ot.a,null),label:"Attachments"},jt(1))),l.a.createElement(et.a,Object.assign({icon:l.a.createElement(gt.a,null),label:"Edit"},jt(2))))))},Dt=Object($.a)((function(e){return{paper:{color:e.palette.text.primary}}}));var Nt=function(e){var t=Object(c.b)(),a=Object(c.c)((function(e){return e.todoApp.todos.taskContentDialog})),n=Dt(e);return l.a.createElement(Ge.a,{classes:{paper:Object(X.a)(n.paper,"max-w-lg w-full m-0 sm:m-24 max-height-100")},onClose:function(e){return t({type:"[TODO APP] CLOSE TASK CONTENT DIALOG"})},open:a.props.open},l.a.createElement(Tt,null))};t.default=Object(o.a)("todoApp",M)((function(e){var t=Object(c.b)(),a=Object(r.useRef)(null),o=Object(i.j)();return Object(r.useEffect)((function(){t(function(){var e=m.a.get("/api/todo-app/filters");return function(t){return e.then((function(e){return t({type:N,payload:e.data})}))}}()),t(function(){var e=m.a.get("/api/todo-app/folders");return function(t){return e.then((function(e){return t({type:T,payload:e.data})}))}}()),t(function(){var e=m.a.get("/api/todo-app/labels");return function(t){return e.then((function(e){return t({type:D,payload:e.data})}))}}())}),[t]),Object(s.b)((function(){t(y())}),[t,o]),l.a.createElement(l.a.Fragment,null,l.a.createElement(n.a,{classes:{root:"w-full",header:"items-center min-h-72 h-72 sm:h-136 sm:min-h-136"},header:l.a.createElement(W,{pageLayout:a}),contentToolbar:l.a.createElement(Me,null),content:l.a.createElement(Ne,null),leftSidebarHeader:l.a.createElement(_e,null),leftSidebarContent:l.a.createElement(ke,null),ref:a,innerScroll:!0}),l.a.createElement(it,null),l.a.createElement(Nt,null))}))}}]);